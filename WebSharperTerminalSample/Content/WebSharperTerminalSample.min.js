function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Cctor:function(n){var t=!0;return function(){t&&(t=!1,n())}},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){window.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn;a=window.WebSharperTerminalSample=window.WebSharperTerminalSample||{};b=a.Client=a.Client||{};c=window.StartupCode$WebSharperTerminalSample$Client=window.StartupCode$WebSharperTerminalSample$Client||{};d=window.WebSharper=window.WebSharper||{};e=d.Operators=d.Operators||{};f=d.UI=d.UI||{};g=f.Next=f.Next||{};h=g.Var=g.Var||{};i=d.List=d.List||{};j=i.T=i.T||{};k=d.Arrays=d.Arrays||{};l=g.AttrProxy=g.AttrProxy||{};m=window.WebSharperTerminalSample_Templates=window.WebSharperTerminalSample_Templates||{};n=g.Snap=g.Snap||{};o=g.Abbrev=g.Abbrev||{};p=o.Fresh=o.Fresh||{};q=g.AttrModule=g.AttrModule||{};r=g.Array=g.Array||{};s=d.JavaScript=d.JavaScript||{};t=s.JSModule=s.JSModule||{};u=s.Pervasives=s.Pervasives||{};v=g.Doc=g.Doc||{};w=d.Numeric=d.Numeric||{};x=g.Attrs=g.Attrs||{};y=d.Unchecked=d.Unchecked||{};z=g.DomUtility=g.DomUtility||{};A=window.StartupCode$WebSharper_UI_Next$Abbrev=window.StartupCode$WebSharper_UI_Next$Abbrev||{};B=d.Enumerator=d.Enumerator||{};C=window.StartupCode$WebSharper_UI_Next$Attr_Client=window.StartupCode$WebSharper_UI_Next$Attr_Client||{};D=d.Collections=d.Collections||{};E=D.Dictionary=D.Dictionary||{};F=g.Docs=g.Docs||{};G=window.StartupCode$WebSharper_UI_Next$DomUtility=window.StartupCode$WebSharper_UI_Next$DomUtility||{};H=o.Mailbox=o.Mailbox||{};I=g.View=g.View||{};J=B.T=B.T||{};K=window.StartupCode$WebSharper_UI_Next$Doc_Client=window.StartupCode$WebSharper_UI_Next$Doc_Client||{};L=d.Slice=d.Slice||{};M=d.Strings=d.Strings||{};N=d.Seq=d.Seq||{};O=D.HashSet=D.HashSet||{};P=g.DocElemNode=g.DocElemNode||{};Q=g.Client=g.Client||{};R=Q.Docs=Q.Docs||{};S=R.RunState=R.RunState||{};T=R.NodeSet=R.NodeSet||{};U=g.An=g.An||{};V=g.CheckedInput=g.CheckedInput||{};W=g.Elt=g.Elt||{};X=D.DictionaryUtil=D.DictionaryUtil||{};Y=Q.Attrs=Q.Attrs||{};Z=Y.Dyn=Y.Dyn||{};_0=d.Concurrency=d.Concurrency||{};_1=g.Anims=g.Anims||{};_2=g.AppendList=g.AppendList||{};_3=g.String=g.String||{};_4=g.Updates=g.Updates||{};_5=window.StartupCode$WebSharper_Main$Concurrency=window.StartupCode$WebSharper_Main$Concurrency||{};_6=window.StartupCode$WebSharper_UI_Next$Animation=window.StartupCode$WebSharper_UI_Next$Animation||{};_7=o.HashSet=o.HashSet||{};_8=d.Char=d.Char||{};_9=g.DynamicAttrNode=g.DynamicAttrNode||{};_=_0.Scheduler=_0.Scheduler||{};$=d.CancellationTokenSource=d.CancellationTokenSource||{};ba=g.Easing=g.Easing||{};bb=d.OperationCanceledException=d.OperationCanceledException||{};bc=D.HashSetUtil=D.HashSetUtil||{};bd=window.StartupCode$WebSharper_UI_Next$AppendList=window.StartupCode$WebSharper_UI_Next$AppendList||{};be=d.Lazy=d.Lazy||{};bf=R.DomNodes=R.DomNodes||{};bg=d.Queue=d.Queue||{};bh=window.IntelliFactory;bi=bh&&bh.Runtime;bj=window.console;bk=window.jQuery;bl=window.String;bm=window.Node;bn=window.Date;b.Main=function(){c.$cctor();return c.Main;};b.Help=function(bo){return bo==="help"?{$:1,$0:null}:null;};b.Template=function(bo){return bo==="template"?{$:1,$0:null}:null;};b.set_numOfTemplates=function(bo){c.$cctor();c.numOfTemplates=bo;};b.numOfTemplates=function(){c.$cctor();return c.numOfTemplates;};b.onDownload=function(bo,bp,bq){window.alert(bo.RVal());};b.Clear=function(bo){return bo==="clear"?{$:1,$0:null}:null;};b.Switch=function(bo){return bo==="switch"?{$:1,$0:null}:null;};b.i2=function(bo,bp){if(bp==="asd")bo.echo("kek");else if(bp==="switch")bo.pop();else bo.echo("...");};b.intOpt=function(){c.$cctor();return c.intOpt;};b.Blank=function(bo){return bo===""?{$:1,$0:null}:null;};b.interpreter=function(){c.$cctor();return c.interpreter;};b.Opt=function(){c.$cctor();return c.Opt;};c.$cctor=bi.Cctor(function(){var bo,bp,bq,br;c.intOpt=(bo={},bo.name="No2",bo.prompt="+ ",bo);c.numOfTemplates=0;c.interpreter=function(bs){var bt,bu,bv,bw,bx,by,bz,bA,bB,bC;return(bt=b.Help(bs),bt!=null&&bt.$==1)?this.echo("Commands: help, clear, template"):(bu=b.Template(bs),bu!=null&&bu.$==1)?(b.set_numOfTemplates(b.numOfTemplates()+1),bv="template"+window.String(b.numOfTemplates()),bw=h.Create$1(""),bx=m.form((bz=function(bD,bE){return b.onDownload(bw,bD,bE);},new j({$:1,$0:{$:4,$0:"download",$1:function(bD){return function(bE){return bz(bD,bE);};}},$1:(by=new j({$:1,$0:{$:6,$0:"projname",$1:bw},$1:j.Empty}),new j({$:1,$0:{$:3,$0:"eventprop",$1:l.Concat(i.ofArray([q.Handler("keypress",function(){return function(bD){return bD.stopPropagation();};}),q.Handler("keydown",function(){return function(bD){return bD.stopPropagation();};}),q.Handler("keyup",function(){return function(bD){return bD.stopPropagation();};}),q.Handler("input",function(){return function(bD){return bD.stopPropagation();};})]))},$1:by}))}))),this.echo("<div id=\""+bv+"\"></div>",{raw:true}),v.RunById(bv,bx)):(bA=b.Clear(bs),bA!=null&&bA.$==1)?this.clear():(bB=b.Switch(bs),bB!=null&&bB.$==1)?this.push(function(bD){return b.i2(this,bD);},b.intOpt()):(bC=b.Blank(bs),bC!=null&&bC.$==1)?this.echo(""):this.echo("Unknown command",{raw:true});};c.Opt=(bp={},bp.name="Terminal1",bp.prompt="> ",bp.greetings="Welcome to the Terminal Test Page! See 'help' for the list of commands.",bp.onInit=function(bs){bs.enable();return bs.echo("Hey Dood, it's workin'!");},bp);c.Main=(bq=b.interpreter(),(br=b.Opt(),void window.$("#body").terminal(bq,br)));c.$cctor=window.ignore;});e.FailWith=function(bo){throw window.Error(bo);};e.KeyValue=function(bo){return[bo.K,bo.V];};h.Create$1=function(bo){var bp;bp=null;bp=h.New(false,bo,n.New({$:2,$0:bo,$1:[]}),p.Int(),function(){return bp.s;});return bp;};h.Set=function(bo,bp){if(bo.o)(function(bq){return bq("WebSharper UI.Next: invalid attempt to change value of a Var after calling SetFinal");}(function(bq){bj.log(bq);}));else{n.Obsolete(bo.s);bo.c=bp;bo.s=n.New({$:2,$0:bp,$1:[]});}};j=i.T=bi.Class({GetEnumerator:function(){return new J.New(this,null,function(bo){var bp;bp=bo.s;return bp.$==0?false:(bo.c=bp.$0,bo.s=bp.$1,true);},void 0);},GetEnumerator0:function(){return B.Get(this);}},null,j);j.Empty=new j({$:0});k.get=function(bo,bp){k.checkBounds(bo,bp);return bo[bp];};k.length=function(bo){return bo.dims===2?bo.length*bo.length:bo.length;};k.checkBounds=function(bo,bp){if(bp<0||bp>=bo.length)e.FailWith("Index was outside the bounds of the array.");};k.set=function(bo,bp,bq){k.checkBounds(bo,bp);bo[bp]=bq;};i.ofArray=function(bo){var bp,bq,br;bp=j.Empty;for(bq=k.length(bo)-1,br=0;bq>=br;bq--)bp=new j({$:1,$0:k.get(bo,bq),$1:bp});return bp;};i.head=function(bo){return bo.$==1?bo.$0:i.listEmpty();};i.tail=function(bo){return bo.$==1?bo.$1:i.listEmpty();};i.listEmpty=function(){return e.FailWith("The input list was empty.");};l=g.AttrProxy=bi.Class({},null,l);l.Concat=function(bo){var bp;bp=r.ofSeqNonCopying(bo);return r.TreeReduce(x.EmptyAttr(),l.Append,bp);};l.Append=function(bo,bp){return x.AppendTree(bo,bp);};l.Create=function(bo,bp){return x.Static(function(bq){z.SetAttr(bq,bo,bp);});};m.form=function(bo){return bo?v.GetOrLoadTemplate("template",{$:1,$0:"form"},function(){return bk.parseHTML("<div class=\"form-class\">\r\n    <input type=\"text\" id=\"sample1\" placeholder=\"MyProject\" ws-var=\"ProjName\" ws-attr=\"EventProp\">\r\n    <div class=\"mdl-selectfield mdl-js-selectfield is-dirty\" id=\"plainSelect\" data-upgraded=\",MaterialSelectfield\">\r\n                            <select id=\"myselect\" name=\"myselect\" class=\"mdl-selectfield__select\" style=\"opacity: 0; z-index: -1;\">\r\n                                <option value=\"clientserverfsharp\">Client-Server Application F#\r\n                                <option value=\"spafsharp\">Single Page Application F#\r\n                                <option value=\"extensionfsharp\">Extension F#\r\n                                <option value=\"libraryfsharp\">Library F#\r\n                                <option value=\"offlinefsharp\">HTML Application F#\r\n                                <option value=\"owinfsharp\">Owin F#\r\n                                <option value=\"clientserverfsharp\">Client-Server Application C#\r\n                                <option value=\"spacsharp\">Single Page Application C#\r\n                                <option value=\"librarycsharp\">Library C#\r\n                                <option value=\"offlinecsharp\">HTML Application C#\r\n                            </select>\r\n                            <label class=\"mdl-selectfield__label\" for=\"myselect\">Available templates</label>\r\n                        <div class=\"mdl-selectfield__box\" tabindex=\"1\"><span tabindex=\"-1\" class=\"mdl-selectfield__arrow-down__container\"><span class=\"mdl-selectfield__arrow-down\" tabindex=\"-1\"></span></span><span class=\"mdl-selectfield__box-value\" tabindex=\"-1\">Client-Server Application F#\r\n                                </span></div><div class=\"mdl-selectfield__list-option-box\" tabindex=\"-1\"><ul tabindex=\"-1\"><li class=\"is-selected\" data-value=\"0\" tabindex=\"-1\">Client-Server Application F#\r\n                                </li><li class=\"\" data-value=\"1\" tabindex=\"-1\">Single Page Application F#\r\n                                </li><li class=\"\" data-value=\"2\" tabindex=\"-1\">Extension F#\r\n                                </li><li class=\"\" data-value=\"3\" tabindex=\"-1\">Library F#\r\n                                </li><li class=\"\" data-value=\"4\" tabindex=\"-1\">HTML Application F#\r\n                                </li><li class=\"\" data-value=\"5\" tabindex=\"-1\">Owin F#\r\n                                </li><li class=\"\" data-value=\"6\" tabindex=\"-1\">Client-Server Application C#\r\n                                </li><li class=\"\" data-value=\"7\" tabindex=\"-1\">Single Page Application C#\r\n                                </li><li class=\"\" data-value=\"8\" tabindex=\"-1\">Library C#\r\n                                </li><li class=\"\" data-value=\"9\" tabindex=\"-1\">HTML Application C#\r\n                            </li></ul></div></div>\r\n\r\n    <div class=\"mdl-selectfield mdl-js-selectfield is-dirty\" id=\"plainIdeSelect\" data-upgraded=\",MaterialSelectfield\">\r\n                            <select id=\"myselect\" name=\"myselect\" class=\"mdl-selectfield__select\" style=\"opacity: 0; z-index: -1;\">\r\n                                <option value=\"vs2017\">Visual Studio 2017\r\n                            </select>\r\n                            <label class=\"mdl-selectfield__label\" for=\"myselect\">Your IDE</label>\r\n                        <div class=\"mdl-selectfield__box\" tabindex=\"1\"><span tabindex=\"-1\" class=\"mdl-selectfield__arrow-down__container\"><span class=\"mdl-selectfield__arrow-down\" tabindex=\"-1\"></span></span><span class=\"mdl-selectfield__box-value\" tabindex=\"-1\">Visual Studio 2017\r\n                            </span></div><div class=\"mdl-selectfield__list-option-box\" tabindex=\"-1\"><ul tabindex=\"-1\"><li class=\"is-selected\" data-value=\"0\" tabindex=\"-1\">Visual Studio 2017\r\n                            </li></ul></div></div>\r\n\r\n    <div class=\"social-button-group\">\r\n                            <button class=\"mdl-button mdl-js-button mdl-button--raised mdl-button--colored dl-button\" data-upgraded=\",MaterialButton\" ws-onclick=\"Download\">\r\n                                Download\r\n                            </button>\r\n                        </div>\r\n</div>");},bo):v.PrepareTemplate("template",{$:1,$0:"form"},function(){return bk.parseHTML("<div class=\"form-class\">\r\n    <input type=\"text\" id=\"sample1\" placeholder=\"MyProject\" ws-var=\"ProjName\" ws-attr=\"EventProp\">\r\n    <div class=\"mdl-selectfield mdl-js-selectfield is-dirty\" id=\"plainSelect\" data-upgraded=\",MaterialSelectfield\">\r\n                            <select id=\"myselect\" name=\"myselect\" class=\"mdl-selectfield__select\" style=\"opacity: 0; z-index: -1;\">\r\n                                <option value=\"clientserverfsharp\">Client-Server Application F#\r\n                                <option value=\"spafsharp\">Single Page Application F#\r\n                                <option value=\"extensionfsharp\">Extension F#\r\n                                <option value=\"libraryfsharp\">Library F#\r\n                                <option value=\"offlinefsharp\">HTML Application F#\r\n                                <option value=\"owinfsharp\">Owin F#\r\n                                <option value=\"clientserverfsharp\">Client-Server Application C#\r\n                                <option value=\"spacsharp\">Single Page Application C#\r\n                                <option value=\"librarycsharp\">Library C#\r\n                                <option value=\"offlinecsharp\">HTML Application C#\r\n                            </select>\r\n                            <label class=\"mdl-selectfield__label\" for=\"myselect\">Available templates</label>\r\n                        <div class=\"mdl-selectfield__box\" tabindex=\"1\"><span tabindex=\"-1\" class=\"mdl-selectfield__arrow-down__container\"><span class=\"mdl-selectfield__arrow-down\" tabindex=\"-1\"></span></span><span class=\"mdl-selectfield__box-value\" tabindex=\"-1\">Client-Server Application F#\r\n                                </span></div><div class=\"mdl-selectfield__list-option-box\" tabindex=\"-1\"><ul tabindex=\"-1\"><li class=\"is-selected\" data-value=\"0\" tabindex=\"-1\">Client-Server Application F#\r\n                                </li><li class=\"\" data-value=\"1\" tabindex=\"-1\">Single Page Application F#\r\n                                </li><li class=\"\" data-value=\"2\" tabindex=\"-1\">Extension F#\r\n                                </li><li class=\"\" data-value=\"3\" tabindex=\"-1\">Library F#\r\n                                </li><li class=\"\" data-value=\"4\" tabindex=\"-1\">HTML Application F#\r\n                                </li><li class=\"\" data-value=\"5\" tabindex=\"-1\">Owin F#\r\n                                </li><li class=\"\" data-value=\"6\" tabindex=\"-1\">Client-Server Application C#\r\n                                </li><li class=\"\" data-value=\"7\" tabindex=\"-1\">Single Page Application C#\r\n                                </li><li class=\"\" data-value=\"8\" tabindex=\"-1\">Library C#\r\n                                </li><li class=\"\" data-value=\"9\" tabindex=\"-1\">HTML Application C#\r\n                            </li></ul></div></div>\r\n\r\n    <div class=\"mdl-selectfield mdl-js-selectfield is-dirty\" id=\"plainIdeSelect\" data-upgraded=\",MaterialSelectfield\">\r\n                            <select id=\"myselect\" name=\"myselect\" class=\"mdl-selectfield__select\" style=\"opacity: 0; z-index: -1;\">\r\n                                <option value=\"vs2017\">Visual Studio 2017\r\n                            </select>\r\n                            <label class=\"mdl-selectfield__label\" for=\"myselect\">Your IDE</label>\r\n                        <div class=\"mdl-selectfield__box\" tabindex=\"1\"><span tabindex=\"-1\" class=\"mdl-selectfield__arrow-down__container\"><span class=\"mdl-selectfield__arrow-down\" tabindex=\"-1\"></span></span><span class=\"mdl-selectfield__box-value\" tabindex=\"-1\">Visual Studio 2017\r\n                            </span></div><div class=\"mdl-selectfield__list-option-box\" tabindex=\"-1\"><ul tabindex=\"-1\"><li class=\"is-selected\" data-value=\"0\" tabindex=\"-1\">Visual Studio 2017\r\n                            </li></ul></div></div>\r\n\r\n    <div class=\"social-button-group\">\r\n                            <button class=\"mdl-button mdl-js-button mdl-button--raised mdl-button--colored dl-button\" data-upgraded=\",MaterialButton\" ws-onclick=\"Download\">\r\n                                Download\r\n                            </button>\r\n                        </div>\r\n</div>");});};h=g.Var=bi.Class({RVal:function(){return this.c;},RView:function(){return this.v;},set_RVal:function(bo){h.Set(this,bo);},RUpdM:function(bo){var bp;bp=bo(this.c);bp!=null&&bp.$==1?h.Set(this,bp.$0):void 0;}},null,h);h.New=function(bo,bp,bq,br,bs){return new h({o:bo,c:bp,s:bq,i:br,v:bs});};n.WhenRun=function(bo,bp,bq){var br;br=bo.s;br==null?bq():br!=null&&br.$==2?(br.$1.push(bq),bp(br.$0)):br!=null&&br.$==3?(br.$0.push(bp),br.$1.push(bq)):bp(br.$0);};n.Map=function(bo,bp){var bq,br;bq=bp.s;return bq!=null&&bq.$==0?n.New({$:0,$0:bo(bq.$0)}):(br=n.New({$:3,$0:[],$1:[]}),(n.When(bp,function(bs){n.MarkDone(br,bp,bo(bs));},br),br));};n.Map3=function(bo,bp,bq,br){var bs,bt,bu,bv;function bw(bx){var by,bz,bA,bB;if(!(by=bv.s,by!=null&&by.$==0||by!=null&&by.$==2&&true)){bz=n.ValueAndForever(bp);bA=n.ValueAndForever(bq);bB=n.ValueAndForever(br);bz!=null&&bz.$==1?bA!=null&&bA.$==1?bB!=null&&bB.$==1?bz.$0[1]&&bA.$0[1]&&bB.$0[1]?n.MarkForever(bv,bo(bz.$0[0],bA.$0[0],bB.$0[0])):n.MarkReady(bv,bo(bz.$0[0],bA.$0[0],bB.$0[0])):void 0:void 0:void 0;}}bs=bp.s;bt=bq.s;bu=br.s;return bs!=null&&bs.$==0?bt!=null&&bt.$==0?bu!=null&&bu.$==0?n.New({$:0,$0:bo(bs.$0,bt.$0,bu.$0)}):n.Map3Opt1(bo,bs.$0,bt.$0,br):bu!=null&&bu.$==0?n.Map3Opt2(bo,bs.$0,bu.$0,bq):n.Map3Opt3(bo,bs.$0,bq,br):bt!=null&&bt.$==0?bu!=null&&bu.$==0?n.Map3Opt4(bo,bt.$0,bu.$0,bp):n.Map3Opt5(bo,bt.$0,bp,br):bu!=null&&bu.$==0?n.Map3Opt6(bo,bu.$0,bp,bq):(bv=n.New({$:3,$0:[],$1:[]}),(n.When(bp,bw,bv),n.When(bq,bw,bv),n.When(br,bw,bv),bv));};n.Sequence=function(bo){var bp,bq,br,bs;bp=k.ofSeq(bo);return bp.length==0?n.New({$:0,$0:[]}):(bq=n.New({$:3,$0:[],$1:[]}),(br=[k.length(bp)-1],(bs=function(){var bt;if(br[0]===0){bt=k.map(function(bu){var bv;bv=bu.s;return bv!=null&&bv.$==0?bv.$0:bv!=null&&bv.$==2?bv.$0:e.FailWith("value not found by View.Sequence");},bp);k.forall(function(bu){var bv;return(bv=bu.s,bv!=null&&bv.$==0)&&true;},bp)?n.MarkForever(bq,bt):n.MarkReady(bq,bt);}else br[0]--;},(k.iter(function(bt){n.When(bt,bs,bq);},bp),bq))));};n.Map2=function(bo,bp,bq){var br,bs,bt;function bu(bv){var bw,bx,by;if(!(bw=bt.s,bw!=null&&bw.$==0||bw!=null&&bw.$==2&&true)){bx=n.ValueAndForever(bp);by=n.ValueAndForever(bq);bx!=null&&bx.$==1?by!=null&&by.$==1?bx.$0[1]&&by.$0[1]?n.MarkForever(bt,bo(bx.$0[0],by.$0[0])):n.MarkReady(bt,bo(bx.$0[0],by.$0[0])):void 0:void 0;}}br=bp.s;bs=bq.s;return br!=null&&br.$==0?bs!=null&&bs.$==0?n.New({$:0,$0:bo(br.$0,bs.$0)}):n.Map2Opt1(bo,br.$0,bq):bs!=null&&bs.$==0?n.Map2Opt2(bo,bs.$0,bp):(bt=n.New({$:3,$0:[],$1:[]}),(n.When(bp,bu,bt),n.When(bq,bu,bt),bt));};n.Map2Unit=function(bo,bp){var bq,br,bs;function bt(){var bu,bv,bw;if(!(bu=bs.s,bu!=null&&bu.$==0||bu!=null&&bu.$==2&&true)){bv=n.ValueAndForever(bo);bw=n.ValueAndForever(bp);bv!=null&&bv.$==1?bw!=null&&bw.$==1?bv.$0[1]&&bw.$0[1]?n.MarkForever(bs,null):n.MarkReady(bs,null):void 0:void 0;}}bq=bo.s;br=bp.s;return bq!=null&&bq.$==0?br!=null&&br.$==0?n.New({$:0,$0:null}):bp:br!=null&&br.$==0?bo:(bs=n.New({$:3,$0:[],$1:[]}),(n.When(bo,bt,bs),n.When(bp,bt,bs),bs));};n.WhenObsoleteRun=function(bo,bp){var bq;bq=bo.s;bq==null?bp():bq!=null&&bq.$==2?bq.$1.push(bp):bq!=null&&bq.$==3?bq.$1.push(bp):void 0;};n.When=function(bo,bp,bq){var br;br=bo.s;br==null?n.Obsolete(bq):br!=null&&br.$==2?(n.EnqueueSafe(br.$1,bq),bp(br.$0)):br!=null&&br.$==3?(br.$0.push(bp),n.EnqueueSafe(br.$1,bq)):bp(br.$0);};n.MarkDone=function(bo,bp,bq){var br;if((br=bp.s,br!=null&&br.$==0)&&true)n.MarkForever(bo,bq);else n.MarkReady(bo,bq);};n.Map3Opt1=function(bo,bp,bq,br){return n.Map(function(bs){return bo(bp,bq,bs);},br);};n.Map3Opt2=function(bo,bp,bq,br){return n.Map(function(bs){return bo(bp,bs,bq);},br);};n.Map3Opt3=function(bo,bp,bq,br){return n.Map2(function(bs,bt){return bo(bp,bs,bt);},bq,br);};n.Map3Opt4=function(bo,bp,bq,br){return n.Map(function(bs){return bo(bs,bp,bq);},br);};n.Map3Opt5=function(bo,bp,bq,br){return n.Map2(function(bs,bt){return bo(bs,bp,bt);},bq,br);};n.Map3Opt6=function(bo,bp,bq,br){return n.Map2(function(bs,bt){return bo(bs,bt,bp);},bq,br);};n.ValueAndForever=function(bo){var bp;bp=bo.s;return bp!=null&&bp.$==0?{$:1,$0:[bp.$0,true]}:bp!=null&&bp.$==2?{$:1,$0:[bp.$0,false]}:null;};n.MarkForever=function(bo,bp){var bq,br,bs,bt;bq=bo.s;if(bq!=null&&bq.$==3){bo.s={$:0,$0:bp};br=bq.$0;for(bs=0,bt=k.length(br)-1;bs<=bt;bs++)(k.get(br,bs))(bp);}else void 0;};n.MarkReady=function(bo,bp){var bq,br,bs,bt;bq=bo.s;if(bq!=null&&bq.$==3){bo.s={$:2,$0:bp,$1:bq.$1};br=bq.$0;for(bs=0,bt=k.length(br)-1;bs<=bt;bs++)(k.get(br,bs))(bp);}else void 0;};n.Map2Opt1=function(bo,bp,bq){return n.Map(function(br){return bo(bp,br);},bq);};n.Map2Opt2=function(bo,bp,bq){return n.Map(function(br){return bo(br,bp);},bq);};n.Copy=function(bo){var bp,bq,br;bp=bo.s;return bp==null?bo:bp!=null&&bp.$==2?(bq=n.New({$:2,$0:bp.$0,$1:[]}),(n.WhenObsolete(bo,bq),bq)):bp!=null&&bp.$==3?(br=n.New({$:3,$0:[],$1:[]}),(n.When(bo,function(bs){n.MarkDone(br,bo,bs);},br),br)):bo;};n.EnqueueSafe=function(bo,bp){var bq,br,bs,bt;bo.push(bp);if(bo.length%20===0){bq=bo.slice(0);bg.Clear(bo);for(br=0,bs=k.length(bq)-1;br<=bs;br++){bt=k.get(bq,br);typeof bt=="object"?function(bu){if(bu.s)bo.push(bu);}(bt):function(bu){bo.push(bu);}(bt);}}else void 0;};n.WhenObsolete=function(bo,bp){var bq;bq=bo.s;bq==null?n.Obsolete(bp):bq!=null&&bq.$==2?n.EnqueueSafe(bq.$1,bp):bq!=null&&bq.$==3?n.EnqueueSafe(bq.$1,bp):void 0;};p.Int=function(){p.set_counter(p.counter()+1);return p.counter();};p.set_counter=function(bo){A.$cctor();A.counter=bo;};p.counter=function(){A.$cctor();return A.counter;};q.Handler=function(bo,bp){return x.Static(function(bq){bq.addEventListener(bo,function(br){return(bp(bq))(br);},false);});};q.OnAfterRender=function(bo){return new l({$:4,$0:bo});};q.Value=function(bo){var bp,bq;return q.CustomValue(bo,window.id,(bp=window.id,(bq=function(br){return{$:1,$0:br};},function(br){return bq(bp(br));})));};q.Checked=function(bo){var bp;bp=function(bq){return!y.Equals(bo.RVal(),bq.checked)?bo.set_RVal(bq.checked):null;};return l.Concat([q.DynamicProp("checked",bo.RView()),q.Handler("change",function(bq){return function(br){return bp(bq,br);};}),q.Handler("click",function(bq){return function(br){return bp(bq,br);};})]);};q.IntValue=function(bo){return q.CustomVar(bo,function(bp,bq){var br;br=bq.get_Input();return bp.value!==br?void(bp.value=br):null;},function(bp){var bq,br,bs;bq=bp.value;return{$:1,$0:_3.isBlank(bq)?(bp.checkValidity?bp.checkValidity():true)?new V({$:2,$0:bq}):new V({$:1,$0:bq}):(br=(bs=0,[w.TryParseInt32(bq,{get:function(){return bs;},set:function(bt){bs=bt;}}),bs]),br[0]?new V({$:0,$0:br[1],$1:bq}):new V({$:1,$0:bq}))};});};q.IntValueUnchecked=function(bo){return q.CustomValue(bo,window.String,function(bp){var bq;return _3.isBlank(bp)?{$:1,$0:0}:(bq=+bp,bq!==bq>>0?null:{$:1,$0:bq});});};q.FloatValue=function(bo){return q.CustomVar(bo,function(bp,bq){var br;br=bq.get_Input();return bp.value!==br?void(bp.value=br):null;},function(bp){var bq,br;bq=bp.value;return{$:1,$0:_3.isBlank(bq)?(bp.checkValidity?bp.checkValidity():true)?new V({$:2,$0:bq}):new V({$:1,$0:bq}):(br=+bq,window.isNaN(br)?new V({$:1,$0:bq}):new V({$:0,$0:br,$1:bq}))};});};q.FloatValueUnchecked=function(bo){return q.CustomValue(bo,window.String,function(bp){var bq;return _3.isBlank(bp)?{$:1,$0:0}:(bq=+bp,window.isNaN(bq)?null:{$:1,$0:bq});});};q.Dynamic=function(bo,bp){return x.Dynamic(bp,function(bq){return function(br){return z.SetAttr(bq,bo,br);};});};q.CustomValue=function(bo,bp,bq){return q.CustomVar(bo,function(br,bs){br.value=bp(bs);},function(br){return bq(br.value);});};q.DynamicProp=function(bo,bp){return x.Dynamic(bp,function(bq){return function(br){bq[bo]=br;};});};q.CustomVar=function(bo,bp,bq){var br,bs;br=function(bt){return bo.RUpdM(function(bu){var bv,bw;bv=bq(bt);return bv!=null&&bv.$==1&&(!y.Equals(bv.$0,bu)&&(bw=[bv,bv.$0],true))?bw[0]:null;});};bs=function(bt,bu){var bv,bw;bv=bq(bt);return bv!=null&&bv.$==1&&(y.Equals(bv.$0,bu)&&(bw=bv.$0,true))?null:bp(bt,bu);};return l.Concat([q.Handler("change",function(bt){return function(bu){return br(bt,bu);};}),q.Handler("input",function(bt){return function(bu){return br(bt,bu);};}),q.Handler("keypress",function(bt){return function(bu){return br(bt,bu);};}),q.DynamicCustom(function(bt){return function(bu){return bs(bt,bu);};},bo.RView())]);};q.DynamicCustom=function(bo,bp){return x.Dynamic(bp,bo);};r.ofSeqNonCopying=function(bo){var bp,bq;if(bo instanceof window.Array)return bo;else if(bo instanceof j)return k.ofList(bo);else if(bo===null)return[];else{bp=[];bq=B.Get(bo);try{while(bq.MoveNext())bp.push(bq.Current());return bp;}finally{if("Dispose"in bq)bq.Dispose();}}};r.TreeReduce=function(bo,bp,bq){var br;function bs(bt,bu){var bv,bw;return bu<=0?bo:bu===1&&(bt>=0&&bt<br&&true)?k.get(bq,bt):(bw=bu/2>>0,bp(bs(bt,bw),bs(bt+bw,bu-bw)));}br=k.length(bq);return bs(0,br);};r.MapTreeReduce=function(bo,bp,bq,br){var bs;function bt(bu,bv){var bw,bx;return bv<=0?bp:bv===1&&(bu>=0&&bu<bs&&true)?bo(k.get(br,bu)):(bx=bv/2>>0,bq(bt(bu,bx),bt(bu+bx,bv-bx)));}bs=k.length(br);return bt(0,bs);};t.GetFieldValues=function(bo){var bp,bq;bp=[];for(var br in bo)bp.push(bo[br]);return bp;};u.NewFromSeq=function(bo){var bp,bq,br;bp={};bq=B.Get(bo);try{while(bq.MoveNext()){br=bq.Current();bp[br[0]]=br[1];}}finally{if("Dispose"in bq)bq.Dispose();}return bp;};v=g.Doc=bi.Class({},null,v);v.RunById=function(bo,bp){var bq;bq=z.Doc().getElementById(bo);y.Equals(bq,null)?e.FailWith("invalid id: "+bo):v.Run(bq,bp);};v.GetOrLoadTemplate=function(bo,bp,bq,br){v.PrepareTemplate(bo,bp,bq);return v.NamedTemplate(bo,bp,br);};v.PrepareTemplate=function(bo,bp,bq){var br,bs,bt,bu,bv;if(!F.LoadedTemplates().ContainsKey(v.ComposeName(bo,bp))){br=bq();for(bs=0,bt=br.length-1;bs<=bt;bs++){bu=k.get(br,bs);bv=bu.parentNode;y.Equals(bv,null)?void 0:bv.removeChild(bu);}v.PrepareTemplateStrict(bo,bp,br);}};v.Run=function(bo,bp){var bq;bq=bp.docNode;F.LinkElement(bo,bq);I.Sink(H.StartProcessor(F.PerformAnimatedUpdate(F.CreateRunState(bo,bq),bq)),bp.updates);};v.NamedTemplate=function(bo,bp,bq){var br,bs,bt;br=v.ComposeName(bo,bp);bs=(bt=null,[F.LoadedTemplates().TryGetValue(br,{get:function(){return bt;},set:function(bu){bt=bu;}}),bt]);return bs[0]?v.ChildrenTemplate(bs[1].cloneNode(true),bq):(bj.warn("Local template doesn't exist",br),v.Empty());};v.ComposeName=function(bo,bp){return(bo+"/"+(bp==null?"":bp.$0)).toLowerCase();};v.PrepareTemplateStrict=function(bo,bp,bq){var br,bs,bt,bu,bv,bw,bx,by;function bz(bE,bF,bG){var bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3;while(true)switch(bE){case 0:bL=L.string(bF.nodeName,{$:1,$0:3},null).toLowerCase();bM=bL.indexOf(bl.fromCharCode(46))===-1?bo+"/"+bL:M.Replace(bL,".","/");if(!F.LoadedTemplates().ContainsKey(bM))return bj.warn("Instantiating non-loaded template",bM);else{bN=F.LoadedTemplates().get_Item(bM);bO=bN.cloneNode(true);bP=new O.New$3();bQ=new E.New$5();bR=bF.attributes;for(bS=0,bT=bR.length-1;bS<=bT;bS++){bU=bR.item(bS).name.toLowerCase();bQ.set_Item(bU,(bV=bR.item(bS).nodeValue,bV===""?bU:bV.toLowerCase()));!bP.Add(bU)?bj.warn("Hole mapped twice",bU):void 0;}for(bW=0,bX=bF.childNodes.length-1;bW<=bX;bW++){bY=bF.childNodes[bW];y.Equals(bY.nodeType,bm.ELEMENT_NODE)?!bP.Add(bY.nodeName.toLowerCase())?bj.warn("Hole filled twice",bM):void 0:void 0;}bZ=bF.childNodes.length===1&&y.Equals(bF.firstChild.nodeType,bm.TEXT_NODE);if(bZ){bI=bw(bO,bF.firstChild.textContent);((function(b4){return function(b5){if(b5!=null)b4(b5.$0);};}((bJ=function(b4){return function(b5){return b4.Add(b5);};}(bP),bK=function(){},function(b4){return bK(bJ(b4));})))(bI));}bv(bO,bP);if(!bZ){for(b0=0,b1=bF.childNodes.length-1;b0<=b1;b0++){b2=bF.childNodes[b0];y.Equals(b2.nodeType,bm.ELEMENT_NODE)?b2.hasAttributes()?bu(bO,b2):bA(bO,b2):void 0;}}bt(bO,bQ);(((function(b4){var b5;b5=function(b6,b7){return bx(b4,b6,b7);};return function(b6){return function(b7){return b5(b6,b7);};};}(bO))(bF.parentNode))(bF));bF.parentNode.removeChild(bF);}case 1:if(bG!==null){b3=bG.nextSibling;if(y.Equals(bG.nodeType,bm.TEXT_NODE))bs(bG);else if(y.Equals(bG.nodeType,bm.ELEMENT_NODE))bC(bG);bE=1;bF=bF;bG=b3;}else return null;}}function bA(bE,bF){var bG,bI,bJ;function bH(bK,bL){var bM,bN,bO;if(bI==="title"&&bF.hasChildNodes()){bM=bk.parseHTML(bF.textContent);bF.removeChild(bF.firstChild);for(bN=0,bO=bM.length-1;bN<=bO;bN++)bF.appendChild(k.get(bM,bN));}else null;bC(bF);return bx(bF,bK,bL);}bI=bF.nodeName.toLowerCase();z.IterSelector(bE,"[ws-attr-holes]",function(bK){var bL,bM,bN,bO,bP;bL=M.SplitChars(bK.getAttribute("ws-attr-holes"),[32],1);for(bM=0,bN=bL.length-1;bM<=bN;bM++){bO=k.get(bL,bM);bK.setAttribute(bO,(bP=new window.RegExp("\\${"+bI+"}","ig"),bK.getAttribute(bO).replace(bP,bF.textContent)));}});bJ=bE.querySelector("[ws-hole="+bI+"]");if(y.Equals(bJ,null)){bG=bE.querySelector("[ws-replace="+bI+"]");return y.Equals(bG,null)?null:(bH(bG.parentNode,bG),void bG.parentNode.removeChild(bG));}else{while(bJ.hasChildNodes())bJ.removeChild(bJ.lastChild);bJ.removeAttribute("ws-hole");return bH(bJ,null);}}function bB(bE){return bz(0,bE);}function bC(bE){var bF,bG;if(M.StartsWith(bE.nodeName.toLowerCase(),"ws-")&&!bE.hasAttribute("ws-template"))bB(bE);else{br(bE);bF=bE.getAttribute("ws-template");if(bF===null){bG=bE.getAttribute("ws-children-template");if(bG===null)bD(bE,bE.firstChild);else{bE.removeAttribute("ws-children-template");v.PrepareTemplate(bo,{$:1,$0:bG},function(){return z.ChildrenArray(bE);});while(bE.hasChildNodes())bE.removeChild(bE.lastChild);}}else v.PrepareSingleTemplate(bo,{$:1,$0:bF},bE);}}function bD(bE,bF){return bz(1,bE,bF);}br=function(bE){var bG,bH,bI,bJ,bK,bL,bM,bN;function bF(bO){var bP;bP=bE.getAttribute(bO);bP===null?void 0:bE.setAttribute(bO,bP.toLowerCase());}bG=bE.attributes;bH=[];bI=[];bJ=[];for(bK=0,bL=bG.length-1;bK<=bL;bK++){bM=bG.item(bK);M.StartsWith(bM.nodeName,"ws-on")&&bM.nodeName!=="ws-onafterrender"&&bM.nodeName!=="ws-on"?(bH.push(bM.nodeName),bI.push(L.string(bM.nodeName,{$:1,$0:"ws-on".length},null)+":"+bM.nodeValue.toLowerCase())):!M.StartsWith(bM.nodeName,"ws-")&&(new window.RegExp(F.TextHoleRE())).test(bM.nodeValue)?(bM.nodeValue=(bN=new window.RegExp(F.TextHoleRE(),"g"),bM.nodeValue.replace(bN,function(bO,bP){return"${"+bP.toLowerCase()+"}";})),bJ.push(bM.nodeName)):void 0;}!(bI.length==0)?bE.setAttribute("ws-on",M.concat(" ",bI)):void 0;!(bJ.length==0)?bE.setAttribute("ws-attr-holes",M.concat(" ",bJ)):void 0;bF("ws-hole");bF("ws-replace");bF("ws-attr");bF("ws-onafterrender");bF("ws-var");k.iter(function(bO){bE.removeAttribute(bO);},bH);};bs=function(bE){var bF,bG,bH,bI,bJ,bK;bF=null;bG=0;bI=bE.textContent;bJ=new window.RegExp(F.TextHoleRE(),"g");while(bF=bJ.exec(bI),bF!==null){bE.parentNode.insertBefore(window.document.createTextNode(L.string(bI,{$:1,$0:bG},{$:1,$0:bJ.lastIndex-k.get(bF,0).length-1})),bE);bG=bJ.lastIndex;bK=window.document.createElement("span");bK.setAttribute("ws-replace",k.get(bF,1).toLowerCase());bE.parentNode.insertBefore(bK,bE);}bJ.lastIndex=0;bE.textContent=L.string(bI,{$:1,$0:bG},null);};bt=function(bE,bF){function bG(bH){z.IterSelector(bE,"["+bH+"]",function(bI){var bJ,bK;bJ=(bK=null,[bF.TryGetValue(bI.getAttribute(bH).toLowerCase(),{get:function(){return bK;},set:function(bL){bK=bL;}}),bK]);bJ[0]?bI.setAttribute(bH,bJ[1]):void 0;});}bG("ws-hole");bG("ws-replace");bG("ws-attr");bG("ws-onafterrender");bG("ws-var");z.IterSelector(bE,"[ws-on]",function(bH){bH.setAttribute("ws-on",M.concat(" ",k.map(function(bI){var bJ,bK,bL;bJ=M.SplitChars(bI,[58],1);bK=(bL=null,[bF.TryGetValue(k.get(bJ,1),{get:function(){return bL;},set:function(bM){bL=bM;}}),bL]);return bK[0]?k.get(bJ,0)+":"+bK[1]:bI;},M.SplitChars(bH.getAttribute("ws-on"),[32],1))));});return z.IterSelector(bE,"[ws-attr-holes]",function(bH){var bI,bJ,bK;bI=M.SplitChars(bH.getAttribute("ws-attr-holes"),[32],1);for(bJ=0,bK=bI.length-1;bJ<=bK;bJ++)(function(){var bL,bM;bL=k.get(bI,bJ);return bH.setAttribute(bL,((bM=function(bN,bO){var bP;bP=e.KeyValue(bO);return bN.replace(new window.RegExp("\\${"+bP[0]+"}","ig"),"${"+bP[1]+"}");},(bi.Curried3(N.fold))(bM))(bH.getAttribute(bL)))(bF));}());});};bu=function(bE,bF){var bG,bH,bI,bJ,bK;br(bF);bG=bF.nodeName.toLowerCase();bH=bE.querySelector("[ws-attr="+bG+"]");if(y.Equals(bH,null))return bj.warn("Filling non-existent attr hole",bG);else{bH.removeAttribute("ws-attr");for(bI=0,bJ=bF.attributes.length-1;bI<=bJ;bI++){bK=bF.attributes.item(bI);bK.name==="class"&&bH.hasAttribute("class")?bH.setAttribute("class",bH.getAttribute("class")+" "+bK.nodeValue):bH.setAttribute(bK.name,bK.nodeValue);}return;}};bv=function(bE,bF){function bG(bH){z.IterSelector(bE,"["+bH+"]",function(bI){if(!bF.Contains(bI.getAttribute(bH)))bI.removeAttribute(bH);});}bG("ws-attr");bG("ws-onafterrender");bG("ws-var");z.IterSelector(bE,"[ws-hole]",function(bH){if(!bF.Contains(bH.getAttribute("ws-hole"))){bH.removeAttribute("ws-hole");while(bH.hasChildNodes())bH.removeChild(bH.lastChild);}});z.IterSelector(bE,"[ws-replace]",function(bH){if(!bF.Contains(bH.getAttribute("ws-replace")))bH.parentNode.removeChild(bH);});z.IterSelector(bE,"[ws-on]",function(bH){bH.setAttribute("ws-on",M.concat(" ",k.filter(function(bI){return bF.Contains(k.get(M.SplitChars(bI,[58],1),1));},M.SplitChars(bH.getAttribute("ws-on"),[32],1))));});return z.IterSelector(bE,"[ws-attr-holes]",function(bH){var bI,bJ,bK,bL,bM;bI=M.SplitChars(bH.getAttribute("ws-attr-holes"),[32],1);for(bJ=0,bK=bI.length-1;bJ<=bK;bJ++){bL=k.get(bI,bJ);bH.setAttribute(bL,(bM=new window.RegExp(F.TextHoleRE(),"g"),bH.getAttribute(bL).replace(bM,function(bN,bO){return bF.Contains(bO)?bN:"";})));}});};bw=function(bE,bF){var bG;bG=bE.querySelector("[ws-replace]");return y.Equals(bG,null)?(bj.warn("Filling non-existent text hole",bp),null):(bG.parentNode.replaceChild(new window.Text(bF),bG),{$:1,$0:bG.getAttribute("ws-replace")});};bx=function(bE,bF,bG){while(true)if(bE.hasChildNodes())bG=bF.insertBefore(bE.lastChild,bG);else return null;};by=v.FakeRoot(bq);F.LoadedTemplates().set_Item(v.ComposeName(bo,bp),by);k.length(bq)>0?bD(by,k.get(bq,0)):void 0;};v.ChildrenTemplate=function(bo,bp){var bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD;bx=[];by=[];bz=[];bA=[];bB=new E.New$5();bC=B.Get(bp);try{while(bC.MoveNext()){bD=bC.Current();bB.set_Item(bD.$0,bD);}}finally{if("Dispose"in bC)bC.Dispose();}bq=z.ChildrenArray(bo);br=function(bE,bF){var bG,bH,bI;bG=x.Insert(bE,bF);by.push(x.Updates(bG));bz.push([bE,bG]);bH=bi.GetOptional(bG.OnAfterRender);return bH==null?null:(bI=bH.$0,void bA.push(function(){bI(bE);}));};bs=function(bE){var bF,bG;bF=(bG=null,[bB.TryGetValue(bE,{get:function(){return bG;},set:function(bH){bG=bH;}}),bG]);return bF[0]?bF[1].$==0?{$:1,$0:bF[1].$1}:bF[1].$==1?{$:1,$0:v.TextNode(bF[1].$1)}:bF[1].$==2?{$:1,$0:v.TextView(bF[1].$1)}:bF[1].$==6?{$:1,$0:v.TextView(bF[1].$1.RView())}:bF[1].$==7?{$:1,$0:v.TextView(I.Map(bl,bF[1].$1.RView()))}:bF[1].$==8?{$:1,$0:v.TextView(I.Map(function(bH){return bH.get_Input();},bF[1].$1.RView()))}:bF[1].$==9?{$:1,$0:v.TextView(I.Map(bl,bF[1].$1.RView()))}:bF[1].$==10?{$:1,$0:v.TextView(I.Map(function(bH){return bH.get_Input();},bF[1].$1.RView()))}:bF[1].$==11?{$:1,$0:v.TextView(I.Map(bl,bF[1].$1.RView()))}:(bj.warn("Content hole filled with attribute data",bE),null):null;};z.IterSelector(bo,"[ws-hole]",function(bE){var bF,bG,bH;bH=bE.getAttribute("ws-hole");bE.removeAttribute("ws-hole");while(bE.hasChildNodes())bE.removeChild(bE.lastChild);bF=bs(bH);bF!=null&&bF.$==1?(bG=bF.$0,F.LinkElement(bE,bG.docNode),bx.push(P.New(x.Empty(bE),bG.docNode,null,bE,p.Int(),null)),by.push(bG.updates)):void 0;});z.IterSelector(bo,"[ws-replace]",function(bE){var bF,bG,bH,bI,bJ,bK;bF=bs(bE.getAttribute("ws-replace"));bF!=null&&bF.$==1?(bG=bF.$0,bH=bE.parentNode,bI=window.document.createTextNode(""),bH.replaceChild(bI,bE),bJ=F.InsertBeforeDelim(bI,bG.docNode),bK=k.tryFindIndex(function(bL){return bE===bL;},bq),bK==null?void 0:k.set(bq,bK.$0,bG.docNode),bx.push(P.New(x.Empty(bH),bG.docNode,{$:1,$0:[bJ,bI]},bH,p.Int(),null)),by.push(bG.updates)):void 0;});z.IterSelector(bo,"[ws-attr]",function(bE){var bF,bG,bH;bF=bE.getAttribute("ws-attr");bE.removeAttribute("ws-attr");bG=(bH=null,[bB.TryGetValue(bF,{get:function(){return bH;},set:function(bI){bH=bI;}}),bH]);bG[0]?bG[1].$==3?br(bE,bG[1].$1):bj.warn("Attribute hole filled with non-attribute data",bF):void 0;});z.IterSelector(bo,"[ws-on]",function(bE){br(bE,l.Concat(k.choose(function(bF){var bG,bH,bI;bG=M.SplitChars(bF,[58],1);bH=(bI=null,[bB.TryGetValue(k.get(bG,1),{get:function(){return bI;},set:function(bJ){bI=bJ;}}),bI]);return bH[0]?bH[1].$==4?{$:1,$0:q.Handler(k.get(bG,0),bH[1].$1)}:(bj.warn("Event hole on"+k.get(bG,0)+" filled with non-event data",k.get(bG,1)),null):null;},M.SplitChars(bE.getAttribute("ws-on"),[32],1))));bE.removeAttribute("ws-on");});z.IterSelector(bo,"[ws-onafterrender]",function(bE){var bF,bG,bH;bF=bE.getAttribute("ws-onafterrender");bG=(bH=null,[bB.TryGetValue(bF,{get:function(){return bH;},set:function(bI){bH=bI;}}),bH]);bG[0]?bG[1].$==5?(bE.removeAttribute("ws-onafterrender"),br(bE,q.OnAfterRender(bG[1].$1))):bj.warn("onafterrender hole filled with non-onafterrender data",bF):void 0;});z.IterSelector(bo,"[ws-var]",function(bE){var bF,bG,bH;bF=bE.getAttribute("ws-var");bE.removeAttribute("ws-var");bG=(bH=null,[bB.TryGetValue(bF,{get:function(){return bH;},set:function(bI){bH=bI;}}),bH]);bG[0]?bG[1].$==6?br(bE,q.Value(bG[1].$1)):bG[1].$==7?br(bE,q.Checked(bG[1].$1)):bG[1].$==8?br(bE,q.IntValue(bG[1].$1)):bG[1].$==9?br(bE,q.IntValueUnchecked(bG[1].$1)):bG[1].$==10?br(bE,q.FloatValue(bG[1].$1)):bG[1].$==11?br(bE,q.FloatValueUnchecked(bG[1].$1)):bj.warn("Var hole filled with non-Var data",bF):void 0;});z.IterSelector(bo,"[ws-attr-holes]",function(bE){var bF,bG,bH,bI;bF=new window.RegExp(F.TextHoleRE(),"g");bG=M.SplitChars(bE.getAttribute("ws-attr-holes"),[32],1);bE.removeAttribute("ws-attr-holes");for(bH=0,bI=bG.length-1;bH<=bI;bH++)(function(){var bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV;bS=k.get(bG,bH);bT=bE.getAttribute(bS);bJ=null;bK=0;bU=[];while(bJ=bF.exec(bT),bJ!==null){bV=L.string(bT,{$:1,$0:bK},{$:1,$0:bF.lastIndex-k.get(bJ,0).length-1});bK=bF.lastIndex;bU.push([bV,k.get(bJ,1)]);}bM=L.string(bT,{$:1,$0:bK},null);bF.lastIndex=0;bN=k.foldBack(function(bW,bX){return(function(bY){var bZ,b0;bZ=bY[0];b0=bY[1];return function(b1){var b2,b3,b4,b5,b6;b2=b1[0];b3=b1[1];b4=(b5=(b6=null,[bB.TryGetValue(b0,{get:function(){return b6;},set:function(b7){b6=b7;}}),b6]),b5[0]?b5[1].$==1?{$:0,$0:b5[1].$1}:b5[1].$==2?{$:1,$0:b5[1].$1}:b5[1].$==6?{$:1,$0:b5[1].$1.RView()}:b5[1].$==7?{$:1,$0:I.Map(bl,b5[1].$1.RView())}:b5[1].$==8?{$:1,$0:I.Map(function(b7){return b7.get_Input();},b5[1].$1.RView())}:b5[1].$==9?{$:1,$0:I.Map(bl,b5[1].$1.RView())}:b5[1].$==10?{$:1,$0:I.Map(function(b7){return b7.get_Input();},b5[1].$1.RView())}:b5[1].$==11?{$:1,$0:I.Map(bl,b5[1].$1.RView())}:(bj.warn("Attribute value hole filled with non-text data",b0),{$:0,$0:""}):{$:0,$0:""});return b4.$==1?[bZ,new j({$:1,$0:b2===""?b4.$0:I.Map(function(b7){return b7+b2;},b4.$0),$1:b3})]:[bZ+b4.$0+b2,b3];};}(bW))(bX);},bU,[bM,j.Empty]);return br(bE,bN[1].$==1?bN[1].$1.$==1?bN[1].$1.$1.$==1?bN[1].$1.$1.$1.$==0?(bO=bN[0],q.Dynamic(bS,I.Map3(function(bW,bX,bY){return bO+bW+bX+bY;},bN[1].$0,bN[1].$1.$0,bN[1].$1.$1.$0))):(bP=bN[0],q.Dynamic(bS,I.Map(function(bW){return bP+M.concat("",bW);},I.Sequence(bN[1])))):(bQ=bN[0],q.Dynamic(bS,I.Map2(function(bW,bX){return bQ+bW+bX;},bN[1].$0,bN[1].$1.$0))):bN[0]===""?q.Dynamic(bS,bN[1].$0):(bR=bN[0],q.Dynamic(bS,I.Map(function(bW){return bR+bW;},bN[1].$0))):l.Create(bS,bN[0]));}());});bt=bi.DeleteEmptyFields({Els:bq,Dirty:true,Holes:bx,Attrs:bz,Render:(bu=bA.length==0?null:{$:1,$0:function(bE){k.iter(function(bF){bF(bE);},bA);}},bu?bu.$0:void 0)},["Render"]);bv=r.TreeReduce(I.Const(),I.Map2Unit,by);return bq&&k.length(bq)===1&&(k.get(bq,0)instanceof bm&&(y.Equals(k.get(bq,0).nodeType,bm.ELEMENT_NODE)&&(bw=k.get(bq,0),true)))?W.TreeNode(bt,bv):v.Mk({$:6,$0:bt},bv);};v.Empty=function(){return v.Mk(null,I.Const());};v.PrepareSingleTemplate=function(bo,bp,bq){var br,bs,bt;bq.removeAttribute("ws-template");br=bq.getAttribute("ws-replace");br===null?void 0:(bq.removeAttribute("ws-replace"),bs=bq.parentNode,y.Equals(bs,null)?void 0:(bt=window.document.createElement(bq.tagName),bt.setAttribute("ws-replace",br),bs.replaceChild(bt,bq)));v.PrepareTemplateStrict(bo,bp,[bq]);};v.FakeRoot=function(bo){var bp,bq,br;bp=window.document.createElement("div");for(bq=0,br=bo.length-1;bq<=br;bq++)bp.appendChild(k.get(bo,bq));return bp;};v.TextNode=function(bo){return v.Mk({$:5,$0:z.CreateText(bo)},I.Const());};v.TextView=function(bo){var bp;bp=F.CreateTextNode();return v.Mk({$:4,$0:bp},I.Map(function(bq){F.UpdateTextNode(bp,bq);},bo));};v.Mk=function(bo,bp){return new v.New(bo,bp);};v.New=bi.Ctor(function(bo,bp){this.docNode=bo;this.updates=bp;},v);n.Obsolete=function(bo){var bp,bq,br,bs,bt;bq=bo.s;if(bq==null||(bq!=null&&bq.$==2?(bp=bq.$1,false):bq!=null&&bq.$==3?(bp=bq.$1,false):true))void 0;else{bo.s=null;for(br=0,bs=k.length(bp)-1;br<=bs;br++){bt=k.get(bp,br);typeof bt=="object"?function(bu){n.Obsolete(bu);}(bt):bt();}}};n.New=function(bo){return{s:bo};};w.TryParseInt32=function(bo,bp){return w.TryParse(bo,-2147483648,2147483647,bp);};x.Static=function(bo){return new l({$:3,$0:bo});};x.EmptyAttr=function(){C.$cctor();return C.EmptyAttr;};x.AppendTree=function(bo,bp){var bq;return bo===null?bp:bp===null?bo:(bq=new l({$:2,$0:bo,$1:bp}),(x.SetFlags(bq,x.Flags(bo)|x.Flags(bp)),bq));};x.SetFlags=function(bo,bp){bo.flags=bp;};x.Flags=function(bo){return bo!==null&&bo.hasOwnProperty("flags")?bo.flags:0;};x.Insert=function(bo,bp){var bq,br,bs;function bt(bu){if(!(bu===null))if(bu!=null&&bu.$==1)bq.push(bu.$0);else if(bu!=null&&bu.$==2){bt(bu.$0);bt(bu.$1);}else if(bu!=null&&bu.$==3)bu.$0(bo);else if(bu!=null&&bu.$==4)br.push(bu.$0);}bq=[];br=[];bt(bp);bs=bq.slice(0);return Z.New(bo,x.Flags(bp),bs,br.length===0?null:{$:1,$0:function(bu){N.iter(function(bv){bv(bu);},br);}});};x.Updates=function(bo){return r.MapTreeReduce(function(bp){return bp.NChanged();},I.Const(),I.Map2Unit,bo.DynNodes);};x.Empty=function(bo){return Z.New(bo,0,[],null);};x.HasChangeAnim=function(bo){var bp;bp=4;return(bo.DynFlags&bp)===bp;};x.GetChangeAnim=function(bo){return x.GetAnim(bo,function(bp,bq){return bp.NGetChangeAnim(bq);});};x.HasEnterAnim=function(bo){var bp;bp=1;return(bo.DynFlags&bp)===bp;};x.GetEnterAnim=function(bo){return x.GetAnim(bo,function(bp,bq){return bp.NGetEnterAnim(bq);});};x.HasExitAnim=function(bo){var bp;bp=2;return(bo.DynFlags&bp)===bp;};x.GetExitAnim=function(bo){return x.GetAnim(bo,function(bp,bq){return bp.NGetExitAnim(bq);});};x.Dynamic=function(bo,bp){return new l({$:1,$0:new _9.New(bo,bp)});};x.GetAnim=function(bo,bp){return U.Concat(k.map(function(bq){return bp(bq,bo.DynElem);},bo.DynNodes));};x.Sync=function(bo,bp){k.iter(function(bq){bq.NSync(bo);},bp.DynNodes);};k.ofList=function(bo){var bp,bq;bq=[];bp=bo;while(!(bp.$==0)){bq.push(i.head(bp));bp=i.tail(bp);}return bq;};k.exists=function(bo,bp){var bq,br,bs,bt;bq=false;br=0;bt=k.length(bp);while(!bq&&br<bt)if(bo(bp[br]))bq=true;else br=br+1;return bq;};k.iter=function(bo,bp){var bq,br;for(bq=0,br=bp.length-1;bq<=br;bq++)bo(bp[bq]);};k.map=function(bo,bp){var bq,br,bs;bq=new window.Array(bp.length);for(br=0,bs=bp.length-1;br<=bs;br++)bq[br]=bo(bp[br]);return bq;};k.filter=function(bo,bp){var bq,br,bs;bq=[];for(br=0,bs=bp.length-1;br<=bs;br++)if(bo(bp[br]))bq.push(bp[br]);return bq;};k.tryPick=function(bo,bp){var bq,br,bs;bq=null;br=0;while(br<bp.length&&bq==null){bs=bo(bp[br]);bs!=null&&bs.$==1?bq=bs:void 0;br=br+1;}return bq;};k.tryFindIndex=function(bo,bp){var bq,br;bq=null;br=0;while(br<bp.length&&bq==null){bo(bp[br])?bq={$:1,$0:br}:void 0;br=br+1;}return bq;};k.choose=function(bo,bp){var bq,br,bs,bt;bq=[];for(br=0,bs=bp.length-1;br<=bs;br++){bt=bo(bp[br]);bt==null?void 0:bq.push(bt.$0);}return bq;};k.foldBack=function(bo,bp,bq){var br,bs,bt,bu,bv;br=bq;bt=bp.length;for(bu=1,bv=bt;bu<=bv;bu++)br=bo(bp[bt-bu],br);return br;};k.ofSeq=function(bo){var bp,bq;if(bo instanceof window.Array)return bo.slice();else if(bo instanceof j)return k.ofList(bo);else{bp=[];bq=B.Get(bo);try{while(bq.MoveNext())bp.push(bq.Current());return bp;}finally{if("Dispose"in bq)bq.Dispose();}}};k.pick=function(bo,bp){var bq;bq=k.tryPick(bo,bp);return bq==null?e.FailWith("KeyNotFoundException"):bq.$0;};k.concat=function(bo){return window.Array.prototype.concat.apply([],k.ofSeq(bo));};k.forall=function(bo,bp){var bq,br,bs,bt;bq=true;br=0;bt=k.length(bp);while(bq&&br<bt)if(bo(bp[br]))br=br+1;else bq=false;return bq;};k.create=function(bo,bp){var bq,br,bs;bq=new window.Array(bo);for(br=0,bs=bo-1;br<=bs;br++)bq[br]=bp;return bq;};k.init=function(bo,bp){var bq,br,bs;bo<0?e.FailWith("Negative size given."):null;bq=new window.Array(bo);for(br=0,bs=bo-1;br<=bs;br++)bq[br]=bp(br);return bq;};y.Equals=function(bo,bp){var bq,br,bs,bt;if(bo===bp)return true;else{bq=typeof bo;if(bq=="object"){if(bo===null||bo===void 0||bp===null||bp===void 0)return false;else if("Equals"in bo)return bo.Equals(bp);else if(bo instanceof window.Array&&bp instanceof window.Array)return y.arrayEquals(bo,bp);else if(bo instanceof window.Date&&bp instanceof window.Date)return y.dateEquals(bo,bp);else{br=[true];for(var bu in bo)if(function(bv){br[0]=!bo.hasOwnProperty(bv)||bp.hasOwnProperty(bv)&&y.Equals(bo[bv],bp[bv]);return!br[0];}(bu))break;if(br[0]){for(var bv in bp)if(function(bw){br[0]=!bp.hasOwnProperty(bw)||bo.hasOwnProperty(bw);return!br[0];}(bv))break;}return br[0];}}else return bq=="function"&&("$Func"in bo?bo.$Func===bp.$Func&&bo.$Target===bp.$Target:"$Invokes"in bo&&"$Invokes"in bp&&y.arrayEquals(bo.$Invokes,bp.$Invokes));}};y.arrayEquals=function(bo,bp){var bq,br;if(k.length(bo)===k.length(bp)){bq=true;br=0;while(bq&&br<k.length(bo)){!y.Equals(k.get(bo,br),k.get(bp,br))?bq=false:void 0;br=br+1;}return bq;}else return false;};y.dateEquals=function(bo,bp){return bo.getTime()===bp.getTime();};y.Hash=function(bo){var bp;bp=typeof bo;return bp=="function"?0:bp=="boolean"?bo?1:0:bp=="number"?bo:bp=="string"?y.hashString(bo):bp=="object"?bo==null?0:bo instanceof window.Array?y.hashArray(bo):y.hashObject(bo):0;};y.hashString=function(bo){var bp,bq,br;if(bo===null)return 0;else{bp=5381;for(bq=0,br=bo.length-1;bq<=br;bq++)bp=y.hashMix(bp,bo.charCodeAt(bq)<<0);return bp;}};y.hashArray=function(bo){var bp,bq,br;bp=-34948909;for(bq=0,br=k.length(bo)-1;bq<=br;bq++)bp=y.hashMix(bp,y.Hash(k.get(bo,bq)));return bp;};y.hashObject=function(bo){var bp,bq;if("GetHashCode"in bo)return bo.GetHashCode();else{bp=[0];for(var br in bo)if(function(bs){bp[0]=y.hashMix(y.hashMix(bp[0],y.hashString(bs)),y.Hash(bo[bs]));return false;}(br))break;return bp[0];}};y.hashMix=function(bo,bp){return(bo<<5)+bo+bp;};y.Compare=function(bo,bp){var bq,br,bs,bt,bu,bv;if(bo===bp)return 0;else{br=typeof bo;switch(br=="function"?1:br=="boolean"?2:br=="number"?2:br=="string"?2:br=="object"?3:0){case 0:return typeof bp=="undefined"?0:-1;break;case 1:return e.FailWith("Cannot compare function values.");break;case 2:return bo<bp?-1:1;break;case 3:if(bo===null)bs=-1;else if(bp===null)bs=1;else if("CompareTo"in bo)bs=bo.CompareTo(bp);else if("CompareTo0"in bo)bs=bo.CompareTo0(bp);else if(bo instanceof window.Array&&bp instanceof window.Array)bs=y.compareArrays(bo,bp);else if(bo instanceof window.Date&&bp instanceof window.Date)bs=y.compareDates(bo,bp);else{bt=[0];for(var bw in bo)if(function(bx){return!bo.hasOwnProperty(bx)?false:!bp.hasOwnProperty(bx)?(bt[0]=1,true):(bt[0]=y.Compare(bo[bx],bp[bx]),bt[0]!==0);}(bw))break;if(bt[0]===0){for(var bx in bp)if(function(by){return!bp.hasOwnProperty(by)?false:!bo.hasOwnProperty(by)&&(bt[0]=-1,true);}(bx))break;}bs=bt[0];}return bs;break;}}};y.compareArrays=function(bo,bp){var bq,br;if(k.length(bo)<k.length(bp))return -1;else if(k.length(bo)>k.length(bp))return 1;else{bq=0;br=0;while(bq===0&&br<k.length(bo)){bq=y.Compare(k.get(bo,br),k.get(bp,br));br=br+1;}return bq;}};y.compareDates=function(bo,bp){return y.Compare(bo.getTime(),bp.getTime());};z.Doc=function(){G.$cctor();return G.Doc;};z.IterSelector=function(bo,bp,bq){var br,bs,bt;br=bo.querySelectorAll(bp);for(bs=0,bt=br.length-1;bs<=bt;bs++)bq(br[bs]);};z.ChildrenArray=function(bo){var bp,bq,br;bp=[];for(bq=0,br=bo.childNodes.length-1;bq<=br;bq++)bp.push(bo.childNodes[bq]);return bp;};z.CreateText=function(bo){return z.Doc().createTextNode(bo);};z.SetAttr=function(bo,bp,bq){bo.setAttribute(bp,bq);};z.InsertAt=function(bo,bp,bq){var br;if(!(bq.parentNode===bo&&bp===(br=bq.nextSibling,y.Equals(br,null)?null:br)))bo.insertBefore(bq,bp);};z.RemoveNode=function(bo,bp){if(bp.parentNode===bo)bo.removeChild(bp);};A.$cctor=bi.Cctor(function(){A.counter=0;A.$cctor=window.ignore;});B.Get=function(bo){return bo instanceof window.Array?B.ArrayEnumerator(bo):y.Equals(typeof bo,"string")?B.StringEnumerator(bo):bo.GetEnumerator();};B.ArrayEnumerator=function(bo){return new J.New(0,null,function(bp){var bq;bq=bp.s;return bq<k.length(bo)&&(bp.c=k.get(bo,bq),bp.s=bq+1,true);},void 0);};B.StringEnumerator=function(bo){return new J.New(0,null,function(bp){var bq;bq=bp.s;return bq<bo.length&&(bp.c=bo.charCodeAt(bq),bp.s=bq+1,true);},void 0);};B.Get0=function(bo){return bo instanceof window.Array?B.ArrayEnumerator(bo):y.Equals(typeof bo,"string")?B.StringEnumerator(bo):"GetEnumerator0"in bo?bo.GetEnumerator0():bo.GetEnumerator();};C.$cctor=bi.Cctor(function(){C.EmptyAttr=null;C.$cctor=window.ignore;});E=D.Dictionary=bi.Class({ContainsKey:function(bo){var bp,bq;bp=this;bq=this.data[this.hash(bo)];return bq&&k.exists(function(br){return bp.equals.apply(null,[(e.KeyValue(br))[0],bo]);},bq);},TryGetValue:function(bo,bp){var bq,br,bs;bq=this;br=this.data[this.hash(bo)];return br&&(bs=k.tryPick(function(bt){var bu;bu=e.KeyValue(bt);return bq.equals.apply(null,[bu[0],bo])?{$:1,$0:bu[1]}:null;},br),bs!=null&&bs.$==1&&(bp.set(bs.$0),true));},get_Item:function(bo){return this.get(bo);},set_Item:function(bo,bp){this.set(bo,bp);},get:function(bo){var bp,bq;bp=this;bq=this.data[this.hash(bo)];return bq?k.pick(function(br){var bs;bs=e.KeyValue(br);return bp.equals.apply(null,[bs[0],bo])?{$:1,$0:bs[1]}:null;},bq):X.notPresent();},set:function(bo,bp){var bq,br,bs,bt;bq=this;br=this.hash(bo);bs=this.data[br];bs?(bt=k.tryFindIndex(function(bu){return bq.equals.apply(null,[(e.KeyValue(bu))[0],bo]);},bs),bt==null?(this.count=this.count+1,bs.push({K:bo,V:bp})):bs[bt.$0]={K:bo,V:bp}):(this.count=this.count+1,this.data[br]=new window.Array({K:bo,V:bp}));},GetEnumerator:function(){return B.Get0(this);},GetEnumerator0:function(){return B.Get0(k.concat(t.GetFieldValues(this.data)));}},null,E);E.New$5=bi.Ctor(function(){E.New$6.call(this,[],y.Equals,y.Hash);},E);E.New$6=bi.Ctor(function(bo,bp,bq){var br,bs;this.equals=bp;this.hash=bq;this.count=0;this.data=[];br=B.Get(bo);try{while(br.MoveNext()){bs=br.Current();this.set(bs.K,bs.V);}}finally{if("Dispose"in br)br.Dispose();}},E);F.LoadedTemplates=function(){K.$cctor();return K.LoadedTemplates;};F.LinkElement=function(bo,bp){F.InsertDoc(bo,bp,null);};F.CreateRunState=function(bo,bp){return S.New(T.get_Empty(),F.CreateElemNode(bo,x.EmptyAttr(),bp));};F.PerformAnimatedUpdate=function(bo,bp){var bq;return U.get_UseAnimations()?(bq=null,_0.Delay(function(){var br,bs,bt;br=T.FindAll(bp);bs=F.ComputeChangeAnim(bo,br);bt=F.ComputeEnterAnim(bo,br);return _0.Bind(U.Play(U.Append(bs,F.ComputeExitAnim(bo,br))),function(){return _0.Bind(F.SyncElemNodesNextFrame(bo),function(){return _0.Bind(U.Play(bt),function(){bo.PreviousNodes=br;return _0.Return(null);});});});})):F.SyncElemNodesNextFrame(bo);};F.TextHoleRE=function(){K.$cctor();return K.TextHoleRE;};F.InsertDoc=function(bo,bp,bq){var br;return bp!=null&&bp.$==1?F.InsertNode(bo,bp.$0.El,bq):bp!=null&&bp.$==2?(br=bp.$0,(br.Dirty=false,F.InsertDoc(bo,br.Current,bq))):bp==null?bq:bp!=null&&bp.$==4?F.InsertNode(bo,bp.$0.Text,bq):bp!=null&&bp.$==5?F.InsertNode(bo,bp.$0,bq):bp!=null&&bp.$==6?k.foldBack(function(bs,bt){return bs.constructor===window.Object?F.InsertDoc(bo,bs,bt):F.InsertNode(bo,bs,bt);},bp.$0.Els,bq):F.InsertDoc(bo,bp.$0,F.InsertDoc(bo,bp.$1,bq));};F.CreateElemNode=function(bo,bp,bq){var br;F.LinkElement(bo,bq);br=x.Insert(bo,bp);return P.New(br,bq,null,bo,p.Int(),bi.GetOptional(br.OnAfterRender));};F.ComputeChangeAnim=function(bo,bp){var bq,br;bq=(br=function(bs){return x.HasChangeAnim(bs.Attr);},function(bs){return T.Filter(br,bs);});return U.Concat(k.map(function(bs){return x.GetChangeAnim(bs.Attr);},T.ToArray(T.Intersect(bq(bo.PreviousNodes),bq(bp)))));};F.ComputeEnterAnim=function(bo,bp){return U.Concat(k.map(function(bq){return x.GetEnterAnim(bq.Attr);},T.ToArray(T.Except(bo.PreviousNodes,T.Filter(function(bq){return x.HasEnterAnim(bq.Attr);},bp)))));};F.ComputeExitAnim=function(bo,bp){return U.Concat(k.map(function(bq){return x.GetExitAnim(bq.Attr);},T.ToArray(T.Except(bp,T.Filter(function(bq){return x.HasExitAnim(bq.Attr);},bo.PreviousNodes)))));};F.SyncElemNodesNextFrame=function(bo){var bp;bp=function(bq){window.requestAnimationFrame(function(){F.SyncElemNode(bo.Top);bq();});};return _0.FromContinuations(function(bq,br,bs){return bp.apply(null,[bq,br,bs]);});};F.InsertBeforeDelim=function(bo,bp){var bq,br;bq=bo.parentNode;br=window.document.createTextNode("");bq.insertBefore(br,bo);F.LinkPrevElement(bo,bp);return br;};F.InsertNode=function(bo,bp,bq){z.InsertAt(bo,bq,bp);return bp;};F.SyncElemNode=function(bo){F.SyncElement(bo);F.Sync(bo.Children);F.AfterRender(bo);};F.CreateTextNode=function(){return{Text:z.CreateText(""),Dirty:false,Value:""};};F.UpdateTextNode=function(bo,bp){bo.Value=bp;bo.Dirty=true;};F.LinkPrevElement=function(bo,bp){F.InsertDoc(bo.parentNode,bp,bo);};F.SyncElement=function(bo){function bp(bq){function br(bs){var bt,bu;return bs!=null&&bs.$==0?br(bs.$0)||br(bs.$1):bs!=null&&bs.$==2?(bt=bs.$0,bt.Dirty||br(bt.Current)):bs!=null&&bs.$==6&&(bu=bs.$0,bu.Dirty||k.exists(bp,bu.Holes));}return br(bq.Children);}x.Sync(bo.El,bo.Attr);bp(bo)?F.DoSyncElement(bo):void 0;};F.Sync=function(bo){var bp,bq;if(bo!=null&&bo.$==1)F.SyncElemNode(bo.$0);else if(bo!=null&&bo.$==2)F.Sync(bo.$0.Current);else if(bo==null);else if(bo!=null&&bo.$==5);else if(bo!=null&&bo.$==4){bp=bo.$0;bp.Dirty?(bp.Text.nodeValue=bp.Value,bp.Dirty=false):void 0;}else if(bo!=null&&bo.$==6){bq=bo.$0;k.iter(function(br){F.SyncElemNode(br);},bq.Holes);k.iter(function(br){x.Sync(br[0],br[1]);},bq.Attrs);F.AfterRender(bq);}else{F.Sync(bo.$0);F.Sync(bo.$1);}};F.AfterRender=function(bo){var bp;bp=bi.GetOptional(bo.Render);bp!=null&&bp.$==1?(bp.$0(bo.El),bi.SetOptional(bo,"Render",null)):void 0;};F.DoSyncElement=function(bo){var bp,bq,br;function bs(bt,bu){var bv,bw;return bt!=null&&bt.$==1?bt.$0.El:bt!=null&&bt.$==2?(bv=bt.$0,bv.Dirty?(bv.Dirty=false,F.InsertDoc(bp,bv.Current,bu)):bs(bv.Current,bu)):bt==null?bu:bt!=null&&bt.$==4?bt.$0.Text:bt!=null&&bt.$==5?bt.$0:bt!=null&&bt.$==6?(bw=bt.$0,(bw.Dirty?bw.Dirty=false:void 0,k.foldBack(function(bx,by){return bx.constructor===window.Object?bs(bx,by):bx;},bw.Els,bu))):bs(bt.$0,bs(bt.$1,bu));}bp=bo.El;bf.Iter((bq=bo.El,function(bt){z.RemoveNode(bq,bt);}),bf.Except(bf.DocChildren(bo),bf.Children(bo.El,bi.GetOptional(bo.Delimiters))));bs(bo.Children,(br=bi.GetOptional(bo.Delimiters),br!=null&&br.$==1?br.$0[1]:null));};G.$cctor=bi.Cctor(function(){G.Doc=window.document;G.$cctor=window.ignore;});H.StartProcessor=function(bo){var bp;function bq(){var br;br=null;return _0.Delay(function(){return _0.Bind(bo,function(){var bs;bs=bp[0];return y.Equals(bs,1)?(bp[0]=0,_0.Zero()):y.Equals(bs,2)?(bp[0]=1,bq()):_0.Zero();});});}bp=[0];return function(){var br;br=bp[0];y.Equals(br,0)?(bp[0]=1,_0.Start(bq(),null)):y.Equals(br,1)?bp[0]=2:void 0;};};I.Sink=function(bo,bp){function bq(){n.WhenRun(bp(),bo,function(){_0.scheduler().Fork(bq);});}_0.scheduler().Fork(bq);};I.Map=function(bo,bp){return I.CreateLazy(function(){return n.Map(bo,bp());});};I.Map3=function(bo,bp,bq,br){return I.CreateLazy(function(){return n.Map3(bo,bp(),bq(),br());});};I.Sequence=function(bo){return I.CreateLazy(function(){return n.Sequence(N.map(function(bp){return bp();},bo));});};I.Map2=function(bo,bp,bq){return I.CreateLazy(function(){return n.Map2(bo,bp(),bq());});};I.Const=function(bo){var bp;bp=n.New({$:0,$0:bo});return function(){return bp;};};I.Map2Unit=function(bo,bp){return I.CreateLazy(function(){return n.Map2Unit(bo(),bp());});};I.CreateLazy=function(bo){var bp;bp={c:null,o:bo};return function(){var bq,br;bq=bp.c;return bq===null?(bq=bp.o(),bp.c=bq,(br=bq.s,br!=null&&br.$==0)&&true?bp.o=null:n.WhenObsoleteRun(bq,function(){bp.c=null;}),bq):bq;};};J=B.T=bi.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},null,J);J.New=bi.Ctor(function(bo,bp,bq,br){this.s=bo;this.c=bp;this.n=bq;this.d=br;},J);K.$cctor=bi.Cctor(function(){K.LoadedTemplates=new E.New$5();K.TextHoleRE="\\${([^}]+)}";K.$cctor=window.ignore;});L.string=function(bo,bp,bq){return bp==null?bq!=null&&bq.$==1?bo.slice(0,bq.$0+1):"":bq==null?bo.slice(bp.$0):bo.slice(bp.$0,bq.$0+1);};M.concat=function(bo,bp){return k.ofSeq(bp).join(bo);};M.StartsWith=function(bo,bp){return bo.substring(0,bp.length)==bp;};M.SplitChars=function(bo,bp,bq){return M.Split(bo,new window.RegExp("["+M.RegexEscape(bl.fromCharCode.apply(void 0,bp))+"]"),bq);};M.Replace=function(bo,bp,bq){function br(bs){var bt,bu,bv;bt=bs.indexOf(bp);return bt!==-1?(bu=M.ReplaceOnce(bs,bp,bq),(bv=bt+bq.length,M.Substring(bu,0,bt+bq.length)+br(bu.substring(bv)))):bs;}return br(bo);};M.RegexEscape=function(bo){return bo.replace(new window.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};M.Split=function(bo,bp,bq){return bq===1?k.filter(function(br){return br!=="";},M.SplitWith(bo,bp)):M.SplitWith(bo,bp);};M.ReplaceOnce=function(bo,bp,bq){return bo.replace(bp,bq);};M.forall=function(bo,bp){return N.forall(bo,M.protect(bp));};M.SplitWith=function(bo,bp){return bo.split(bp);};M.Substring=function(bo,bp,bq){return bo.substr(bp,bq);};M.protect=function(bo){return bo===null?"":bo;};N.fold=function(bo,bp,bq){var br,bs;br=bp;bs=B.Get(bq);try{while(bs.MoveNext())br=bo(br,bs.Current());return br;}finally{if("Dispose"in bs)bs.Dispose();}};N.iter=function(bo,bp){var bq;bq=B.Get(bp);try{while(bq.MoveNext())bo(bq.Current());}finally{if("Dispose"in bq)bq.Dispose();}};N.map=function(bo,bp){return{GetEnumerator:function(){var bq;bq=B.Get(bp);return new J.New(null,null,function(br){return bq.MoveNext()&&(br.c=bo(bq.Current()),true);},function(){bq.Dispose();});}};};N.max=function(bo){return N.reduce(function(bp,bq){return y.Compare(bp,bq)>=0?bp:bq;},bo);};N.forall=function(bo,bp){return!N.exists(function(bq){return!bo(bq);},bp);};N.reduce=function(bo,bp){var bq,br;bq=B.Get(bp);try{if(!bq.MoveNext())e.FailWith("The input sequence was empty");br=bq.Current();while(bq.MoveNext())br=bo(br,bq.Current());return br;}finally{if("Dispose"in bq)bq.Dispose();}};N.exists=function(bo,bp){var bq,br;bq=B.Get(bp);try{br=false;while(!br&&bq.MoveNext())br=bo(bq.Current());return br;}finally{if("Dispose"in bq)bq.Dispose();}};O=D.HashSet=bi.Class({Contains:function(bo){var bp;bp=this.data[this.hash(bo)];return bp==null?false:this.arrContains(bo,bp);},Add:function(bo){return this.add(bo);},arrContains:function(bo,bp){var bq,br,bs,bt;bq=true;br=0;bt=bp.length;while(bq&&br<bt)if(this.equals.apply(null,[bp[br],bo]))bq=false;else br=br+1;return!bq;},add:function(bo){var bp,bq;bp=this.hash(bo);bq=this.data[bp];return bq==null?(this.data[bp]=[bo],this.count=this.count+1,true):this.arrContains(bo,bq)?false:(bq.push(bo),this.count=this.count+1,true);},IntersectWith:function(bo){var bp,bq,br,bs,bt;bp=new O.New$4(bo,this.equals,this.hash);bq=bc.concat(this.data);for(br=0,bs=bq.length-1;br<=bs;br++){bt=bq[br];!bp.Contains(bt)?this.Remove(bt):void 0;}},get_Count:function(){return this.count;},CopyTo:function(bo){var bp,bq,br,bs;bp=0;bq=bc.concat(this.data);for(br=0,bs=bq.length-1;br<=bs;br++)k.set(bo,br,bq[br]);},ExceptWith:function(bo){var bp;bp=B.Get(bo);try{while(bp.MoveNext())this.Remove(bp.Current());}finally{if("Dispose"in bp)bp.Dispose();}},Remove:function(bo){var bp;bp=this.data[this.hash(bo)];return bp==null?false:this.arrRemove(bo,bp)&&(this.count=this.count-1,true);},arrRemove:function(bo,bp){var bq,br,bs,bt;bq=true;br=0;bt=bp.length;while(bq&&br<bt)if(this.equals.apply(null,[bp[br],bo])){bp.splice.apply(bp,[br,1]);bq=false;}else br=br+1;return!bq;},GetEnumerator:function(){return B.Get(bc.concat(this.data));},GetEnumerator0:function(){return B.Get(bc.concat(this.data));}},null,O);O.New$3=bi.Ctor(function(){O.New$4.call(this,[],y.Equals,y.Hash);},O);O.New$4=bi.Ctor(function(bo,bp,bq){var br;this.equals=bp;this.hash=bq;this.data=[];this.count=0;br=B.Get(bo);try{while(br.MoveNext())this.add(br.Current());}finally{if("Dispose"in br)br.Dispose();}},O);O.New$2=bi.Ctor(function(bo){O.New$4.call(this,bo,y.Equals,y.Hash);},O);P=g.DocElemNode=bi.Class({Equals:function(bo){return this.ElKey===bo.ElKey;},GetHashCode:function(){return this.ElKey;}},null,P);P.New=function(bo,bp,bq,br,bs,bt){var bu;return new P((bu={Attr:bo,Children:bp,El:br,ElKey:bs},(bi.SetOptional(bu,"Delimiters",bq),bi.SetOptional(bu,"Render",bt),bu)));};S.New=function(bo,bp){return{PreviousNodes:bo,Top:bp};};T.get_Empty=function(){return{$:0,$0:new O.New$3()};};T.FindAll=function(bo){var bp;function bq(bs){if(bs!=null&&bs.$==0){bq(bs.$0);bq(bs.$1);}else if(bs!=null&&bs.$==1)br(bs.$0);else if(bs!=null&&bs.$==2)bq(bs.$0.Current);else if(bs!=null&&bs.$==6)k.iter(br,bs.$0.Holes);}function br(bs){bp.push(bs);bq(bs.Children);}bp=[];bq(bo);return{$:0,$0:new O.New$2(bp)};};T.Filter=function(bo,bp){return{$:0,$0:_7.Filter(bo,bp.$0)};};T.Intersect=function(bo,bp){return{$:0,$0:_7.Intersect(bo.$0,bp.$0)};};T.ToArray=function(bo){return _7.ToArray(bo.$0);};T.Except=function(bo,bp){return{$:0,$0:_7.Except(bo.$0,bp.$0)};};U.get_UseAnimations=function(){return _1.UseAnimations();};U.Play=function(bo){var bp;bp=null;return _0.Delay(function(){return _0.Bind(U.Run(function(){},_1.Actions(bo)),function(){_1.Finalize(bo);return _0.Return(null);});});};U.Append=function(bo,bp){return{$:0,$0:_2.Append(bo.$0,bp.$0)};};U.Concat=function(bo){return{$:0,$0:_2.Concat(N.map(_1.List,bo))};};U.Run=function(bo,bp){var bq,br;bq=bp.Duration;return bq===0?_0.Zero():(br=function(bs){function bt(bu,bv){var bw;bw=bv-bu;bp.Compute(bw);bo();return bw<=bq?void window.requestAnimationFrame(function(bx){bt(bu,bx);}):bs();}window.requestAnimationFrame(function(bu){bt(bu,bu);});},_0.FromContinuations(function(bs,bt,bu){return br.apply(null,[bs,bt,bu]);}));};U.get_Empty=function(){return{$:0,$0:_2.Empty()};};V=g.CheckedInput=bi.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,V);W=g.Elt=bi.Class({},v,W);W.TreeNode=function(bo,bp){var bq,br,bs;bq=_4.Create(bp);return new W.New$1({$:6,$0:bo},I.Map2Unit((br=k.map((bs=function(bt){return bt[1];},function(bt){return x.Updates(bs(bt));}),bo.Attrs),r.TreeReduce(I.Const(),I.Map2Unit,br)),bq.v),k.get(bo.Els,0),bq);};W.New$1=bi.Ctor(function(bo,bp,bq,br){v.New.call(this,bo,bp);this.docNode$1=bo;this.updates$1=bp;this.elt=bq;this.rvUpdates=br;},W);X.notPresent=function(){return e.FailWith("The given key was not present in the dictionary.");};Z.New=function(bo,bp,bq,br){var bs;bs={DynElem:bo,DynFlags:bp,DynNodes:bq};bi.SetOptional(bs,"OnAfterRender",br);return bs;};_0.Delay=function(bo){return function(bp){try{(bo(null))(bp);}catch(bq){bp.k({$:1,$0:bq});}};};_0.Bind=function(bo,bp){return _0.checkCancel(function(bq){bo({k:function(br){var bs;if(br.$==0){bs=br.$0;_0.scheduler().Fork(function(){try{(bp(bs))(bq);}catch(bt){bq.k({$:1,$0:bt});}});}else _0.scheduler().Fork(function(){bq.k(br);});},ct:bq.ct});});};_0.Zero=function(){_5.$cctor();return _5.Zero;};_0.Start=function(bo,bp){var bq,br;bq=(br=(_0.defCTS())[0],bp==null?br:bp.$0);_0.scheduler().Fork(function(){if(!bq.c)bo({k:function(bs){if(bs.$==1)_0.UncaughtAsyncError(bs.$0);},ct:bq});});};_0.Return=function(bo){return function(bp){bp.k({$:0,$0:bo});};};_0.checkCancel=function(bo){return function(bp){if(bp.ct.c)_0.cancel(bp);else bo(bp);};};_0.defCTS=function(){_5.$cctor();return _5.defCTS;};_0.UncaughtAsyncError=function(bo){bj.log("WebSharper: Uncaught asynchronous exception",bo);};_0.FromContinuations=function(bo){return function(bp){var bq,br;bq=[false];br=function(bs){if(bq[0])e.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bq[0]=true;_0.scheduler().Fork(bs);}};bo(function(bs){br(function(){bp.k({$:0,$0:bs});});},function(bs){br(function(){bp.k({$:1,$0:bs});});},function(bs){br(function(){bp.k({$:2,$0:bs});});});};};_0.cancel=function(bo){bo.k({$:2,$0:new bb.New(bo.ct)});};_0.scheduler=function(){_5.$cctor();return _5.scheduler;};_1.UseAnimations=function(){_6.$cctor();return _6.UseAnimations;};_1.Actions=function(bo){return _1.ConcatActions(k.choose(function(bp){return bp.$==1?{$:1,$0:bp.$0}:null;},_2.ToArray(bo.$0)));};_1.Finalize=function(bo){k.iter(function(bp){if(bp.$==0)bp.$0();},_2.ToArray(bo.$0));};_1.List=function(bo){return bo.$0;};_1.ConcatActions=function(bo){var bp,bq,br,bs;bp=r.ofSeqNonCopying(bo);bq=k.length(bp);return bq===0?_1.Const():bq===1?k.get(bp,0):(br=N.max(N.map(function(bt){return bt.Duration;},bp)),(bs=k.map(function(bt){return _1.Prolong(br,bt);},bp),_1.Def(br,function(bt){k.iter(function(bu){bu.Compute(bt);},bs);})));};_1.Const=function(bo){return _1.Def(0,function(){return bo;});};_1.Prolong=function(bo,bp){var bq,br,bs;bq=bp.Compute;br=bp.Duration;bs=be.Create(function(){return bp.Compute(bp.Duration);});return{Compute:function(bt){return bt>=br?bs.f():bq(bt);},Duration:bo};};_1.Def=function(bo,bp){return{Compute:bp,Duration:bo};};_2.Append=function(bo,bp){return bo.$==0?bp:bp.$==0?bo:{$:2,$0:bo,$1:bp};};_2.Concat=function(bo){var bp;bp=r.ofSeqNonCopying(bo);return r.TreeReduce(_2.Empty(),_2.Append,bp);};_2.ToArray=function(bo){var bp;function bq(br){if(br.$==1)bp.push(br.$0);else if(br.$==2){bq(br.$0);bq(br.$1);}else if(br.$==3)k.iter(function(bs){bp.push(bs);},br.$0);}bp=[];bq(bo);return bp.slice(0);};_2.Empty=function(){bd.$cctor();return bd.Empty;};_3.isBlank=function(bo){return M.forall(_8.IsWhiteSpace,bo);};_4=g.Updates=bi.Class({},null,_4);_4.Create=function(bo){var bp;bp=null;bp=_4.New(bo,null,function(){var bq;bq=bp.s;return bq===null?(bq=n.Copy(bp.c()),bp.s=bq,n.WhenObsoleteRun(bq,function(){bp.s=null;}),bq):bq;});return bp;};_4.New=function(bo,bp,bq){return new _4({c:bo,s:bp,v:bq});};_5.$cctor=bi.Cctor(function(){_5.noneCT={c:false,r:[]};_5.scheduler=new _.New();_5.defCTS=[new $.New()];_5.Zero=_0.Return();_5.GetCT=function(bo){bo.k({$:0,$0:bo.ct});};_5.$cctor=window.ignore;});_6.$cctor=bi.Cctor(function(){_6.CubicInOut=ba.Custom(function(bo){var bp;bp=bo*bo;return 3*bp-2*(bp*bo);});_6.UseAnimations=true;_6.$cctor=window.ignore;});_7.Filter=function(bo,bp){return new O.New$2(k.filter(bo,_7.ToArray(bp)));};_7.Intersect=function(bo,bp){var bq;bq=new O.New$2(_7.ToArray(bo));bq.IntersectWith(_7.ToArray(bp));return bq;};_7.ToArray=function(bo){var bp;bp=k.create(bo.get_Count(),void 0);bo.CopyTo(bp);return bp;};_7.Except=function(bo,bp){var bq;bq=new O.New$2(_7.ToArray(bp));bq.ExceptWith(_7.ToArray(bo));return bq;};_8.IsWhiteSpace=function(bo){return bl.fromCharCode(bo).match(new window.RegExp("\\s"))!==null;};w.TryParse=function(bo,bp,bq,br){var bs,bt;bs=+bo;bt=bs===bs-bs%1&&bs>=bp&&bs<=bq;bt?br.set(bs):void 0;return bt;};_9=g.DynamicAttrNode=bi.Class({NChanged:function(){return this.updates;},NGetChangeAnim:function(bo){return U.get_Empty();},NGetEnterAnim:function(bo){return U.get_Empty();},NGetExitAnim:function(bo){return U.get_Empty();},NSync:function(bo){if(this.dirty){(this.push(bo))(this.value);this.dirty=false;}}},null,_9);_9.New=bi.Ctor(function(bo,bp){var bq;bq=this;this.push=bp;this.value=void 0;this.dirty=false;this.updates=I.Map(function(br){bq.value=br;bq.dirty=true;},bo);},_9);_=_0.Scheduler=bi.Class({Fork:function(bo){var bp;bp=this;this.robin.push(bo);this.idle?(this.idle=false,window.setTimeout(function(){bp.tick();},0)):void 0;},tick:function(){var bo,bp,bq;bp=this;bq=bn.now();bo=true;while(bo)if(this.robin.length===0){this.idle=true;bo=false;}else{(this.robin.shift())();bn.now()-bq>40?(window.setTimeout(function(){bp.tick();},0),bo=false):void 0;}}},null,_);_.New=bi.Ctor(function(){this.idle=true;this.robin=[];},_);$=d.CancellationTokenSource=bi.Class({},null,$);$.New=bi.Ctor(function(){this.c=false;this.pending=null;this.r=[];this.init=1;},$);ba=g.Easing=bi.Class({},null,ba);ba.Custom=function(bo){return new ba.New(bo);};ba.New=bi.Ctor(function(bo){this.transformTime=bo;},ba);bb=d.OperationCanceledException=bi.Class({},null,bb);bb.New=bi.Ctor(function(bo){bb.New$1.call(this,"The operation was canceled.",null,bo);},bb);bb.New$1=bi.Ctor(function(bo,bp,bq){this.message=bo;this.inner=bp;this.ct=bq;},bb);bc.concat=function(bo){var bp,bq;bp=[];for(var br in bo)bp.push.apply(bp,bo[br]);return bp;};bd.$cctor=bi.Cctor(function(){bd.Empty={$:0};bd.$cctor=window.ignore;});be.Create=function(bo){return{c:false,v:bo,f:be.forceLazy};};be.forceLazy=function(){var bo;bo=this.v();this.c=true;this.v=bo;this.f=be.cachedLazy;return bo;};be.cachedLazy=function(){return this.v;};bf.DocChildren=function(bo){var bp;function bq(br){if(br!=null&&br.$==2)bq(br.$0.Current);else if(br!=null&&br.$==1)bp.push(br.$0.El);else if(br==null);else if(br!=null&&br.$==5)bp.push(br.$0);else if(br!=null&&br.$==4)bp.push(br.$0.Text);else if(br!=null&&br.$==6)k.iter(function(bs){if(bs.constructor===window.Object)bq(bs);else bp.push(bs);},br.$0.Els);else{bq(br.$0);bq(br.$1);}}bp=[];bq(bo.Children);return{$:0,$0:r.ofSeqNonCopying(bp)};};bf.Children=function(bo,bp){var bq,br,bs;if(bp!=null&&bp.$==1){bs=[];bq=bp.$0[0].nextSibling;while(bq!==bp.$0[1]){bs.push(bq);bq=bq.nextSibling;}return{$:0,$0:bs};}else return{$:0,$0:k.init(bo.childNodes.length,(br=bo.childNodes,function(bt){return br[bt];}))};};bf.Except=function(bo,bp){var bq;bq=bo.$0;return{$:0,$0:k.filter(function(br){return k.forall(function(bs){return!(br===bs);},bq);},bp.$0)};};bf.Iter=function(bo,bp){k.iter(bo,bp.$0);};bg.Clear=function(bo){bo.splice(0,k.length(bo));};bi.OnLoad(function(){b.Main();});}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
