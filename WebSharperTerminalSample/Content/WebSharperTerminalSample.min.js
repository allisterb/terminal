function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Cctor:function(n){var t=!0;return function(){t&&(t=!1,n())}},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){window.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$;a=window.WebSharperTerminalSample=window.WebSharperTerminalSample||{};b=a.Client=a.Client||{};c=window.StartupCode$WebSharperTerminalSample$Client=window.StartupCode$WebSharperTerminalSample$Client||{};d=window.WebSharper=window.WebSharper||{};e=d.UI=d.UI||{};f=e.Next=e.Next||{};g=f.Var=f.Var||{};h=d.Operators=d.Operators||{};i=f.Snap=f.Snap||{};j=f.Abbrev=f.Abbrev||{};k=j.Fresh=j.Fresh||{};l=f.Doc=f.Doc||{};m=d.JavaScript=d.JavaScript||{};n=m.Pervasives=m.Pervasives||{};o=d.Seq=d.Seq||{};p=f.AttrModule=f.AttrModule||{};q=f.DomUtility=f.DomUtility||{};r=d.Unchecked=d.Unchecked||{};s=window.StartupCode$WebSharper_UI_Next$Abbrev=window.StartupCode$WebSharper_UI_Next$Abbrev||{};t=d.Enumerator=d.Enumerator||{};u=t.T=t.T||{};v=f.AttrProxy=f.AttrProxy||{};w=window.StartupCode$WebSharper_UI_Next$DomUtility=window.StartupCode$WebSharper_UI_Next$DomUtility||{};x=f.Docs=f.Docs||{};y=j.Mailbox=j.Mailbox||{};z=f.View=f.View||{};A=f.DocElemNode=f.DocElemNode||{};B=d.Arrays=d.Arrays||{};C=f.Array=f.Array||{};D=f.Elt=f.Elt||{};E=f.Client=f.Client||{};F=E.Docs=E.Docs||{};G=F.RunState=F.RunState||{};H=F.NodeSet=F.NodeSet||{};I=f.An=f.An||{};J=E.Attrs=E.Attrs||{};K=J.Dyn=J.Dyn||{};L=d.List=d.List||{};M=L.T=L.T||{};N=f.Attrs=f.Attrs||{};O=f.Updates=f.Updates||{};P=d.Collections=d.Collections||{};Q=P.HashSet=P.HashSet||{};R=d.Concurrency=d.Concurrency||{};S=f.Anims=f.Anims||{};T=f.AppendList=f.AppendList||{};U=window.StartupCode$WebSharper_UI_Next$Attr_Client=window.StartupCode$WebSharper_UI_Next$Attr_Client||{};V=window.StartupCode$WebSharper_Main$Concurrency=window.StartupCode$WebSharper_Main$Concurrency||{};W=window.StartupCode$WebSharper_UI_Next$Animation=window.StartupCode$WebSharper_UI_Next$Animation||{};X=j.HashSet=j.HashSet||{};Y=f.DynamicAttrNode=f.DynamicAttrNode||{};Z=R.Scheduler=R.Scheduler||{};_0=d.CancellationTokenSource=d.CancellationTokenSource||{};_1=f.Easing=f.Easing||{};_2=d.OperationCanceledException=d.OperationCanceledException||{};_3=P.HashSetUtil=P.HashSetUtil||{};_4=window.StartupCode$WebSharper_UI_Next$AppendList=window.StartupCode$WebSharper_UI_Next$AppendList||{};_5=d.Lazy=d.Lazy||{};_6=F.DomNodes=F.DomNodes||{};_7=d.Queue=d.Queue||{};_8=window.IntelliFactory;_9=_8&&_8.Runtime;_=window.console;$=window.Date;b.Main=function(){c.$cctor();return c.Main;};b.rvInput=function(){c.$cctor();return c.rvInput;};b.Help=function(ba){return ba==="help"?{$:1,$0:null}:null;};b.Template=function(ba){return ba==="template"?{$:1,$0:null}:null;};b.html=function(){c.$cctor();return c.html;};b.Clear=function(ba){return ba==="clear"?{$:1,$0:null}:null;};b.Blank=function(ba){return ba===""?{$:1,$0:null}:null;};b.interpreter=function(){c.$cctor();return c.interpreter;};b.Opt=function(){c.$cctor();return c.Opt;};c.$cctor=_9.Cctor(function(){var ba,bb,bc;c.rvInput=g.Create$1("");c.html=l.Input([],b.rvInput());c.interpreter=function(bd){var be,bf,bg,bh;return(be=b.Help(bd),be!=null&&be.$==1)?this.echo("Commands: help, clear, template"):(bf=b.Template(bd),bf!=null&&bf.$==1)?(this.echo("<div id=\"my\"></div>",{raw:true}),l.RunById("my",b.html())):(bg=b.Clear(bd),bg!=null&&bg.$==1)?this.clear():(bh=b.Blank(bd),bh!=null&&bh.$==1)?this.echo(""):void this.echo("Unknown command",{raw:true});};c.Opt=(ba={},ba.name="Terminal1",ba.prompt="> ",ba.greetings="Welcome to the Terminal Test Page! See 'help' for the list of commands.",ba);c.Main=(bb=b.interpreter(),(bc=b.Opt(),void window.$("#body").terminal(bb,bc)));c.$cctor=window.ignore;});g.Create$1=function(ba){var bb;bb=null;bb=g.New(false,ba,i.New({$:2,$0:ba,$1:[]}),k.Int(),function(){return bb.s;});return bb;};g.Set=function(ba,bb){if(ba.o)(function(bc){return bc("WebSharper UI.Next: invalid attempt to change value of a Var after calling SetFinal");}(function(bc){_.log(bc);}));else{i.Obsolete(ba.s);ba.c=bb;ba.s=i.New({$:2,$0:bb,$1:[]});}};h.FailWith=function(ba){throw window.Error(ba);};g=f.Var=_9.Class({RUpdM:function(ba){var bb;bb=ba(this.c);bb!=null&&bb.$==1?g.Set(this,bb.$0):void 0;},RView:function(){return this.v;}},null,g);g.New=function(ba,bb,bc,bd,be){return new g({o:ba,c:bb,s:bc,i:bd,v:be});};i.WhenRun=function(ba,bb,bc){var bd;bd=ba.s;bd==null?bc():bd!=null&&bd.$==2?(bd.$1.push(bc),bb(bd.$0)):bd!=null&&bd.$==3?(bd.$0.push(bb),bd.$1.push(bc)):bb(bd.$0);};i.Copy=function(ba){var bb,bc,bd;bb=ba.s;return bb==null?ba:bb!=null&&bb.$==2?(bc=i.New({$:2,$0:bb.$0,$1:[]}),(i.WhenObsolete(ba,bc),bc)):bb!=null&&bb.$==3?(bd=i.New({$:3,$0:[],$1:[]}),(i.When(ba,function(be){i.MarkDone(bd,ba,be);},bd),bd)):ba;};i.WhenObsoleteRun=function(ba,bb){var bc;bc=ba.s;bc==null?bb():bc!=null&&bc.$==2?bc.$1.push(bb):bc!=null&&bc.$==3?bc.$1.push(bb):void 0;};i.Map2Unit=function(ba,bb){var bc,bd,be;function bf(){var bg,bh,bi;if(!(bg=be.s,bg!=null&&bg.$==0||bg!=null&&bg.$==2&&true)){bh=i.ValueAndForever(ba);bi=i.ValueAndForever(bb);bh!=null&&bh.$==1?bi!=null&&bi.$==1?bh.$0[1]&&bi.$0[1]?i.MarkForever(be,null):i.MarkReady(be,null):void 0:void 0;}}bc=ba.s;bd=bb.s;return bc!=null&&bc.$==0?bd!=null&&bd.$==0?i.New({$:0,$0:null}):bb:bd!=null&&bd.$==0?ba:(be=i.New({$:3,$0:[],$1:[]}),(i.When(ba,bf,be),i.When(bb,bf,be),be));};i.WhenObsolete=function(ba,bb){var bc;bc=ba.s;bc==null?i.Obsolete(bb):bc!=null&&bc.$==2?i.EnqueueSafe(bc.$1,bb):bc!=null&&bc.$==3?i.EnqueueSafe(bc.$1,bb):void 0;};i.When=function(ba,bb,bc){var bd;bd=ba.s;bd==null?i.Obsolete(bc):bd!=null&&bd.$==2?(i.EnqueueSafe(bd.$1,bc),bb(bd.$0)):bd!=null&&bd.$==3?(bd.$0.push(bb),i.EnqueueSafe(bd.$1,bc)):bb(bd.$0);};i.MarkDone=function(ba,bb,bc){var bd;if((bd=bb.s,bd!=null&&bd.$==0)&&true)i.MarkForever(ba,bc);else i.MarkReady(ba,bc);};i.ValueAndForever=function(ba){var bb;bb=ba.s;return bb!=null&&bb.$==0?{$:1,$0:[bb.$0,true]}:bb!=null&&bb.$==2?{$:1,$0:[bb.$0,false]}:null;};i.MarkForever=function(ba,bb){var bc,bd,be,bf;bc=ba.s;if(bc!=null&&bc.$==3){ba.s={$:0,$0:bb};bd=bc.$0;for(be=0,bf=B.length(bd)-1;be<=bf;be++)(B.get(bd,be))(bb);}else void 0;};i.MarkReady=function(ba,bb){var bc,bd,be,bf;bc=ba.s;if(bc!=null&&bc.$==3){ba.s={$:2,$0:bb,$1:bc.$1};bd=bc.$0;for(be=0,bf=B.length(bd)-1;be<=bf;be++)(B.get(bd,be))(bb);}else void 0;};i.EnqueueSafe=function(ba,bb){var bc,bd,be,bf;ba.push(bb);if(ba.length%20===0){bc=ba.slice(0);_7.Clear(ba);for(bd=0,be=B.length(bc)-1;bd<=be;bd++){bf=B.get(bc,bd);typeof bf=="object"?function(bg){if(bg.s)ba.push(bg);}(bf):function(bg){ba.push(bg);}(bf);}}else void 0;};i.Map=function(ba,bb){var bc,bd;bc=bb.s;return bc!=null&&bc.$==0?i.New({$:0,$0:ba(bc.$0)}):(bd=i.New({$:3,$0:[],$1:[]}),(i.When(bb,function(be){i.MarkDone(bd,bb,ba(be));},bd),bd));};k.Int=function(){k.set_counter(k.counter()+1);return k.counter();};k.set_counter=function(ba){s.$cctor();s.counter=ba;};k.counter=function(){s.$cctor();return s.counter;};l=f.Doc=_9.Class({},null,l);l.Input=function(ba,bb){return l.InputInternal("input",function(){return o.append(ba,[p.Value(bb)]);});};l.RunById=function(ba,bb){var bc;bc=q.Doc().getElementById(ba);r.Equals(bc,null)?h.FailWith("invalid id: "+ba):l.Run(bc,bb);};l.InputInternal=function(ba,bb){var bc;bc=q.CreateElement(ba);return D.New(bc,v.Concat(bb(bc)),l.Empty());};l.Run=function(ba,bb){var bc;bc=bb.docNode;x.LinkElement(ba,bc);z.Sink(y.StartProcessor(x.PerformAnimatedUpdate(x.CreateRunState(ba,bc),bc)),bb.updates);};l.Empty=function(){return l.Mk(null,z.Const());};l.Mk=function(ba,bb){return new l.New(ba,bb);};l.New=_9.Ctor(function(ba,bb){this.docNode=ba;this.updates=bb;},l);n.NewFromSeq=function(ba){var bb,bc,bd;bb={};bc=t.Get(ba);try{while(bc.MoveNext()){bd=bc.Current();bb[bd[0]]=bd[1];}}finally{if("Dispose"in bc)bc.Dispose();}return bb;};i.Obsolete=function(ba){var bb,bc,bd,be,bf;bc=ba.s;if(bc==null||(bc!=null&&bc.$==2?(bb=bc.$1,false):bc!=null&&bc.$==3?(bb=bc.$1,false):true))void 0;else{ba.s=null;for(bd=0,be=B.length(bb)-1;bd<=be;bd++){bf=B.get(bb,bd);typeof bf=="object"?function(bg){i.Obsolete(bg);}(bf):bf();}}};i.New=function(ba){return{s:ba};};o.append=function(ba,bb){return{GetEnumerator:function(){var bc;bc=[true];return new u.New(t.Get(ba),null,function(bd){var be;return bd.s.MoveNext()?(bd.c=bd.s.Current(),true):(be=bd.s,!r.Equals(be,null)?be.Dispose():void 0,bd.s=null,bc[0]&&(bc[0]=false,bd.s=t.Get(bb),bd.s.MoveNext()?(bd.c=bd.s.Current(),true):(bd.s.Dispose(),bd.s=null,false)));},function(bd){var be;be=bd.s;!r.Equals(be,null)?be.Dispose():void 0;});}};};o.iter=function(ba,bb){var bc;bc=t.Get(bb);try{while(bc.MoveNext())ba(bc.Current());}finally{if("Dispose"in bc)bc.Dispose();}};o.map=function(ba,bb){return{GetEnumerator:function(){var bc;bc=t.Get(bb);return new u.New(null,null,function(bd){return bc.MoveNext()&&(bd.c=ba(bc.Current()),true);},function(){bc.Dispose();});}};};o.max=function(ba){return o.reduce(function(bb,bc){return r.Compare(bb,bc)>=0?bb:bc;},ba);};o.reduce=function(ba,bb){var bc,bd;bc=t.Get(bb);try{if(!bc.MoveNext())h.FailWith("The input sequence was empty");bd=bc.Current();while(bc.MoveNext())bd=ba(bd,bc.Current());return bd;}finally{if("Dispose"in bc)bc.Dispose();}};p.Value=function(ba){var bb,bc;return p.CustomValue(ba,window.id,(bb=window.id,(bc=function(bd){return{$:1,$0:bd};},function(bd){return bc(bb(bd));})));};p.CustomValue=function(ba,bb,bc){return p.CustomVar(ba,function(bd,be){bd.value=bb(be);},function(bd){return bc(bd.value);});};p.CustomVar=function(ba,bb,bc){var bd,be;bd=function(bf){return ba.RUpdM(function(bg){var bh,bi;bh=bc(bf);return bh!=null&&bh.$==1&&(!r.Equals(bh.$0,bg)&&(bi=[bh,bh.$0],true))?bi[0]:null;});};be=function(bf,bg){var bh,bi;bh=bc(bf);return bh!=null&&bh.$==1&&(r.Equals(bh.$0,bg)&&(bi=bh.$0,true))?null:bb(bf,bg);};return v.Concat([p.Handler("change",function(bf){return function(bg){return bd(bf,bg);};}),p.Handler("input",function(bf){return function(bg){return bd(bf,bg);};}),p.Handler("keypress",function(bf){return function(bg){return bd(bf,bg);};}),p.DynamicCustom(function(bf){return function(bg){return be(bf,bg);};},ba.RView())]);};p.Handler=function(ba,bb){return N.Static(function(bc){bc.addEventListener(ba,function(bd){return(bb(bc))(bd);},false);});};p.DynamicCustom=function(ba,bb){return N.Dynamic(bb,ba);};q.Doc=function(){w.$cctor();return w.Doc;};q.CreateElement=function(ba){return q.Doc().createElement(ba);};q.InsertAt=function(ba,bb,bc){var bd;if(!(bc.parentNode===ba&&bb===(bd=bc.nextSibling,r.Equals(bd,null)?null:bd)))ba.insertBefore(bc,bb);};q.RemoveNode=function(ba,bb){if(bb.parentNode===ba)ba.removeChild(bb);};r.Equals=function(ba,bb){var bc,bd,be,bf;if(ba===bb)return true;else{bc=typeof ba;if(bc=="object"){if(ba===null||ba===void 0||bb===null||bb===void 0)return false;else if("Equals"in ba)return ba.Equals(bb);else if(ba instanceof window.Array&&bb instanceof window.Array)return r.arrayEquals(ba,bb);else if(ba instanceof window.Date&&bb instanceof window.Date)return r.dateEquals(ba,bb);else{bd=[true];for(var bg in ba)if(function(bh){bd[0]=!ba.hasOwnProperty(bh)||bb.hasOwnProperty(bh)&&r.Equals(ba[bh],bb[bh]);return!bd[0];}(bg))break;if(bd[0]){for(var bh in bb)if(function(bi){bd[0]=!bb.hasOwnProperty(bi)||ba.hasOwnProperty(bi);return!bd[0];}(bh))break;}return bd[0];}}else return bc=="function"&&("$Func"in ba?ba.$Func===bb.$Func&&ba.$Target===bb.$Target:"$Invokes"in ba&&"$Invokes"in bb&&r.arrayEquals(ba.$Invokes,bb.$Invokes));}};r.arrayEquals=function(ba,bb){var bc,bd;if(B.length(ba)===B.length(bb)){bc=true;bd=0;while(bc&&bd<B.length(ba)){!r.Equals(B.get(ba,bd),B.get(bb,bd))?bc=false:void 0;bd=bd+1;}return bc;}else return false;};r.dateEquals=function(ba,bb){return ba.getTime()===bb.getTime();};r.Hash=function(ba){var bb;bb=typeof ba;return bb=="function"?0:bb=="boolean"?ba?1:0:bb=="number"?ba:bb=="string"?r.hashString(ba):bb=="object"?ba==null?0:ba instanceof window.Array?r.hashArray(ba):r.hashObject(ba):0;};r.hashString=function(ba){var bb,bc,bd;if(ba===null)return 0;else{bb=5381;for(bc=0,bd=ba.length-1;bc<=bd;bc++)bb=r.hashMix(bb,ba.charCodeAt(bc)<<0);return bb;}};r.hashArray=function(ba){var bb,bc,bd;bb=-34948909;for(bc=0,bd=B.length(ba)-1;bc<=bd;bc++)bb=r.hashMix(bb,r.Hash(B.get(ba,bc)));return bb;};r.hashObject=function(ba){var bb,bc;if("GetHashCode"in ba)return ba.GetHashCode();else{bb=[0];for(var bd in ba)if(function(be){bb[0]=r.hashMix(r.hashMix(bb[0],r.hashString(be)),r.Hash(ba[be]));return false;}(bd))break;return bb[0];}};r.Compare=function(ba,bb){var bc,bd,be,bf,bg,bh;if(ba===bb)return 0;else{bd=typeof ba;switch(bd=="function"?1:bd=="boolean"?2:bd=="number"?2:bd=="string"?2:bd=="object"?3:0){case 0:return typeof bb=="undefined"?0:-1;break;case 1:return h.FailWith("Cannot compare function values.");break;case 2:return ba<bb?-1:1;break;case 3:if(ba===null)be=-1;else if(bb===null)be=1;else if("CompareTo"in ba)be=ba.CompareTo(bb);else if("CompareTo0"in ba)be=ba.CompareTo0(bb);else if(ba instanceof window.Array&&bb instanceof window.Array)be=r.compareArrays(ba,bb);else if(ba instanceof window.Date&&bb instanceof window.Date)be=r.compareDates(ba,bb);else{bf=[0];for(var bi in ba)if(function(bj){return!ba.hasOwnProperty(bj)?false:!bb.hasOwnProperty(bj)?(bf[0]=1,true):(bf[0]=r.Compare(ba[bj],bb[bj]),bf[0]!==0);}(bi))break;if(bf[0]===0){for(var bj in bb)if(function(bk){return!bb.hasOwnProperty(bk)?false:!ba.hasOwnProperty(bk)&&(bf[0]=-1,true);}(bj))break;}be=bf[0];}return be;break;}}};r.hashMix=function(ba,bb){return(ba<<5)+ba+bb;};r.compareArrays=function(ba,bb){var bc,bd;if(B.length(ba)<B.length(bb))return -1;else if(B.length(ba)>B.length(bb))return 1;else{bc=0;bd=0;while(bc===0&&bd<B.length(ba)){bc=r.Compare(B.get(ba,bd),B.get(bb,bd));bd=bd+1;}return bc;}};r.compareDates=function(ba,bb){return r.Compare(ba.getTime(),bb.getTime());};s.$cctor=_9.Cctor(function(){s.counter=0;s.$cctor=window.ignore;});t.Get=function(ba){return ba instanceof window.Array?t.ArrayEnumerator(ba):r.Equals(typeof ba,"string")?t.StringEnumerator(ba):ba.GetEnumerator();};t.ArrayEnumerator=function(ba){return new u.New(0,null,function(bb){var bc;bc=bb.s;return bc<B.length(ba)&&(bb.c=B.get(ba,bc),bb.s=bc+1,true);},void 0);};t.StringEnumerator=function(ba){return new u.New(0,null,function(bb){var bc;bc=bb.s;return bc<ba.length&&(bb.c=ba.charCodeAt(bc),bb.s=bc+1,true);},void 0);};u=t.T=_9.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},null,u);u.New=_9.Ctor(function(ba,bb,bc,bd){this.s=ba;this.c=bb;this.n=bc;this.d=bd;},u);v=f.AttrProxy=_9.Class({},null,v);v.Concat=function(ba){var bb;bb=C.ofSeqNonCopying(ba);return C.TreeReduce(N.EmptyAttr(),v.Append,bb);};v.Append=function(ba,bb){return N.AppendTree(ba,bb);};w.$cctor=_9.Cctor(function(){w.Doc=window.document;w.$cctor=window.ignore;});x.LinkElement=function(ba,bb){x.InsertDoc(ba,bb,null);};x.CreateRunState=function(ba,bb){return G.New(H.get_Empty(),x.CreateElemNode(ba,N.EmptyAttr(),bb));};x.PerformAnimatedUpdate=function(ba,bb){var bc;return I.get_UseAnimations()?(bc=null,R.Delay(function(){var bd,be,bf;bd=H.FindAll(bb);be=x.ComputeChangeAnim(ba,bd);bf=x.ComputeEnterAnim(ba,bd);return R.Bind(I.Play(I.Append(be,x.ComputeExitAnim(ba,bd))),function(){return R.Bind(x.SyncElemNodesNextFrame(ba),function(){return R.Bind(I.Play(bf),function(){ba.PreviousNodes=bd;return R.Return(null);});});});})):x.SyncElemNodesNextFrame(ba);};x.InsertDoc=function(ba,bb,bc){var bd;return bb!=null&&bb.$==1?x.InsertNode(ba,bb.$0.El,bc):bb!=null&&bb.$==2?(bd=bb.$0,(bd.Dirty=false,x.InsertDoc(ba,bd.Current,bc))):bb==null?bc:bb!=null&&bb.$==4?x.InsertNode(ba,bb.$0.Text,bc):bb!=null&&bb.$==5?x.InsertNode(ba,bb.$0,bc):bb!=null&&bb.$==6?B.foldBack(function(be,bf){return be.constructor===window.Object?x.InsertDoc(ba,be,bf):x.InsertNode(ba,be,bf);},bb.$0.Els,bc):x.InsertDoc(ba,bb.$0,x.InsertDoc(ba,bb.$1,bc));};x.CreateElemNode=function(ba,bb,bc){var bd;x.LinkElement(ba,bc);bd=N.Insert(ba,bb);return A.New(bd,bc,null,ba,k.Int(),_9.GetOptional(bd.OnAfterRender));};x.ComputeChangeAnim=function(ba,bb){var bc,bd;bc=(bd=function(be){return N.HasChangeAnim(be.Attr);},function(be){return H.Filter(bd,be);});return I.Concat(B.map(function(be){return N.GetChangeAnim(be.Attr);},H.ToArray(H.Intersect(bc(ba.PreviousNodes),bc(bb)))));};x.ComputeEnterAnim=function(ba,bb){return I.Concat(B.map(function(bc){return N.GetEnterAnim(bc.Attr);},H.ToArray(H.Except(ba.PreviousNodes,H.Filter(function(bc){return N.HasEnterAnim(bc.Attr);},bb)))));};x.ComputeExitAnim=function(ba,bb){return I.Concat(B.map(function(bc){return N.GetExitAnim(bc.Attr);},H.ToArray(H.Except(bb,H.Filter(function(bc){return N.HasExitAnim(bc.Attr);},ba.PreviousNodes)))));};x.SyncElemNodesNextFrame=function(ba){var bb;bb=function(bc){window.requestAnimationFrame(function(){x.SyncElemNode(ba.Top);bc();});};return R.FromContinuations(function(bc,bd,be){return bb.apply(null,[bc,bd,be]);});};x.InsertNode=function(ba,bb,bc){q.InsertAt(ba,bc,bb);return bb;};x.SyncElemNode=function(ba){x.SyncElement(ba);x.Sync(ba.Children);x.AfterRender(ba);};x.SyncElement=function(ba){function bb(bc){function bd(be){var bf,bg;return be!=null&&be.$==0?bd(be.$0)||bd(be.$1):be!=null&&be.$==2?(bf=be.$0,bf.Dirty||bd(bf.Current)):be!=null&&be.$==6&&(bg=be.$0,bg.Dirty||B.exists(bb,bg.Holes));}return bd(bc.Children);}N.Sync(ba.El,ba.Attr);bb(ba)?x.DoSyncElement(ba):void 0;};x.Sync=function(ba){var bb,bc;if(ba!=null&&ba.$==1)x.SyncElemNode(ba.$0);else if(ba!=null&&ba.$==2)x.Sync(ba.$0.Current);else if(ba==null);else if(ba!=null&&ba.$==5);else if(ba!=null&&ba.$==4){bb=ba.$0;bb.Dirty?(bb.Text.nodeValue=bb.Value,bb.Dirty=false):void 0;}else if(ba!=null&&ba.$==6){bc=ba.$0;B.iter(function(bd){x.SyncElemNode(bd);},bc.Holes);B.iter(function(bd){N.Sync(bd[0],bd[1]);},bc.Attrs);x.AfterRender(bc);}else{x.Sync(ba.$0);x.Sync(ba.$1);}};x.AfterRender=function(ba){var bb;bb=_9.GetOptional(ba.Render);bb!=null&&bb.$==1?(bb.$0(ba.El),_9.SetOptional(ba,"Render",null)):void 0;};x.DoSyncElement=function(ba){var bb,bc,bd;function be(bf,bg){var bh,bi;return bf!=null&&bf.$==1?bf.$0.El:bf!=null&&bf.$==2?(bh=bf.$0,bh.Dirty?(bh.Dirty=false,x.InsertDoc(bb,bh.Current,bg)):be(bh.Current,bg)):bf==null?bg:bf!=null&&bf.$==4?bf.$0.Text:bf!=null&&bf.$==5?bf.$0:bf!=null&&bf.$==6?(bi=bf.$0,(bi.Dirty?bi.Dirty=false:void 0,B.foldBack(function(bj,bk){return bj.constructor===window.Object?be(bj,bk):bj;},bi.Els,bg))):be(bf.$0,be(bf.$1,bg));}bb=ba.El;_6.Iter((bc=ba.El,function(bf){q.RemoveNode(bc,bf);}),_6.Except(_6.DocChildren(ba),_6.Children(ba.El,_9.GetOptional(ba.Delimiters))));be(ba.Children,(bd=_9.GetOptional(ba.Delimiters),bd!=null&&bd.$==1?bd.$0[1]:null));};y.StartProcessor=function(ba){var bb;function bc(){var bd;bd=null;return R.Delay(function(){return R.Bind(ba,function(){var be;be=bb[0];return r.Equals(be,1)?(bb[0]=0,R.Zero()):r.Equals(be,2)?(bb[0]=1,bc()):R.Zero();});});}bb=[0];return function(){var bd;bd=bb[0];r.Equals(bd,0)?(bb[0]=1,R.Start(bc(),null)):r.Equals(bd,1)?bb[0]=2:void 0;};};z.Sink=function(ba,bb){function bc(){i.WhenRun(bb(),ba,function(){R.scheduler().Fork(bc);});}R.scheduler().Fork(bc);};z.Const=function(ba){var bb;bb=i.New({$:0,$0:ba});return function(){return bb;};};z.Map2Unit=function(ba,bb){return z.CreateLazy(function(){return i.Map2Unit(ba(),bb());});};z.CreateLazy=function(ba){var bb;bb={c:null,o:ba};return function(){var bc,bd;bc=bb.c;return bc===null?(bc=bb.o(),bb.c=bc,(bd=bc.s,bd!=null&&bd.$==0)&&true?bb.o=null:i.WhenObsoleteRun(bc,function(){bb.c=null;}),bc):bc;};};z.Map=function(ba,bb){return z.CreateLazy(function(){return i.Map(ba,bb());});};A=f.DocElemNode=_9.Class({Equals:function(ba){return this.ElKey===ba.ElKey;},GetHashCode:function(){return this.ElKey;}},null,A);A.New=function(ba,bb,bc,bd,be,bf){var bg;return new A((bg={Attr:ba,Children:bb,El:bd,ElKey:be},(_9.SetOptional(bg,"Delimiters",bc),_9.SetOptional(bg,"Render",bf),bg)));};B.get=function(ba,bb){B.checkBounds(ba,bb);return ba[bb];};B.length=function(ba){return ba.dims===2?ba.length*ba.length:ba.length;};B.checkBounds=function(ba,bb){if(bb<0||bb>=ba.length)h.FailWith("Index was outside the bounds of the array.");};B.set=function(ba,bb,bc){B.checkBounds(ba,bb);ba[bb]=bc;};C.ofSeqNonCopying=function(ba){var bb,bc;if(ba instanceof window.Array)return ba;else if(ba instanceof M)return B.ofList(ba);else if(ba===null)return[];else{bb=[];bc=t.Get(ba);try{while(bc.MoveNext())bb.push(bc.Current());return bb;}finally{if("Dispose"in bc)bc.Dispose();}}};C.TreeReduce=function(ba,bb,bc){var bd;function be(bf,bg){var bh,bi;return bg<=0?ba:bg===1&&(bf>=0&&bf<bd&&true)?B.get(bc,bf):(bi=bg/2>>0,bb(be(bf,bi),be(bf+bi,bg-bi)));}bd=B.length(bc);return be(0,bd);};C.MapTreeReduce=function(ba,bb,bc,bd){var be;function bf(bg,bh){var bi,bj;return bh<=0?bb:bh===1&&(bg>=0&&bg<be&&true)?ba(B.get(bd,bg)):(bj=bh/2>>0,bc(bf(bg,bj),bf(bg+bj,bh-bj)));}be=B.length(bd);return bf(0,be);};D=f.Elt=_9.Class({},l,D);D.New=function(ba,bb,bc){var bd,be;bd=x.CreateElemNode(ba,bb,bc.docNode);be=O.Create(bc.updates);return new D.New$1({$:1,$0:bd},z.Map2Unit(N.Updates(bd.Attr),be.v),ba,be);};D.New$1=_9.Ctor(function(ba,bb,bc,bd){l.New.call(this,ba,bb);this.docNode$1=ba;this.updates$1=bb;this.elt=bc;this.rvUpdates=bd;},D);G.New=function(ba,bb){return{PreviousNodes:ba,Top:bb};};H.get_Empty=function(){return{$:0,$0:new Q.New$3()};};H.FindAll=function(ba){var bb;function bc(be){if(be!=null&&be.$==0){bc(be.$0);bc(be.$1);}else if(be!=null&&be.$==1)bd(be.$0);else if(be!=null&&be.$==2)bc(be.$0.Current);else if(be!=null&&be.$==6)B.iter(bd,be.$0.Holes);}function bd(be){bb.push(be);bc(be.Children);}bb=[];bc(ba);return{$:0,$0:new Q.New$2(bb)};};H.Filter=function(ba,bb){return{$:0,$0:X.Filter(ba,bb.$0)};};H.Intersect=function(ba,bb){return{$:0,$0:X.Intersect(ba.$0,bb.$0)};};H.ToArray=function(ba){return X.ToArray(ba.$0);};H.Except=function(ba,bb){return{$:0,$0:X.Except(ba.$0,bb.$0)};};I.get_UseAnimations=function(){return S.UseAnimations();};I.Play=function(ba){var bb;bb=null;return R.Delay(function(){return R.Bind(I.Run(function(){},S.Actions(ba)),function(){S.Finalize(ba);return R.Return(null);});});};I.Append=function(ba,bb){return{$:0,$0:T.Append(ba.$0,bb.$0)};};I.Concat=function(ba){return{$:0,$0:T.Concat(o.map(S.List,ba))};};I.Run=function(ba,bb){var bc,bd;bc=bb.Duration;return bc===0?R.Zero():(bd=function(be){function bf(bg,bh){var bi;bi=bh-bg;bb.Compute(bi);ba();return bi<=bc?void window.requestAnimationFrame(function(bj){bf(bg,bj);}):be();}window.requestAnimationFrame(function(bg){bf(bg,bg);});},R.FromContinuations(function(be,bf,bg){return bd.apply(null,[be,bf,bg]);}));};I.get_Empty=function(){return{$:0,$0:T.Empty()};};K.New=function(ba,bb,bc,bd){var be;be={DynElem:ba,DynFlags:bb,DynNodes:bc};_9.SetOptional(be,"OnAfterRender",bd);return be;};M=L.T=_9.Class({GetEnumerator:function(){return new u.New(this,null,function(ba){var bb;bb=ba.s;return bb.$==0?false:(ba.c=bb.$0,ba.s=bb.$1,true);},void 0);}},null,M);B.ofList=function(ba){var bb,bc;bc=[];bb=ba;while(!(bb.$==0)){bc.push(L.head(bb));bb=L.tail(bb);}return bc;};B.foldBack=function(ba,bb,bc){var bd,be,bf,bg,bh;bd=bc;bf=bb.length;for(bg=1,bh=bf;bg<=bh;bg++)bd=ba(bb[bf-bg],bd);return bd;};B.iter=function(ba,bb){var bc,bd;for(bc=0,bd=bb.length-1;bc<=bd;bc++)ba(bb[bc]);};B.map=function(ba,bb){var bc,bd,be;bc=new window.Array(bb.length);for(bd=0,be=bb.length-1;bd<=be;bd++)bc[bd]=ba(bb[bd]);return bc;};B.choose=function(ba,bb){var bc,bd,be,bf;bc=[];for(bd=0,be=bb.length-1;bd<=be;bd++){bf=ba(bb[bd]);bf==null?void 0:bc.push(bf.$0);}return bc;};B.filter=function(ba,bb){var bc,bd,be;bc=[];for(bd=0,be=bb.length-1;bd<=be;bd++)if(ba(bb[bd]))bc.push(bb[bd]);return bc;};B.create=function(ba,bb){var bc,bd,be;bc=new window.Array(ba);for(bd=0,be=ba-1;bd<=be;bd++)bc[bd]=bb;return bc;};B.exists=function(ba,bb){var bc,bd,be,bf;bc=false;bd=0;bf=B.length(bb);while(!bc&&bd<bf)if(ba(bb[bd]))bc=true;else bd=bd+1;return bc;};B.init=function(ba,bb){var bc,bd,be;ba<0?h.FailWith("Negative size given."):null;bc=new window.Array(ba);for(bd=0,be=ba-1;bd<=be;bd++)bc[bd]=bb(bd);return bc;};B.forall=function(ba,bb){var bc,bd,be,bf;bc=true;bd=0;bf=B.length(bb);while(bc&&bd<bf)if(ba(bb[bd]))bd=bd+1;else bc=false;return bc;};N.EmptyAttr=function(){U.$cctor();return U.EmptyAttr;};N.AppendTree=function(ba,bb){var bc;return ba===null?bb:bb===null?ba:(bc=new v({$:2,$0:ba,$1:bb}),(N.SetFlags(bc,N.Flags(ba)|N.Flags(bb)),bc));};N.Updates=function(ba){return C.MapTreeReduce(function(bb){return bb.NChanged();},z.Const(),z.Map2Unit,ba.DynNodes);};N.Insert=function(ba,bb){var bc,bd,be;function bf(bg){if(!(bg===null))if(bg!=null&&bg.$==1)bc.push(bg.$0);else if(bg!=null&&bg.$==2){bf(bg.$0);bf(bg.$1);}else if(bg!=null&&bg.$==3)bg.$0(ba);else if(bg!=null&&bg.$==4)bd.push(bg.$0);}bc=[];bd=[];bf(bb);be=bc.slice(0);return K.New(ba,N.Flags(bb),be,bd.length===0?null:{$:1,$0:function(bg){o.iter(function(bh){bh(bg);},bd);}});};N.HasChangeAnim=function(ba){var bb;bb=4;return(ba.DynFlags&bb)===bb;};N.GetChangeAnim=function(ba){return N.GetAnim(ba,function(bb,bc){return bb.NGetChangeAnim(bc);});};N.HasEnterAnim=function(ba){var bb;bb=1;return(ba.DynFlags&bb)===bb;};N.GetEnterAnim=function(ba){return N.GetAnim(ba,function(bb,bc){return bb.NGetEnterAnim(bc);});};N.HasExitAnim=function(ba){var bb;bb=2;return(ba.DynFlags&bb)===bb;};N.GetExitAnim=function(ba){return N.GetAnim(ba,function(bb,bc){return bb.NGetExitAnim(bc);});};N.Static=function(ba){return new v({$:3,$0:ba});};N.Dynamic=function(ba,bb){return new v({$:1,$0:new Y.New(ba,bb)});};N.SetFlags=function(ba,bb){ba.flags=bb;};N.Flags=function(ba){return ba!==null&&ba.hasOwnProperty("flags")?ba.flags:0;};N.GetAnim=function(ba,bb){return I.Concat(B.map(function(bc){return bb(bc,ba.DynElem);},ba.DynNodes));};N.Sync=function(ba,bb){B.iter(function(bc){bc.NSync(ba);},bb.DynNodes);};O=f.Updates=_9.Class({},null,O);O.Create=function(ba){var bb;bb=null;bb=O.New(ba,null,function(){var bc;bc=bb.s;return bc===null?(bc=i.Copy(bb.c()),bb.s=bc,i.WhenObsoleteRun(bc,function(){bb.s=null;}),bc):bc;});return bb;};O.New=function(ba,bb,bc){return new O({c:ba,s:bb,v:bc});};Q=P.HashSet=_9.Class({add:function(ba){var bb,bc;bb=this.hash(ba);bc=this.data[bb];return bc==null?(this.data[bb]=[ba],this.count=this.count+1,true):this.arrContains(ba,bc)?false:(bc.push(ba),this.count=this.count+1,true);},IntersectWith:function(ba){var bb,bc,bd,be,bf;bb=new Q.New$4(ba,this.equals,this.hash);bc=_3.concat(this.data);for(bd=0,be=bc.length-1;bd<=be;bd++){bf=bc[bd];!bb.Contains(bf)?this.Remove(bf):void 0;}},get_Count:function(){return this.count;},CopyTo:function(ba){var bb,bc,bd,be;bb=0;bc=_3.concat(this.data);for(bd=0,be=bc.length-1;bd<=be;bd++)B.set(ba,bd,bc[bd]);},ExceptWith:function(ba){var bb;bb=t.Get(ba);try{while(bb.MoveNext())this.Remove(bb.Current());}finally{if("Dispose"in bb)bb.Dispose();}},arrContains:function(ba,bb){var bc,bd,be,bf;bc=true;bd=0;bf=bb.length;while(bc&&bd<bf)if(this.equals.apply(null,[bb[bd],ba]))bc=false;else bd=bd+1;return!bc;},Contains:function(ba){var bb;bb=this.data[this.hash(ba)];return bb==null?false:this.arrContains(ba,bb);},Remove:function(ba){var bb;bb=this.data[this.hash(ba)];return bb==null?false:this.arrRemove(ba,bb)&&(this.count=this.count-1,true);},arrRemove:function(ba,bb){var bc,bd,be,bf;bc=true;bd=0;bf=bb.length;while(bc&&bd<bf)if(this.equals.apply(null,[bb[bd],ba])){bb.splice.apply(bb,[bd,1]);bc=false;}else bd=bd+1;return!bc;},GetEnumerator:function(){return t.Get(_3.concat(this.data));}},null,Q);Q.New$3=_9.Ctor(function(){Q.New$4.call(this,[],r.Equals,r.Hash);},Q);Q.New$2=_9.Ctor(function(ba){Q.New$4.call(this,ba,r.Equals,r.Hash);},Q);Q.New$4=_9.Ctor(function(ba,bb,bc){var bd;this.equals=bb;this.hash=bc;this.data=[];this.count=0;bd=t.Get(ba);try{while(bd.MoveNext())this.add(bd.Current());}finally{if("Dispose"in bd)bd.Dispose();}},Q);R.Delay=function(ba){return function(bb){try{(ba(null))(bb);}catch(bc){bb.k({$:1,$0:bc});}};};R.Bind=function(ba,bb){return R.checkCancel(function(bc){ba({k:function(bd){var be;if(bd.$==0){be=bd.$0;R.scheduler().Fork(function(){try{(bb(be))(bc);}catch(bf){bc.k({$:1,$0:bf});}});}else R.scheduler().Fork(function(){bc.k(bd);});},ct:bc.ct});});};R.Zero=function(){V.$cctor();return V.Zero;};R.Start=function(ba,bb){var bc,bd;bc=(bd=(R.defCTS())[0],bb==null?bd:bb.$0);R.scheduler().Fork(function(){if(!bc.c)ba({k:function(be){if(be.$==1)R.UncaughtAsyncError(be.$0);},ct:bc});});};R.Return=function(ba){return function(bb){bb.k({$:0,$0:ba});};};R.checkCancel=function(ba){return function(bb){if(bb.ct.c)R.cancel(bb);else ba(bb);};};R.defCTS=function(){V.$cctor();return V.defCTS;};R.UncaughtAsyncError=function(ba){_.log("WebSharper: Uncaught asynchronous exception",ba);};R.FromContinuations=function(ba){return function(bb){var bc,bd;bc=[false];bd=function(be){if(bc[0])h.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bc[0]=true;R.scheduler().Fork(be);}};ba(function(be){bd(function(){bb.k({$:0,$0:be});});},function(be){bd(function(){bb.k({$:1,$0:be});});},function(be){bd(function(){bb.k({$:2,$0:be});});});};};R.cancel=function(ba){ba.k({$:2,$0:new _2.New(ba.ct)});};R.scheduler=function(){V.$cctor();return V.scheduler;};S.UseAnimations=function(){W.$cctor();return W.UseAnimations;};S.Actions=function(ba){return S.ConcatActions(B.choose(function(bb){return bb.$==1?{$:1,$0:bb.$0}:null;},T.ToArray(ba.$0)));};S.Finalize=function(ba){B.iter(function(bb){if(bb.$==0)bb.$0();},T.ToArray(ba.$0));};S.List=function(ba){return ba.$0;};S.ConcatActions=function(ba){var bb,bc,bd,be;bb=C.ofSeqNonCopying(ba);bc=B.length(bb);return bc===0?S.Const():bc===1?B.get(bb,0):(bd=o.max(o.map(function(bf){return bf.Duration;},bb)),(be=B.map(function(bf){return S.Prolong(bd,bf);},bb),S.Def(bd,function(bf){B.iter(function(bg){bg.Compute(bf);},be);})));};S.Const=function(ba){return S.Def(0,function(){return ba;});};S.Prolong=function(ba,bb){var bc,bd,be;bc=bb.Compute;bd=bb.Duration;be=_5.Create(function(){return bb.Compute(bb.Duration);});return{Compute:function(bf){return bf>=bd?be.f():bc(bf);},Duration:ba};};S.Def=function(ba,bb){return{Compute:bb,Duration:ba};};T.Append=function(ba,bb){return ba.$==0?bb:bb.$==0?ba:{$:2,$0:ba,$1:bb};};T.Concat=function(ba){var bb;bb=C.ofSeqNonCopying(ba);return C.TreeReduce(T.Empty(),T.Append,bb);};T.ToArray=function(ba){var bb;function bc(bd){if(bd.$==1)bb.push(bd.$0);else if(bd.$==2){bc(bd.$0);bc(bd.$1);}else if(bd.$==3)B.iter(function(be){bb.push(be);},bd.$0);}bb=[];bc(ba);return bb.slice(0);};T.Empty=function(){_4.$cctor();return _4.Empty;};L.head=function(ba){return ba.$==1?ba.$0:L.listEmpty();};L.tail=function(ba){return ba.$==1?ba.$1:L.listEmpty();};L.listEmpty=function(){return h.FailWith("The input list was empty.");};U.$cctor=_9.Cctor(function(){U.EmptyAttr=null;U.$cctor=window.ignore;});V.$cctor=_9.Cctor(function(){V.noneCT={c:false,r:[]};V.scheduler=new Z.New();V.defCTS=[new _0.New()];V.Zero=R.Return();V.GetCT=function(ba){ba.k({$:0,$0:ba.ct});};V.$cctor=window.ignore;});W.$cctor=_9.Cctor(function(){W.CubicInOut=_1.Custom(function(ba){var bb;bb=ba*ba;return 3*bb-2*(bb*ba);});W.UseAnimations=true;W.$cctor=window.ignore;});X.Filter=function(ba,bb){return new Q.New$2(B.filter(ba,X.ToArray(bb)));};X.Intersect=function(ba,bb){var bc;bc=new Q.New$2(X.ToArray(ba));bc.IntersectWith(X.ToArray(bb));return bc;};X.ToArray=function(ba){var bb;bb=B.create(ba.get_Count(),void 0);ba.CopyTo(bb);return bb;};X.Except=function(ba,bb){var bc;bc=new Q.New$2(X.ToArray(bb));bc.ExceptWith(X.ToArray(ba));return bc;};Y=f.DynamicAttrNode=_9.Class({NChanged:function(){return this.updates;},NGetChangeAnim:function(ba){return I.get_Empty();},NGetEnterAnim:function(ba){return I.get_Empty();},NGetExitAnim:function(ba){return I.get_Empty();},NSync:function(ba){if(this.dirty){(this.push(ba))(this.value);this.dirty=false;}}},null,Y);Y.New=_9.Ctor(function(ba,bb){var bc;bc=this;this.push=bb;this.value=void 0;this.dirty=false;this.updates=z.Map(function(bd){bc.value=bd;bc.dirty=true;},ba);},Y);Z=R.Scheduler=_9.Class({Fork:function(ba){var bb;bb=this;this.robin.push(ba);this.idle?(this.idle=false,window.setTimeout(function(){bb.tick();},0)):void 0;},tick:function(){var ba,bb,bc;bb=this;bc=$.now();ba=true;while(ba)if(this.robin.length===0){this.idle=true;ba=false;}else{(this.robin.shift())();$.now()-bc>40?(window.setTimeout(function(){bb.tick();},0),ba=false):void 0;}}},null,Z);Z.New=_9.Ctor(function(){this.idle=true;this.robin=[];},Z);_0=d.CancellationTokenSource=_9.Class({},null,_0);_0.New=_9.Ctor(function(){this.c=false;this.pending=null;this.r=[];this.init=1;},_0);_1=f.Easing=_9.Class({},null,_1);_1.Custom=function(ba){return new _1.New(ba);};_1.New=_9.Ctor(function(ba){this.transformTime=ba;},_1);_2=d.OperationCanceledException=_9.Class({},null,_2);_2.New=_9.Ctor(function(ba){_2.New$1.call(this,"The operation was canceled.",null,ba);},_2);_2.New$1=_9.Ctor(function(ba,bb,bc){this.message=ba;this.inner=bb;this.ct=bc;},_2);_3.concat=function(ba){var bb,bc;bb=[];for(var bd in ba)bb.push.apply(bb,ba[bd]);return bb;};_4.$cctor=_9.Cctor(function(){_4.Empty={$:0};_4.$cctor=window.ignore;});_5.Create=function(ba){return{c:false,v:ba,f:_5.forceLazy};};_5.forceLazy=function(){var ba;ba=this.v();this.c=true;this.v=ba;this.f=_5.cachedLazy;return ba;};_5.cachedLazy=function(){return this.v;};_6.DocChildren=function(ba){var bb;function bc(bd){if(bd!=null&&bd.$==2)bc(bd.$0.Current);else if(bd!=null&&bd.$==1)bb.push(bd.$0.El);else if(bd==null);else if(bd!=null&&bd.$==5)bb.push(bd.$0);else if(bd!=null&&bd.$==4)bb.push(bd.$0.Text);else if(bd!=null&&bd.$==6)B.iter(function(be){if(be.constructor===window.Object)bc(be);else bb.push(be);},bd.$0.Els);else{bc(bd.$0);bc(bd.$1);}}bb=[];bc(ba.Children);return{$:0,$0:C.ofSeqNonCopying(bb)};};_6.Children=function(ba,bb){var bc,bd,be;if(bb!=null&&bb.$==1){be=[];bc=bb.$0[0].nextSibling;while(bc!==bb.$0[1]){be.push(bc);bc=bc.nextSibling;}return{$:0,$0:be};}else return{$:0,$0:B.init(ba.childNodes.length,(bd=ba.childNodes,function(bf){return bd[bf];}))};};_6.Except=function(ba,bb){var bc;bc=ba.$0;return{$:0,$0:B.filter(function(bd){return B.forall(function(be){return!(bd===be);},bc);},bb.$0)};};_6.Iter=function(ba,bb){B.iter(ba,bb.$0);};_7.Clear=function(ba){ba.splice(0,B.length(ba));};_9.OnLoad(function(){b.Main();});}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
