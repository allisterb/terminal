function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){window.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF;a=window;b=a.WebSharperTerminalSample=a.WebSharperTerminalSample||{};c=b.Client=b.Client||{};d=a.StartupCode$WebSharper_JQueryTerminal_Tests$Client=a.StartupCode$WebSharper_JQueryTerminal_Tests$Client||{};e=a.WebSharper=a.WebSharper||{};f=e.Operators=e.Operators||{};g=e.UI=e.UI||{};h=g.Var=g.Var||{};i=e.Unchecked=e.Unchecked||{};j=a.System=a.System||{};k=j.Guid=j.Guid||{};l=e.Obj=e.Obj||{};m=e.List=e.List||{};n=m.T=m.T||{};o=e.Arrays=e.Arrays||{};p=g.AttrProxy=g.AttrProxy||{};q=e.JavaScript=e.JavaScript||{};r=q.JSModule=q.JSModule||{};s=g.Templating=g.Templating||{};t=s.Runtime=s.Runtime||{};u=t.Server=t.Server||{};v=u.Handler=u.Handler||{};w=u.TemplateInstance=u.TemplateInstance||{};x=a.WebSharper$JQueryTerminal$Tests_Templates=a.WebSharper$JQueryTerminal$Tests_Templates||{};y=g.ConcreteVar=g.ConcreteVar||{};z=g.Snap=g.Snap||{};A=g.AttrModule=g.AttrModule||{};B=g.Array=g.Array||{};C=e.Collections=e.Collections||{};D=C.Dictionary=C.Dictionary||{};E=C.HashSet=C.HashSet||{};F=t.Client=t.Client||{};G=e.Seq=e.Seq||{};H=q.Pervasives=q.Pervasives||{};I=g.Doc=g.Doc||{};J=g.Abbrev=g.Abbrev||{};K=J.Fresh=J.Fresh||{};L=g.Attrs=g.Attrs||{};M=a.Object;N=C.DictionaryUtil=C.DictionaryUtil||{};O=e.Enumerator=e.Enumerator||{};P=O.T=O.T||{};Q=a.EventTarget;R=a.Node;S=g.DomUtility=g.DomUtility||{};T=g.View=g.View||{};U=e.Numeric=e.Numeric||{};V=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};W=g.Docs=g.Docs||{};X=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};Y=J.Mailbox=J.Mailbox||{};Z=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};_0=g.DocElemNode=g.DocElemNode||{};_1=a.CharacterData;_2=e.Slice=e.Slice||{};_3=e.Strings=e.Strings||{};_4=g.Client=g.Client||{};_5=_4.Docs=_4.Docs||{};_6=_5.RunState=_5.RunState||{};_7=_5.NodeSet=_5.NodeSet||{};_8=g.An=g.An||{};_9=C.HashSetUtil=C.HashSetUtil||{};_=_4.Attrs=_4.Attrs||{};$=_.Dyn=_.Dyn||{};ba=a.StartupCode$WebSharper_UI$Doc_Client=a.StartupCode$WebSharper_UI$Doc_Client||{};bb=g.CheckedInput=g.CheckedInput||{};bc=g.Elt=g.Elt||{};bd=e.Concurrency=e.Concurrency||{};be=g.Anims=g.Anims||{};bf=g.AppendList=g.AppendList||{};bg=_4.Settings=_4.Settings||{};bh=g.String=g.String||{};bi=g.Updates=g.Updates||{};bj=bd.AsyncBody=bd.AsyncBody||{};bk=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bl=bd.CT=bd.CT||{};bm=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bn=J.HashSet=J.HashSet||{};bo=e.Char=e.Char||{};bp=g.DynamicAttrNode=g.DynamicAttrNode||{};bq=bd.Scheduler=bd.Scheduler||{};br=e.CancellationTokenSource=e.CancellationTokenSource||{};bs=g.Easing=g.Easing||{};bt=e.OperationCanceledException=e.OperationCanceledException||{};bu=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bv=e.Lazy=e.Lazy||{};bw=_5.DomNodes=_5.DomNodes||{};bx=e.LazyExtensionsProxy=e.LazyExtensionsProxy||{};by=bx.LazyRecord=bx.LazyRecord||{};bz=e.Queue=e.Queue||{};bA=a.Math;bB=a.IntelliFactory;bC=bB&&bB.Runtime;bD=a.jQuery;bE=a.console;bF=a.Date;c.Main=function(){d.$cctor();return d.Main;};c.Help=function(bG){return bG==="help"?{$:1,$0:null}:null;};c.Template=function(bG){return bG==="template"?{$:1,$0:null}:null;};c.set_numOfTemplates=function(bG){d.$cctor();d.numOfTemplates=bG;};c.numOfTemplates=function(){d.$cctor();return d.numOfTemplates;};c.Clear=function(bG){return bG==="clear"?{$:1,$0:null}:null;};c.Switch=function(bG){return bG==="switch"?{$:1,$0:null}:null;};c.i2=function(bG,bH){if(bH==="asd")bG.echo("kek");else if(bH==="switch")bG.pop();else bG.echo("...");};c.intOpt=function(){d.$cctor();return d.intOpt;};c.Blank=function(bG){return bG===""?{$:1,$0:null}:null;};c.interpreter=function(){d.$cctor();return d.interpreter;};c.Opt=function(){d.$cctor();return d.Opt;};d.$cctor=function(){var bG,bH,bI,bJ;d.$cctor=a.ignore;d.intOpt=(bG={},bG.name="No2",bG.prompt="+ ",bG);d.numOfTemplates=0;d.interpreter=function(bK){var bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0;function b1(b2){a.alert(bO.Get());}return(bL=c.Help(bK),bL!=null&&bL.$==1)?this.echo("Commands: help, clear, template"):(bM=c.Template(bK),bM!=null&&bM.$==1)?(c.set_numOfTemplates(c.numOfTemplates()+1),bN="template"+a.String(c.numOfTemplates()),bO=h.Create$1(""),bP=(bQ=(bR=(bS=(bT=k.NewGuid(),a.String(bT)),(bU=new n({$:1,$0:{$:7,$0:"projname",$1:bO},$1:n.Empty}),[[null],bS,new n({$:1,$0:{$:3,$0:"eventprop",$1:p.Concat(m.ofArray([A.Handler("keypress",function(){return function(b2){return b2.stopPropagation();};}),A.Handler("keydown",function(){return function(b2){return b2.stopPropagation();};}),A.Handler("keyup",function(){return function(b2){return b2.stopPropagation();};}),A.Handler("input",function(){return function(b2){return b2.stopPropagation();};})]))},$1:bU})])),[bR[0],bR[1],new n({$:1,$0:(bV=bR[0],{$:5,$0:"download",$1:true,$2:function(b2){return function(b3){return b1({Vars:bV[0],Target:b2,Event:b3});};}}),$1:bR[2]})]),(bW=bQ[0],(bX=v.CompleteHoles(bQ[1],bQ[2],[["projname",0]]),(bW[0]=new w.New(bX[1],x.form(bX[0])),bW[0])))).get_Doc(),this.echo("<div id=\""+bN+"\"></div>",{raw:true}),I.RunById(bN,bP)):(bY=c.Clear(bK),bY!=null&&bY.$==1)?this.clear():(bZ=c.Switch(bK),bZ!=null&&bZ.$==1)?this.push(function(b2){return c.i2(this,b2);},c.intOpt()):(b0=c.Blank(bK),b0!=null&&b0.$==1)?this.echo(""):this.echo("Unknown command",{raw:true});};d.Opt=(bH={},bH.name="Terminal1",bH.prompt="> ",bH.greetings="Welcome to the Terminal Test Page! See 'help' for the list of commands.",bH.onInit=function(bK){bK.enable();return bK.echo("Hey Dood, it's workin'!");},bH);d.Main=(bI=c.interpreter(),(bJ=c.Opt(),void a.$("#body").terminal(bI,bJ)));};f.FailWith=function(bG){throw a.Error(bG);};f.KeyValue=function(bG){return[bG.K,bG.V];};h.Create$1=function(bG){return new y.New(false,z.New({$:2,$0:bG,$1:[]}),bG);};i.Equals=function(bG,bH){var bI,bJ,bK,bL;if(bG===bH)return true;else{bI=typeof bG;if(bI=="object"){if(bG===null||bG===void 0||bH===null||bH===void 0)return false;else if("Equals"in bG)return bG.Equals(bH);else if(bG instanceof a.Array&&bH instanceof a.Array)return i.arrayEquals(bG,bH);else if(bG instanceof a.Date&&bH instanceof a.Date)return i.dateEquals(bG,bH);else{bJ=[true];for(var bM in bG)if(function(bN){bJ[0]=!bG.hasOwnProperty(bN)||bH.hasOwnProperty(bN)&&i.Equals(bG[bN],bH[bN]);return!bJ[0];}(bM))break;if(bJ[0]){for(var bN in bH)if(function(bO){bJ[0]=!bH.hasOwnProperty(bO)||bG.hasOwnProperty(bO);return!bJ[0];}(bN))break;}return bJ[0];}}else return bI=="function"&&("$Func"in bG?bG.$Func===bH.$Func&&bG.$Target===bH.$Target:"$Invokes"in bG&&"$Invokes"in bH&&i.arrayEquals(bG.$Invokes,bH.$Invokes));}};i.Hash=function(bG){var bH;bH=typeof bG;return bH=="function"?0:bH=="boolean"?bG?1:0:bH=="number"?bG:bH=="string"?i.hashString(bG):bH=="object"?bG==null?0:bG instanceof a.Array?i.hashArray(bG):i.hashObject(bG):0;};i.arrayEquals=function(bG,bH){var bI,bJ;if(o.length(bG)===o.length(bH)){bI=true;bJ=0;while(bI&&bJ<o.length(bG)){!i.Equals(o.get(bG,bJ),o.get(bH,bJ))?bI=false:void 0;bJ=bJ+1;}return bI;}else return false;};i.dateEquals=function(bG,bH){return bG.getTime()===bH.getTime();};i.hashString=function(bG){var bH,bI,bJ;if(bG===null)return 0;else{bH=5381;for(bI=0,bJ=bG.length-1;bI<=bJ;bI++)bH=i.hashMix(bH,bG[bI].charCodeAt());return bH;}};i.hashArray=function(bG){var bH,bI,bJ;bH=-34948909;for(bI=0,bJ=o.length(bG)-1;bI<=bJ;bI++)bH=i.hashMix(bH,i.Hash(o.get(bG,bI)));return bH;};i.hashObject=function(bG){var bH,bI;if("GetHashCode"in bG)return bG.GetHashCode();else{bH=[0];for(var bJ in bG)if(function(bK){bH[0]=i.hashMix(i.hashMix(bH[0],i.hashString(bK)),i.Hash(bG[bK]));return false;}(bJ))break;return bH[0];}};i.hashMix=function(bG,bH){return(bG<<5)+bG+bH;};i.Compare=function(bG,bH){var bI,bJ,bK,bL,bM,bN;if(bG===bH)return 0;else{bJ=typeof bG;switch(bJ=="function"?1:bJ=="boolean"?2:bJ=="number"?2:bJ=="string"?2:bJ=="object"?3:0){case 0:return typeof bH=="undefined"?0:-1;break;case 1:return f.FailWith("Cannot compare function values.");break;case 2:return bG<bH?-1:1;break;case 3:if(bG===null)bK=-1;else if(bH===null)bK=1;else if("CompareTo"in bG)bK=bG.CompareTo(bH);else if("CompareTo0"in bG)bK=bG.CompareTo0(bH);else if(bG instanceof a.Array&&bH instanceof a.Array)bK=i.compareArrays(bG,bH);else if(bG instanceof a.Date&&bH instanceof a.Date)bK=i.compareDates(bG,bH);else{bL=[0];for(var bO in bG)if(function(bP){return!bG.hasOwnProperty(bP)?false:!bH.hasOwnProperty(bP)?(bL[0]=1,true):(bL[0]=i.Compare(bG[bP],bH[bP]),bL[0]!==0);}(bO))break;if(bL[0]===0){for(var bP in bH)if(function(bQ){return!bH.hasOwnProperty(bQ)?false:!bG.hasOwnProperty(bQ)&&(bL[0]=-1,true);}(bP))break;}bK=bL[0];}return bK;break;}}};i.compareArrays=function(bG,bH){var bI,bJ;if(o.length(bG)<o.length(bH))return -1;else if(o.length(bG)>o.length(bH))return 1;else{bI=0;bJ=0;while(bI===0&&bJ<o.length(bG)){bI=i.Compare(o.get(bG,bJ),o.get(bH,bJ));bJ=bJ+1;}return bI;}};i.compareDates=function(bG,bH){return i.Compare(bG.getTime(),bH.getTime());};k.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bG){var bH,bI;bH=bA.random()*16|0;bI=bG=="x"?bH:bH&3|8;return bI.toString(16);});};l=e.Obj=bC.Class({Equals:function(bG){return this===bG;},GetHashCode:function(){return -1;}},null,l);n=m.T=bC.Class({GetEnumerator:function(){return new P.New(this,null,function(bG){var bH;bH=bG.s;return bH.$==0?false:(bG.c=bH.$0,bG.s=bH.$1,true);},void 0);},GetEnumerator0:function(){return O.Get(this);}},null,n);n.Empty=new n({$:0});o.get=function(bG,bH){o.checkBounds(bG,bH);return bG[bH];};o.length=function(bG){return bG.dims===2?bG.length*bG.length:bG.length;};o.checkBounds=function(bG,bH){if(bH<0||bH>=bG.length)f.FailWith("Index was outside the bounds of the array.");};o.set=function(bG,bH,bI){o.checkBounds(bG,bH);bG[bH]=bI;};m.ofArray=function(bG){var bH,bI,bJ;bH=n.Empty;for(bI=o.length(bG)-1,bJ=0;bI>=bJ;bI--)bH=new n({$:1,$0:o.get(bG,bI),$1:bH});return bH;};m.head=function(bG){return bG.$==1?bG.$0:m.listEmpty();};m.tail=function(bG){return bG.$==1?bG.$1:m.listEmpty();};m.listEmpty=function(){return f.FailWith("The input list was empty.");};p=g.AttrProxy=bC.Class({},null,p);p.Concat=function(bG){var bH;bH=B.ofSeqNonCopying(bG);return B.TreeReduce(L.EmptyAttr(),p.Append,bH);};p.Append=function(bG,bH){return L.AppendTree(bG,bH);};p.Handler=function(bG,bH){return p.HandlerImpl(bG,bH);};p.Create=function(bG,bH){return L.Static(function(bI){S.SetAttr(bI,bG,bH);});};p.HandlerImpl=function(bG,bH){return L.Static(function(bI){bI.addEventListener(bG,function(bJ){return(bH(bI))(bJ);},false);});};r.GetFieldValues=function(bG){var bH,bI;bH=[];for(var bJ in bG)bH.push(bG[bJ]);return bH;};h=g.Var=bC.Class({},l,h);h.New=bC.Ctor(function(){},h);v.CompleteHoles=function(bG,bH,bI){var bK,bL,bM,bN,bO,bP;function bJ(bQ,bR){var bS,bT,bU,bV;return bL.Contains(bQ)?null:(bS=bR===0?(bT=h.Create$1(""),[{$:7,$0:bQ,$1:bT},bT]):bR===1?(bU=h.Create$1(0),[{$:12,$0:bQ,$1:bU},bU]):bR===2?(bV=h.Create$1(false),[{$:8,$0:bQ,$1:bV},bV]):f.FailWith("Invalid value type"),(bK.set_Item(bQ,bS[1]),{$:1,$0:bS[0]}));}bK=new D.New$5();bL=new E.New$3();bM=O.Get(bH);try{while(bM.MoveNext()){bN=bM.Current();(bN.$==7?(bO=[bN.$0,F.Box(bN.$1)],true):bN.$==10?(bO=[bN.$0,F.Box(bN.$1)],true):bN.$==9?(bO=[bN.$0,F.Box(bN.$1)],true):bN.$==12?(bO=[bN.$0,F.Box(bN.$1)],true):bN.$==11?(bO=[bN.$0,F.Box(bN.$1)],true):bN.$==8&&(bO=[bN.$0,F.Box(bN.$1)],true))?(bP=bO[0],bL.Add(bP),bK.set_Item(bP,bO[1])):void 0;}}finally{if("Dispose"in bM)bM.Dispose();}return[G.append(bH,o.choose(function(bQ){return bJ(bQ[0],bQ[1]);},bI)),{$:0,$0:bK}];};w=u.TemplateInstance=bC.Class({get_Doc:function(){return this.doc;}},l,w);w.New=bC.Ctor(function(bG,bH){this.doc=bH;this.allVars=bG.$==0?bG.$0:f.FailWith("Should not happen");},w);x.form=function(bG){return bG?I.GetOrLoadTemplate("template",{$:1,$0:"form"},function(){return bD.parseHTML("<div class=\"form-class\">\n    <input type=\"text\" id=\"sample1\" placeholder=\"MyProject\" ws-var=\"ProjName\" ws-attr=\"EventProp\">\n    <div class=\"mdl-selectfield mdl-js-selectfield is-dirty\" id=\"plainSelect\" data-upgraded=\",MaterialSelectfield\">\n                            <select id=\"myselect\" name=\"myselect\" class=\"mdl-selectfield__select\" style=\"opacity: 0; z-index: -1;\">\n                                <option value=\"clientserverfsharp\">Client-Server Application F#\n                                </option><option value=\"spafsharp\">Single Page Application F#\n                                </option><option value=\"extensionfsharp\">Extension F#\n                                </option><option value=\"libraryfsharp\">Library F#\n                                </option><option value=\"offlinefsharp\">HTML Application F#\n                                </option><option value=\"owinfsharp\">Owin F#\n                                </option><option value=\"clientserverfsharp\">Client-Server Application C#\n                                </option><option value=\"spacsharp\">Single Page Application C#\n                                </option><option value=\"librarycsharp\">Library C#\n                                </option><option value=\"offlinecsharp\">HTML Application C#\n                            </option></select>\n                            <label class=\"mdl-selectfield__label\" for=\"myselect\">Available templates</label>\n                        <div class=\"mdl-selectfield__box\" tabindex=\"1\"><span tabindex=\"-1\" class=\"mdl-selectfield__arrow-down__container\"><span class=\"mdl-selectfield__arrow-down\" tabindex=\"-1\"></span></span><span class=\"mdl-selectfield__box-value\" tabindex=\"-1\">Client-Server Application F#\n                                </span></div><div class=\"mdl-selectfield__list-option-box\" tabindex=\"-1\"><ul tabindex=\"-1\"><li class=\"is-selected\" data-value=\"0\" tabindex=\"-1\">Client-Server Application F#\n                                </li><li class=\"\" data-value=\"1\" tabindex=\"-1\">Single Page Application F#\n                                </li><li class=\"\" data-value=\"2\" tabindex=\"-1\">Extension F#\n                                </li><li class=\"\" data-value=\"3\" tabindex=\"-1\">Library F#\n                                </li><li class=\"\" data-value=\"4\" tabindex=\"-1\">HTML Application F#\n                                </li><li class=\"\" data-value=\"5\" tabindex=\"-1\">Owin F#\n                                </li><li class=\"\" data-value=\"6\" tabindex=\"-1\">Client-Server Application C#\n                                </li><li class=\"\" data-value=\"7\" tabindex=\"-1\">Single Page Application C#\n                                </li><li class=\"\" data-value=\"8\" tabindex=\"-1\">Library C#\n                                </li><li class=\"\" data-value=\"9\" tabindex=\"-1\">HTML Application C#\n                            </li></ul></div></div>\n\n    <div class=\"mdl-selectfield mdl-js-selectfield is-dirty\" id=\"plainIdeSelect\" data-upgraded=\",MaterialSelectfield\">\n                            <select id=\"myselect\" name=\"myselect\" class=\"mdl-selectfield__select\" style=\"opacity: 0; z-index: -1;\">\n                                <option value=\"vs2017\">Visual Studio 2017\n                            </option></select>\n                            <label class=\"mdl-selectfield__label\" for=\"myselect\">Your IDE</label>\n                        <div class=\"mdl-selectfield__box\" tabindex=\"1\"><span tabindex=\"-1\" class=\"mdl-selectfield__arrow-down__container\"><span class=\"mdl-selectfield__arrow-down\" tabindex=\"-1\"></span></span><span class=\"mdl-selectfield__box-value\" tabindex=\"-1\">Visual Studio 2017\n                            </span></div><div class=\"mdl-selectfield__list-option-box\" tabindex=\"-1\"><ul tabindex=\"-1\"><li class=\"is-selected\" data-value=\"0\" tabindex=\"-1\">Visual Studio 2017\n                            </li></ul></div></div>\n\n    <div class=\"social-button-group\">\n                            <button class=\"mdl-button mdl-js-button mdl-button--raised mdl-button--colored dl-button\" data-upgraded=\",MaterialButton\" ws-onclick=\"Download\">\n                                Download\n                            </button>\n                        </div>\n</div>");},bG):I.PrepareTemplate("template",{$:1,$0:"form"},function(){return bD.parseHTML("<div class=\"form-class\">\n    <input type=\"text\" id=\"sample1\" placeholder=\"MyProject\" ws-var=\"ProjName\" ws-attr=\"EventProp\">\n    <div class=\"mdl-selectfield mdl-js-selectfield is-dirty\" id=\"plainSelect\" data-upgraded=\",MaterialSelectfield\">\n                            <select id=\"myselect\" name=\"myselect\" class=\"mdl-selectfield__select\" style=\"opacity: 0; z-index: -1;\">\n                                <option value=\"clientserverfsharp\">Client-Server Application F#\n                                </option><option value=\"spafsharp\">Single Page Application F#\n                                </option><option value=\"extensionfsharp\">Extension F#\n                                </option><option value=\"libraryfsharp\">Library F#\n                                </option><option value=\"offlinefsharp\">HTML Application F#\n                                </option><option value=\"owinfsharp\">Owin F#\n                                </option><option value=\"clientserverfsharp\">Client-Server Application C#\n                                </option><option value=\"spacsharp\">Single Page Application C#\n                                </option><option value=\"librarycsharp\">Library C#\n                                </option><option value=\"offlinecsharp\">HTML Application C#\n                            </option></select>\n                            <label class=\"mdl-selectfield__label\" for=\"myselect\">Available templates</label>\n                        <div class=\"mdl-selectfield__box\" tabindex=\"1\"><span tabindex=\"-1\" class=\"mdl-selectfield__arrow-down__container\"><span class=\"mdl-selectfield__arrow-down\" tabindex=\"-1\"></span></span><span class=\"mdl-selectfield__box-value\" tabindex=\"-1\">Client-Server Application F#\n                                </span></div><div class=\"mdl-selectfield__list-option-box\" tabindex=\"-1\"><ul tabindex=\"-1\"><li class=\"is-selected\" data-value=\"0\" tabindex=\"-1\">Client-Server Application F#\n                                </li><li class=\"\" data-value=\"1\" tabindex=\"-1\">Single Page Application F#\n                                </li><li class=\"\" data-value=\"2\" tabindex=\"-1\">Extension F#\n                                </li><li class=\"\" data-value=\"3\" tabindex=\"-1\">Library F#\n                                </li><li class=\"\" data-value=\"4\" tabindex=\"-1\">HTML Application F#\n                                </li><li class=\"\" data-value=\"5\" tabindex=\"-1\">Owin F#\n                                </li><li class=\"\" data-value=\"6\" tabindex=\"-1\">Client-Server Application C#\n                                </li><li class=\"\" data-value=\"7\" tabindex=\"-1\">Single Page Application C#\n                                </li><li class=\"\" data-value=\"8\" tabindex=\"-1\">Library C#\n                                </li><li class=\"\" data-value=\"9\" tabindex=\"-1\">HTML Application C#\n                            </li></ul></div></div>\n\n    <div class=\"mdl-selectfield mdl-js-selectfield is-dirty\" id=\"plainIdeSelect\" data-upgraded=\",MaterialSelectfield\">\n                            <select id=\"myselect\" name=\"myselect\" class=\"mdl-selectfield__select\" style=\"opacity: 0; z-index: -1;\">\n                                <option value=\"vs2017\">Visual Studio 2017\n                            </option></select>\n                            <label class=\"mdl-selectfield__label\" for=\"myselect\">Your IDE</label>\n                        <div class=\"mdl-selectfield__box\" tabindex=\"1\"><span tabindex=\"-1\" class=\"mdl-selectfield__arrow-down__container\"><span class=\"mdl-selectfield__arrow-down\" tabindex=\"-1\"></span></span><span class=\"mdl-selectfield__box-value\" tabindex=\"-1\">Visual Studio 2017\n                            </span></div><div class=\"mdl-selectfield__list-option-box\" tabindex=\"-1\"><ul tabindex=\"-1\"><li class=\"is-selected\" data-value=\"0\" tabindex=\"-1\">Visual Studio 2017\n                            </li></ul></div></div>\n\n    <div class=\"social-button-group\">\n                            <button class=\"mdl-button mdl-js-button mdl-button--raised mdl-button--colored dl-button\" data-upgraded=\",MaterialButton\" ws-onclick=\"Download\">\n                                Download\n                            </button>\n                        </div>\n</div>");});};y=g.ConcreteVar=bC.Class({Get:function(){return this.current;},get_View:function(){return this.view;},Set:function(bG){if(this.isConst)(function(bH){return bH("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bH){bE.log(bH);}));else{z.Obsolete(this.snap);this.current=bG;this.snap=z.New({$:2,$0:bG,$1:[]});}},UpdateMaybe:function(bG){var bH;bH=bG(this.Get());bH!=null&&bH.$==1?this.Set(bH.$0):void 0;}},h,y);y.New=bC.Ctor(function(bG,bH,bI){var bJ;bJ=this;h.New.call(this);this.isConst=bG;this.current=bI;this.snap=bH;this.view=function(){return bJ.snap;};this.id=K.Int();},y);z.WhenRun=function(bG,bH,bI){var bJ;bJ=bG.s;bJ==null?bI():bJ!=null&&bJ.$==2?(bJ.$1.push(bI),bH(bJ.$0)):bJ!=null&&bJ.$==3?(bJ.$0.push(bH),bJ.$1.push(bI)):bH(bJ.$0);};z.Map=function(bG,bH){var bI,bJ;bI=bH.s;return bI!=null&&bI.$==0?z.New({$:0,$0:bG(bI.$0)}):(bJ=z.New({$:3,$0:[],$1:[]}),(z.When(bH,function(bK){z.MarkDone(bJ,bH,bG(bK));},bJ),bJ));};z.Map3=function(bG,bH,bI,bJ){var bK,bL,bM,bN;function bO(bP){var bQ,bR,bS,bT;if(!(bQ=bN.s,bQ!=null&&bQ.$==0||bQ!=null&&bQ.$==2)){bR=z.ValueAndForever(bH);bS=z.ValueAndForever(bI);bT=z.ValueAndForever(bJ);bR!=null&&bR.$==1?bS!=null&&bS.$==1?bT!=null&&bT.$==1?bR.$0[1]&&bS.$0[1]&&bT.$0[1]?z.MarkForever(bN,bG(bR.$0[0],bS.$0[0],bT.$0[0])):z.MarkReady(bN,bG(bR.$0[0],bS.$0[0],bT.$0[0])):void 0:void 0:void 0;}}bK=bH.s;bL=bI.s;bM=bJ.s;return bK!=null&&bK.$==0?bL!=null&&bL.$==0?bM!=null&&bM.$==0?z.New({$:0,$0:bG(bK.$0,bL.$0,bM.$0)}):z.Map3Opt1(bG,bK.$0,bL.$0,bJ):bM!=null&&bM.$==0?z.Map3Opt2(bG,bK.$0,bM.$0,bI):z.Map3Opt3(bG,bK.$0,bI,bJ):bL!=null&&bL.$==0?bM!=null&&bM.$==0?z.Map3Opt4(bG,bL.$0,bM.$0,bH):z.Map3Opt5(bG,bL.$0,bH,bJ):bM!=null&&bM.$==0?z.Map3Opt6(bG,bM.$0,bH,bI):(bN=z.New({$:3,$0:[],$1:[]}),(z.When(bH,bO,bN),z.When(bI,bO,bN),z.When(bJ,bO,bN),bN));};z.Sequence=function(bG){var bH,bI,bJ;function bK(bL){var bM;if(bJ[0]===0){bM=o.map(function(bN){var bO;bO=bN.s;return bO!=null&&bO.$==0?bO.$0:bO!=null&&bO.$==2?bO.$0:f.FailWith("value not found by View.Sequence");},bH);o.forall(function(bN){var bO;bO=bN.s;return bO!=null&&bO.$==0;},bH)?z.MarkForever(bI,bM):z.MarkReady(bI,bM);}else bJ[0]--;}bH=o.ofSeq(bG);return bH.length==0?z.New({$:0,$0:[]}):(bI=z.New({$:3,$0:[],$1:[]}),(bJ=[o.length(bH)-1],(o.iter(function(bL){z.When(bL,bK,bI);},bH),bI)));};z.Map2=function(bG,bH,bI){var bJ,bK,bL;function bM(bN){var bO,bP,bQ;if(!(bO=bL.s,bO!=null&&bO.$==0||bO!=null&&bO.$==2)){bP=z.ValueAndForever(bH);bQ=z.ValueAndForever(bI);bP!=null&&bP.$==1?bQ!=null&&bQ.$==1?bP.$0[1]&&bQ.$0[1]?z.MarkForever(bL,bG(bP.$0[0],bQ.$0[0])):z.MarkReady(bL,bG(bP.$0[0],bQ.$0[0])):void 0:void 0;}}bJ=bH.s;bK=bI.s;return bJ!=null&&bJ.$==0?bK!=null&&bK.$==0?z.New({$:0,$0:bG(bJ.$0,bK.$0)}):z.Map2Opt1(bG,bJ.$0,bI):bK!=null&&bK.$==0?z.Map2Opt2(bG,bK.$0,bH):(bL=z.New({$:3,$0:[],$1:[]}),(z.When(bH,bM,bL),z.When(bI,bM,bL),bL));};z.Map2Unit=function(bG,bH){var bI,bJ,bK;function bL(){var bM,bN,bO;if(!(bM=bK.s,bM!=null&&bM.$==0||bM!=null&&bM.$==2)){bN=z.ValueAndForever(bG);bO=z.ValueAndForever(bH);bN!=null&&bN.$==1?bO!=null&&bO.$==1?bN.$0[1]&&bO.$0[1]?z.MarkForever(bK,null):z.MarkReady(bK,null):void 0:void 0;}}bI=bG.s;bJ=bH.s;return bI!=null&&bI.$==0?bJ!=null&&bJ.$==0?z.New({$:0,$0:null}):bH:bJ!=null&&bJ.$==0?bG:(bK=z.New({$:3,$0:[],$1:[]}),(z.When(bG,bL,bK),z.When(bH,bL,bK),bK));};z.WhenObsoleteRun=function(bG,bH){var bI;bI=bG.s;bI==null?bH():bI!=null&&bI.$==2?bI.$1.push(bH):bI!=null&&bI.$==3?bI.$1.push(bH):void 0;};z.When=function(bG,bH,bI){var bJ;bJ=bG.s;bJ==null?z.Obsolete(bI):bJ!=null&&bJ.$==2?(z.EnqueueSafe(bJ.$1,bI),bH(bJ.$0)):bJ!=null&&bJ.$==3?(bJ.$0.push(bH),z.EnqueueSafe(bJ.$1,bI)):bH(bJ.$0);};z.MarkDone=function(bG,bH,bI){var bJ;if(bJ=bH.s,bJ!=null&&bJ.$==0)z.MarkForever(bG,bI);else z.MarkReady(bG,bI);};z.Map3Opt1=function(bG,bH,bI,bJ){return z.Map(function(bK){return bG(bH,bI,bK);},bJ);};z.Map3Opt2=function(bG,bH,bI,bJ){return z.Map(function(bK){return bG(bH,bK,bI);},bJ);};z.Map3Opt3=function(bG,bH,bI,bJ){return z.Map2(function(bK,bL){return bG(bH,bK,bL);},bI,bJ);};z.Map3Opt4=function(bG,bH,bI,bJ){return z.Map(function(bK){return bG(bK,bH,bI);},bJ);};z.Map3Opt5=function(bG,bH,bI,bJ){return z.Map2(function(bK,bL){return bG(bK,bH,bL);},bI,bJ);};z.Map3Opt6=function(bG,bH,bI,bJ){return z.Map2(function(bK,bL){return bG(bK,bL,bH);},bI,bJ);};z.ValueAndForever=function(bG){var bH;bH=bG.s;return bH!=null&&bH.$==0?{$:1,$0:[bH.$0,true]}:bH!=null&&bH.$==2?{$:1,$0:[bH.$0,false]}:null;};z.MarkForever=function(bG,bH){var bI,bJ,bK,bL;bI=bG.s;if(bI!=null&&bI.$==3){bG.s={$:0,$0:bH};bJ=bI.$0;for(bK=0,bL=o.length(bJ)-1;bK<=bL;bK++)(o.get(bJ,bK))(bH);}else void 0;};z.MarkReady=function(bG,bH){var bI,bJ,bK,bL;bI=bG.s;if(bI!=null&&bI.$==3){bG.s={$:2,$0:bH,$1:bI.$1};bJ=bI.$0;for(bK=0,bL=o.length(bJ)-1;bK<=bL;bK++)(o.get(bJ,bK))(bH);}else void 0;};z.Map2Opt1=function(bG,bH,bI){return z.Map(function(bJ){return bG(bH,bJ);},bI);};z.Map2Opt2=function(bG,bH,bI){return z.Map(function(bJ){return bG(bJ,bH);},bI);};z.Copy=function(bG){var bH,bI,bJ;bH=bG.s;return bH==null?bG:bH!=null&&bH.$==2?(bI=z.New({$:2,$0:bH.$0,$1:[]}),(z.WhenObsolete(bG,bI),bI)):bH!=null&&bH.$==3?(bJ=z.New({$:3,$0:[],$1:[]}),(z.When(bG,function(bK){z.MarkDone(bJ,bG,bK);},bJ),bJ)):bG;};z.EnqueueSafe=function(bG,bH){var bI,bJ,bK,bL;bG.push(bH);if(bG.length%20===0){bI=bG.slice(0);bz.Clear(bG);for(bJ=0,bK=o.length(bI)-1;bJ<=bK;bJ++){bL=o.get(bI,bJ);typeof bL=="object"?function(bM){if(bM.s)bG.push(bM);}(bL):function(bM){bG.push(bM);}(bL);}}else void 0;};z.WhenObsolete=function(bG,bH){var bI;bI=bG.s;bI==null?z.Obsolete(bH):bI!=null&&bI.$==2?z.EnqueueSafe(bI.$1,bH):bI!=null&&bI.$==3?z.EnqueueSafe(bI.$1,bH):void 0;};A.Handler=function(bG,bH){return L.Static(function(bI){bI.addEventListener(bG,function(bJ){return(bH(bI))(bJ);},false);});};A.OnAfterRender=function(bG){return new p({$:4,$0:bG});};A.Value=function(bG){function bH(bI){return{$:1,$0:bI};}return A.CustomValue(bG,a.id,function(bI){return bH(a.id(bI));});};A.Checked=function(bG){function bH(bI,bJ){return!i.Equals(bG.Get(),bI.checked)?bG.Set(bI.checked):null;}return p.Concat([A.DynamicProp("checked",bG.get_View()),A.Handler("change",function(bI){return function(bJ){return bH(bI,bJ);};}),A.Handler("click",function(bI){return function(bJ){return bH(bI,bJ);};})]);};A.IntValue=function(bG){return A.CustomVar(bG,function(bH,bI){var bJ;bJ=bI.get_Input();return bH.value!==bJ?void(bH.value=bJ):null;},function(bH){var bI,bJ,bK;bI=bH.value;return{$:1,$0:bh.isBlank(bI)?(bH.checkValidity?bH.checkValidity():true)?new bb({$:2,$0:bI}):new bb({$:1,$0:bI}):(bJ=(bK=0,[U.TryParseInt32(bI,{get:function(){return bK;},set:function(bL){bK=bL;}}),bK]),bJ[0]?new bb({$:0,$0:bJ[1],$1:bI}):new bb({$:1,$0:bI}))};});};A.IntValueUnchecked=function(bG){return A.CustomValue(bG,a.String,function(bH){var bI;return bh.isBlank(bH)?{$:1,$0:0}:(bI=+bH,bI!==bI>>0?null:{$:1,$0:bI});});};A.FloatValue=function(bG){return A.CustomVar(bG,function(bH,bI){var bJ;bJ=bI.get_Input();return bH.value!==bJ?void(bH.value=bJ):null;},function(bH){var bI,bJ;bI=bH.value;return{$:1,$0:bh.isBlank(bI)?(bH.checkValidity?bH.checkValidity():true)?new bb({$:2,$0:bI}):new bb({$:1,$0:bI}):(bJ=+bI,a.isNaN(bJ)?new bb({$:1,$0:bI}):new bb({$:0,$0:bJ,$1:bI}))};});};A.FloatValueUnchecked=function(bG){return A.CustomValue(bG,a.String,function(bH){var bI;return bh.isBlank(bH)?{$:1,$0:0}:(bI=+bH,a.isNaN(bI)?null:{$:1,$0:bI});});};A.Dynamic=function(bG,bH){return L.Dynamic(bH,function(bI){return function(bJ){return S.SetAttr(bI,bG,bJ);};});};A.CustomValue=function(bG,bH,bI){return A.CustomVar(bG,function(bJ,bK){bJ.value=bH(bK);},function(bJ){return bI(bJ.value);});};A.DynamicProp=function(bG,bH){return L.Dynamic(bH,function(bI){return function(bJ){bI[bG]=bJ;};});};A.CustomVar=function(bG,bH,bI){function bJ(bL,bM){return bG.UpdateMaybe(function(bN){var bO,bP;bO=bI(bL);return bO!=null&&bO.$==1&&(!i.Equals(bO.$0,bN)&&(bP=[bO,bO.$0],true))?bP[0]:null;});}function bK(bL,bM){var bN,bO;bN=bI(bL);return bN!=null&&bN.$==1&&(i.Equals(bN.$0,bM)&&(bO=bN.$0,true))?null:bH(bL,bM);}return p.Concat([A.Handler("change",function(bL){return function(bM){return bJ(bL,bM);};}),A.Handler("input",function(bL){return function(bM){return bJ(bL,bM);};}),A.Handler("keypress",function(bL){return function(bM){return bJ(bL,bM);};}),A.DynamicCustom(function(bL){return function(bM){return bK(bL,bM);};},bG.get_View())]);};A.DynamicCustom=function(bG,bH){return L.Dynamic(bH,bG);};B.ofSeqNonCopying=function(bG){var bH,bI;if(bG instanceof a.Array)return bG;else if(bG instanceof n)return o.ofList(bG);else if(bG===null)return[];else{bH=[];bI=O.Get(bG);try{while(bI.MoveNext())bH.push(bI.Current());return bH;}finally{if("Dispose"in bI)bI.Dispose();}}};B.TreeReduce=function(bG,bH,bI){var bJ;function bK(bL,bM){var bN,bO;return bM<=0?bG:bM===1&&(bL>=0&&bL<bJ)?o.get(bI,bL):(bO=bM/2>>0,bH(bK(bL,bO),bK(bL+bO,bM-bO)));}bJ=o.length(bI);return bK(0,bJ);};B.MapTreeReduce=function(bG,bH,bI,bJ){var bK;function bL(bM,bN){var bO,bP;return bN<=0?bH:bN===1&&(bM>=0&&bM<bK)?bG(o.get(bJ,bM)):(bP=bN/2>>0,bI(bL(bM,bP),bL(bM+bP,bN-bP)));}bK=o.length(bJ);return bL(0,bK);};D=C.Dictionary=bC.Class({set_Item:function(bG,bH){this.set(bG,bH);},set:function(bG,bH){var bI,bJ,bK,bL;bI=this;bJ=this.hash(bG);bK=this.data[bJ];bK?(bL=o.tryFindIndex(function(bM){return bI.equals.apply(null,[(f.KeyValue(bM))[0],bG]);},bK),bL==null?(this.count=this.count+1,bK.push({K:bG,V:bH})):bK[bL.$0]={K:bG,V:bH}):(this.count=this.count+1,this.data[bJ]=new a.Array({K:bG,V:bH}));},ContainsKey:function(bG){var bH,bI;bH=this;bI=this.data[this.hash(bG)];return bI&&o.exists(function(bJ){return bH.equals.apply(null,[(f.KeyValue(bJ))[0],bG]);},bI);},TryGetValue:function(bG,bH){var bI,bJ,bK;bI=this;bJ=this.data[this.hash(bG)];return bJ&&(bK=o.tryPick(function(bL){var bM;bM=f.KeyValue(bL);return bI.equals.apply(null,[bM[0],bG])?{$:1,$0:bM[1]}:null;},bJ),bK!=null&&bK.$==1&&(bH.set(bK.$0),true));},get_Item:function(bG){return this.get(bG);},get:function(bG){var bH,bI;bH=this;bI=this.data[this.hash(bG)];return bI?o.pick(function(bJ){var bK;bK=f.KeyValue(bJ);return bH.equals.apply(null,[bK[0],bG])?{$:1,$0:bK[1]}:null;},bI):N.notPresent();},GetEnumerator:function(){return O.Get0(this);},GetEnumerator0:function(){return O.Get0(o.concat(r.GetFieldValues(this.data)));}},l,D);D.New$5=bC.Ctor(function(){D.New$6.call(this,[],i.Equals,i.Hash);},D);D.New$6=bC.Ctor(function(bG,bH,bI){var bJ,bK;this.equals=bH;this.hash=bI;this.count=0;this.data=[];bJ=O.Get(bG);try{while(bJ.MoveNext()){bK=bJ.Current();this.set(bK.K,bK.V);}}finally{if("Dispose"in bJ)bJ.Dispose();}},D);E=C.HashSet=bC.Class({Add:function(bG){return this.add(bG);},Contains:function(bG){var bH;bH=this.data[this.hash(bG)];return bH==null?false:this.arrContains(bG,bH);},add:function(bG){var bH,bI;bH=this.hash(bG);bI=this.data[bH];return bI==null?(this.data[bH]=[bG],this.count=this.count+1,true):this.arrContains(bG,bI)?false:(bI.push(bG),this.count=this.count+1,true);},arrContains:function(bG,bH){var bI,bJ,bK,bL;bI=true;bJ=0;bL=bH.length;while(bI&&bJ<bL)if(this.equals.apply(null,[bH[bJ],bG]))bI=false;else bJ=bJ+1;return!bI;},IntersectWith:function(bG){var bH,bI,bJ,bK,bL;bH=new E.New$4(bG,this.equals,this.hash);bI=_9.concat(this.data);for(bJ=0,bK=bI.length-1;bJ<=bK;bJ++){bL=bI[bJ];!bH.Contains(bL)?this.Remove(bL):void 0;}},get_Count:function(){return this.count;},CopyTo:function(bG){var bH,bI,bJ,bK;bH=0;bI=_9.concat(this.data);for(bJ=0,bK=bI.length-1;bJ<=bK;bJ++)o.set(bG,bJ,bI[bJ]);},ExceptWith:function(bG){var bH;bH=O.Get(bG);try{while(bH.MoveNext())this.Remove(bH.Current());}finally{if("Dispose"in bH)bH.Dispose();}},Remove:function(bG){var bH;bH=this.data[this.hash(bG)];return bH==null?false:this.arrRemove(bG,bH)&&(this.count=this.count-1,true);},arrRemove:function(bG,bH){var bI,bJ,bK,bL;bI=true;bJ=0;bL=bH.length;while(bI&&bJ<bL)if(this.equals.apply(null,[bH[bJ],bG])){bH.splice.apply(bH,[bJ,1]);bI=false;}else bJ=bJ+1;return!bI;},GetEnumerator:function(){return O.Get(_9.concat(this.data));},GetEnumerator0:function(){return O.Get(_9.concat(this.data));}},l,E);E.New$3=bC.Ctor(function(){E.New$4.call(this,[],i.Equals,i.Hash);},E);E.New$4=bC.Ctor(function(bG,bH,bI){var bJ;this.equals=bH;this.hash=bI;this.data=[];this.count=0;bJ=O.Get(bG);try{while(bJ.MoveNext())this.add(bJ.Current());}finally{if("Dispose"in bJ)bJ.Dispose();}},E);E.New$2=bC.Ctor(function(bG){E.New$4.call(this,bG,i.Equals,i.Hash);},E);F.Box=a.id;o.choose=function(bG,bH){var bI,bJ,bK,bL;bI=[];for(bJ=0,bK=bH.length-1;bJ<=bK;bJ++){bL=bG(bH[bJ]);bL==null?void 0:bI.push(bL.$0);}return bI;};o.ofList=function(bG){var bH,bI;bI=[];bH=bG;while(!(bH.$==0)){bI.push(m.head(bH));bH=m.tail(bH);}return bI;};o.tryFindIndex=function(bG,bH){var bI,bJ;bI=null;bJ=0;while(bJ<bH.length&&bI==null){bG(bH[bJ])?bI={$:1,$0:bJ}:void 0;bJ=bJ+1;}return bI;};o.exists=function(bG,bH){var bI,bJ,bK,bL;bI=false;bJ=0;bL=o.length(bH);while(!bI&&bJ<bL)if(bG(bH[bJ]))bI=true;else bJ=bJ+1;return bI;};o.iter=function(bG,bH){var bI,bJ;for(bI=0,bJ=bH.length-1;bI<=bJ;bI++)bG(bH[bI]);};o.map=function(bG,bH){var bI,bJ,bK;bI=new a.Array(bH.length);for(bJ=0,bK=bH.length-1;bJ<=bK;bJ++)bI[bJ]=bG(bH[bJ]);return bI;};o.filter=function(bG,bH){var bI,bJ,bK;bI=[];for(bJ=0,bK=bH.length-1;bJ<=bK;bJ++)if(bG(bH[bJ]))bI.push(bH[bJ]);return bI;};o.concat=function(bG){return a.Array.prototype.concat.apply([],o.ofSeq(bG));};o.tryPick=function(bG,bH){var bI,bJ,bK;bI=null;bJ=0;while(bJ<bH.length&&bI==null){bK=bG(bH[bJ]);bK!=null&&bK.$==1?bI=bK:void 0;bJ=bJ+1;}return bI;};o.foldBack=function(bG,bH,bI){var bJ,bK,bL,bM,bN;bJ=bI;bL=bH.length;for(bM=1,bN=bL;bM<=bN;bM++)bJ=bG(bH[bL-bM],bJ);return bJ;};o.ofSeq=function(bG){var bH,bI;if(bG instanceof a.Array)return bG.slice();else if(bG instanceof n)return o.ofList(bG);else{bH=[];bI=O.Get(bG);try{while(bI.MoveNext())bH.push(bI.Current());return bH;}finally{if("Dispose"in bI)bI.Dispose();}}};o.pick=function(bG,bH){var bI;bI=o.tryPick(bG,bH);return bI==null?f.FailWith("KeyNotFoundException"):bI.$0;};o.forall=function(bG,bH){var bI,bJ,bK,bL;bI=true;bJ=0;bL=o.length(bH);while(bI&&bJ<bL)if(bG(bH[bJ]))bJ=bJ+1;else bI=false;return bI;};o.create=function(bG,bH){var bI,bJ,bK;bI=new a.Array(bG);for(bJ=0,bK=bG-1;bJ<=bK;bJ++)bI[bJ]=bH;return bI;};o.init=function(bG,bH){var bI,bJ,bK;bG<0?f.FailWith("Negative size given."):null;bI=new a.Array(bG);for(bJ=0,bK=bG-1;bJ<=bK;bJ++)bI[bJ]=bH(bJ);return bI;};G.append=function(bG,bH){return{GetEnumerator:function(){var bI,bJ;bI=O.Get(bG);bJ=[true];return new P.New(bI,null,function(bK){var bL;return bK.s.MoveNext()?(bK.c=bK.s.Current(),true):(bL=bK.s,!i.Equals(bL,null)?bL.Dispose():void 0,bK.s=null,bJ[0]&&(bJ[0]=false,bK.s=O.Get(bH),bK.s.MoveNext()?(bK.c=bK.s.Current(),true):(bK.s.Dispose(),bK.s=null,false)));},function(bK){var bL;bL=bK.s;!i.Equals(bL,null)?bL.Dispose():void 0;});}};};G.fold=function(bG,bH,bI){var bJ,bK;bJ=bH;bK=O.Get(bI);try{while(bK.MoveNext())bJ=bG(bJ,bK.Current());return bJ;}finally{if("Dispose"in bK)bK.Dispose();}};G.iter=function(bG,bH){var bI;bI=O.Get(bH);try{while(bI.MoveNext())bG(bI.Current());}finally{if("Dispose"in bI)bI.Dispose();}};G.map=function(bG,bH){return{GetEnumerator:function(){var bI;bI=O.Get(bH);return new P.New(null,null,function(bJ){return bI.MoveNext()&&(bJ.c=bG(bI.Current()),true);},function(){bI.Dispose();});}};};G.max=function(bG){var bH,bI,bJ;bH=O.Get(bG);try{if(!bH.MoveNext())G.seqEmpty();bI=bH.Current();while(bH.MoveNext()){bJ=bH.Current();i.Compare(bJ,bI)===1?bI=bJ:void 0;}return bI;}finally{if("Dispose"in bH)bH.Dispose();}};G.forall=function(bG,bH){return!G.exists(function(bI){return!bG(bI);},bH);};G.seqEmpty=function(){return f.FailWith("The input sequence was empty.");};G.exists=function(bG,bH){var bI,bJ;bI=O.Get(bH);try{bJ=false;while(!bJ&&bI.MoveNext())bJ=bG(bI.Current());return bJ;}finally{if("Dispose"in bI)bI.Dispose();}};H.NewFromSeq=function(bG){var bH,bI,bJ;bH={};bI=O.Get(bG);try{while(bI.MoveNext()){bJ=bI.Current();bH[bJ[0]]=bJ[1];}}finally{if("Dispose"in bI)bI.Dispose();}return bH;};I=g.Doc=bC.Class({},l,I);I.RunById=function(bG,bH){var bI;bI=S.Doc().getElementById(bG);i.Equals(bI,null)?f.FailWith("invalid id: "+bG):I.Run(bI,bH);};I.GetOrLoadTemplate=function(bG,bH,bI,bJ){I.LoadLocalTemplates$1();I.PrepareTemplate(bG,bH,bI);return I.NamedTemplate(bG,bH,bJ);};I.PrepareTemplate=function(bG,bH,bI){var bJ,bK,bL,bM,bN;if(!W.LoadedTemplateFile(bG).ContainsKey(bH==null?"":bH.$0)){bJ=bI();for(bK=0,bL=bJ.length-1;bK<=bL;bK++){bM=o.get(bJ,bK);bN=bM.parentNode;i.Equals(bN,null)?void 0:bN.removeChild(bM);}I.PrepareTemplateStrict(bG,bH,bJ);}};I.Run=function(bG,bH){var bI;I.LoadLocalTemplates$1();bI=bH.docNode;W.LinkElement(bG,bI);T.Sink(Y.StartProcessor(W.PerformAnimatedUpdate(W.CreateRunState(bG,bI),bI)),bH.updates);};I.LoadLocalTemplates$1=function(){if(!W.LocalTemplatesLoaded()){W.set_LocalTemplatesLoaded(true);I.LoadLocalTemplates("");}};I.NamedTemplate=function(bG,bH,bI){var bJ,bK;bJ=(bK=null,[W.LoadedTemplateFile(bG).TryGetValue(bH==null?"":bH.$0,{get:function(){return bK;},set:function(bL){bK=bL;}}),bK]);return bJ[0]?I.ChildrenTemplate(bJ[1].cloneNode(true),bI):(bE.warn("Local template doesn't exist",bH),I.Empty());};I.PrepareTemplateStrict=function(bG,bH,bI){var bJ,bK;function bL(bX){var bZ,b0,b1,b2,b3,b4,b5,b6;function bY(b7){var b8;b8=bX.getAttribute(b7);b8===null?void 0:bX.setAttribute(b7,b8.toLowerCase());}bZ=bX.attributes;b0=[];b1=[];b2=[];for(b3=0,b4=bZ.length-1;b3<=b4;b3++){b5=bZ.item(b3);_3.StartsWith(b5.nodeName,"ws-on")&&b5.nodeName!=="ws-onafterrender"&&b5.nodeName!=="ws-on"?(b0.push(b5.nodeName),b1.push(_2.string(b5.nodeName,{$:1,$0:"ws-on".length},null)+":"+b5.nodeValue.toLowerCase())):!_3.StartsWith(b5.nodeName,"ws-")&&(new a.RegExp(W.TextHoleRE())).test(b5.nodeValue)?(b5.nodeValue=(b6=new a.RegExp(W.TextHoleRE(),"g"),b5.nodeValue.replace(b6,function(b7,b8){return"${"+b8.toLowerCase()+"}";})),b2.push(b5.nodeName)):void 0;}!(b1.length==0)?bX.setAttribute("ws-on",_3.concat(" ",b1)):void 0;!(b2.length==0)?bX.setAttribute("ws-attr-holes",_3.concat(" ",b2)):void 0;bY("ws-hole");bY("ws-replace");bY("ws-attr");bY("ws-onafterrender");bY("ws-var");o.iter(function(b7){bX.removeAttribute(b7);},b0);}function bM(bX){var bY,bZ,b0,b1,b2,b3;bY=null;bZ=0;b1=bX.textContent;b2=new a.RegExp(W.TextHoleRE(),"g");while(bY=b2.exec(b1),bY!==null){bX.parentNode.insertBefore(a.document.createTextNode(_2.string(b1,{$:1,$0:bZ},{$:1,$0:b2.lastIndex-o.get(bY,0).length-1})),bX);bZ=b2.lastIndex;b3=a.document.createElement("span");b3.setAttribute("ws-replace",o.get(bY,1).toLowerCase());bX.parentNode.insertBefore(b3,bX);}b2.lastIndex=0;bX.textContent=_2.string(b1,{$:1,$0:bZ},null);}function bN(bX,bY){function bZ(b0){S.IterSelector(bX,"["+b0+"]",function(b1){var b2,b3;b2=(b3=null,[bY.TryGetValue(b1.getAttribute(b0).toLowerCase(),{get:function(){return b3;},set:function(b4){b3=b4;}}),b3]);b2[0]?b1.setAttribute(b0,b2[1]):void 0;});}bZ("ws-hole");bZ("ws-replace");bZ("ws-attr");bZ("ws-onafterrender");bZ("ws-var");S.IterSelector(bX,"[ws-on]",function(b0){b0.setAttribute("ws-on",_3.concat(" ",o.map(function(b1){var b2,b3,b4;b2=_3.SplitChars(b1,[":"],1);b3=(b4=null,[bY.TryGetValue(o.get(b2,1),{get:function(){return b4;},set:function(b5){b4=b5;}}),b4]);return b3[0]?o.get(b2,0)+":"+b3[1]:b1;},_3.SplitChars(b0.getAttribute("ws-on"),[" "],1))));});return S.IterSelector(bX,"[ws-attr-holes]",function(b0){var b1,b2,b3;b1=_3.SplitChars(b0.getAttribute("ws-attr-holes"),[" "],1);for(b2=0,b3=b1.length-1;b2<=b3;b2++)(function(){var b4;function b5(b6,b7){var b8;b8=f.KeyValue(b7);return b6.replace(new a.RegExp("\\${"+b8[0]+"}","ig"),"${"+b8[1]+"}");}b4=o.get(b1,b2);return b0.setAttribute(b4,(((bC.Curried3(G.fold))(b5))(b0.getAttribute(b4)))(bY));}());});}function bO(bX,bY){var bZ,b0,b1,b2,b3;bL(bY);bZ=bY.nodeName.toLowerCase();b0=bX.querySelector("[ws-attr="+bZ+"]");if(i.Equals(b0,null))return bE.warn("Filling non-existent attr hole",bZ);else{b0.removeAttribute("ws-attr");for(b1=0,b2=bY.attributes.length-1;b1<=b2;b1++){b3=bY.attributes.item(b1);b3.name==="class"&&b0.hasAttribute("class")?b0.setAttribute("class",b0.getAttribute("class")+" "+b3.nodeValue):b0.setAttribute(b3.name,b3.nodeValue);}return;}}function bP(bX,bY){function bZ(b0){S.IterSelector(bX,"["+b0+"]",function(b1){if(!bY.Contains(b1.getAttribute(b0)))b1.removeAttribute(b0);});}bZ("ws-attr");bZ("ws-onafterrender");bZ("ws-var");S.IterSelector(bX,"[ws-hole]",function(b0){if(!bY.Contains(b0.getAttribute("ws-hole"))){b0.removeAttribute("ws-hole");while(b0.hasChildNodes())b0.removeChild(b0.lastChild);}});S.IterSelector(bX,"[ws-replace]",function(b0){if(!bY.Contains(b0.getAttribute("ws-replace")))b0.parentNode.removeChild(b0);});S.IterSelector(bX,"[ws-on]",function(b0){b0.setAttribute("ws-on",_3.concat(" ",o.filter(function(b1){return bY.Contains(o.get(_3.SplitChars(b1,[":"],1),1));},_3.SplitChars(b0.getAttribute("ws-on"),[" "],1))));});return S.IterSelector(bX,"[ws-attr-holes]",function(b0){var b1,b2,b3,b4,b5;b1=_3.SplitChars(b0.getAttribute("ws-attr-holes"),[" "],1);for(b2=0,b3=b1.length-1;b2<=b3;b2++){b4=o.get(b1,b2);b0.setAttribute(b4,(b5=new a.RegExp(W.TextHoleRE(),"g"),b0.getAttribute(b4).replace(b5,function(b6,b7){return bY.Contains(b7)?b6:"";})));}});}function bQ(bX,bY){var bZ;bZ=bX.querySelector("[ws-replace]");return i.Equals(bZ,null)?(bE.warn("Filling non-existent text hole",bH),null):(bZ.parentNode.replaceChild(new a.Text(bY),bZ),{$:1,$0:bZ.getAttribute("ws-replace")});}function bR(bX,bY,bZ){while(true)if(bX.hasChildNodes())bZ=bY.insertBefore(bX.lastChild,bZ);else return null;}function bS(bX,bY,bZ){var b0,b1,b2,b3,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co;function b4(cp){}while(true)switch(bX){case 0:b5=_2.string(bY.nodeName,{$:1,$0:3},null).toLowerCase();b6=(b0=b5.indexOf("."),b0===-1?[bG,b5]:[_2.string(b5,null,{$:1,$0:b0-1}),_2.string(b5,{$:1,$0:b0+1},null)]);b7=b6[1];b8=b6[0];if(!W.LoadedTemplates().ContainsKey(b8))return bE.warn("Instantiating non-loaded template",b7);else{b9=W.LoadedTemplates().get_Item(b8);if(!b9.ContainsKey(b7))return bE.warn("Instantiating non-loaded template",b7);else{b_=b9.get_Item(b7);b$=b_.cloneNode(true);ca=new E.New$3();cb=new D.New$5();cc=bY.attributes;for(cd=0,ce=cc.length-1;cd<=ce;cd++){cf=cc.item(cd).name.toLowerCase();cb.set_Item(cf,(cg=cc.item(cd).nodeValue,cg===""?cf:cg.toLowerCase()));!ca.Add(cf)?bE.warn("Hole mapped twice",cf):void 0;}for(ch=0,ci=bY.childNodes.length-1;ch<=ci;ch++){cj=bY.childNodes[ch];i.Equals(cj.nodeType,R.ELEMENT_NODE)?!ca.Add(cj.nodeName.toLowerCase())?bE.warn("Hole filled twice",b7):void 0:void 0;}ck=bY.childNodes.length===1&&i.Equals(bY.firstChild.nodeType,R.TEXT_NODE);if(ck){b2=bQ(b$,bY.firstChild.textContent);((function(cp){return function(cq){if(cq!=null)cp(cq.$0);};}((b3=function(cp){return function(cq){return cp.Add(cq);};}(ca),function(cp){return b4(b3(cp));})))(b2));}bP(b$,ca);if(!ck){for(cl=0,cm=bY.childNodes.length-1;cl<=cm;cl++){cn=bY.childNodes[cl];i.Equals(cn.nodeType,R.ELEMENT_NODE)?cn.hasAttributes()?bO(b$,cn):bT(b$,cn):void 0;}}bN(b$,cb);(((function(cp){function cq(cr,cs){return bR(cp,cr,cs);}return function(cr){return function(cs){return cq(cr,cs);};};}(b$))(bY.parentNode))(bY));bY.parentNode.removeChild(bY);return;}}break;case 1:if(bZ!==null){co=bZ.nextSibling;if(i.Equals(bZ.nodeType,R.TEXT_NODE))bM(bZ);else if(i.Equals(bZ.nodeType,R.ELEMENT_NODE))bV(bZ);bZ=co;}else return null;break;}}function bT(bX,bY){var bZ,b1,b2;function b0(b3,b4){var b5,b6,b7;if(b1==="title"&&bY.hasChildNodes()){b5=bD.parseHTML(bY.textContent);bY.removeChild(bY.firstChild);for(b6=0,b7=b5.length-1;b6<=b7;b6++)bY.appendChild(o.get(b5,b6));}else null;bV(bY);return bR(bY,b3,b4);}b1=bY.nodeName.toLowerCase();S.IterSelector(bX,"[ws-attr-holes]",function(b3){var b4,b5,b6,b7,b8;b4=_3.SplitChars(b3.getAttribute("ws-attr-holes"),[" "],1);for(b5=0,b6=b4.length-1;b5<=b6;b5++){b7=o.get(b4,b5);b3.setAttribute(b7,(b8=new a.RegExp("\\${"+b1+"}","ig"),b3.getAttribute(b7).replace(b8,bY.textContent)));}});b2=bX.querySelector("[ws-hole="+b1+"]");if(i.Equals(b2,null)){bZ=bX.querySelector("[ws-replace="+b1+"]");return i.Equals(bZ,null)?null:(b0(bZ.parentNode,bZ),void bZ.parentNode.removeChild(bZ));}else{while(b2.hasChildNodes())b2.removeChild(b2.lastChild);b2.removeAttribute("ws-hole");return b0(b2,null);}}function bU(bX){return bS(0,bX);}function bV(bX){var bY,bZ;if(_3.StartsWith(bX.nodeName.toLowerCase(),"ws-")&&!bX.hasAttribute("ws-template"))bU(bX);else{bL(bX);bY=bX.getAttribute("ws-template");if(bY===null){bZ=bX.getAttribute("ws-children-template");if(bZ===null)bW(bX,bX.firstChild);else{bX.removeAttribute("ws-children-template");I.PrepareTemplate(bG,{$:1,$0:bZ},function(){return S.ChildrenArray(bX);});while(bX.hasChildNodes())bX.removeChild(bX.lastChild);}}else I.PrepareSingleTemplate(bG,{$:1,$0:bY},bX);}}function bW(bX,bY){return bS(1,bX,bY);}bJ=I.FakeRoot(bI);bK=(bH==null?"":bH.$0).toLowerCase();W.LoadedTemplateFile(bG).set_Item(bK,bJ);o.length(bI)>0?bW(bJ,o.get(bI,0)):void 0;};I.LoadLocalTemplates=function(bG){var bH;bH=W.LoadedTemplateFile("");bH.count>0?W.LoadedTemplates().set_Item(bG,bH):(function(){var bI,bJ,bK,bL;while(true){bI=a.document.querySelector("[ws-template]");if(i.Equals(bI,null)){bJ=a.document.querySelector("[ws-children-template]");if(i.Equals(bJ,null))return null;else{bK=bJ.getAttribute("ws-children-template");bJ.removeAttribute("ws-children-template");I.PrepareTemplate(bG,{$:1,$0:bK},function(bM){return function(){return S.ChildrenArray(bM);};}(bJ));}}else{bL=bI.getAttribute("ws-template");I.PrepareSingleTemplate(bG,{$:1,$0:bL},bI);}}}(),W.LoadedTemplates().set_Item("",W.LoadedTemplateFile(bG)));};I.ChildrenTemplate=function(bG,bH){var bI,bJ,bK,bL,bM,bP,bQ,bR,bS,bT,bU,bV;function bN(bW,bX){var bY,bZ,b0;bY=L.Insert(bW,bX);bQ.push(L.Updates(bY));bR.push([bW,bY]);bZ=bC.GetOptional(bY.OnAfterRender);return bZ==null?null:(b0=bZ.$0,void bS.push(function(){b0(bW);}));}function bO(bW){var bX,bY;bX=(bY=null,[bT.TryGetValue(bW,{get:function(){return bY;},set:function(bZ){bY=bZ;}}),bY]);return bX[0]?bX[1].$==0?{$:1,$0:bX[1].$1}:bX[1].$==1?{$:1,$0:I.TextNode(bX[1].$1)}:bX[1].$==2?{$:1,$0:I.TextView(bX[1].$1)}:bX[1].$==7?{$:1,$0:I.TextView(bX[1].$1.get_View())}:bX[1].$==8?{$:1,$0:I.TextView(T.Map(a.String,bX[1].$1.get_View()))}:bX[1].$==9?{$:1,$0:I.TextView(T.Map(function(bZ){return bZ.get_Input();},bX[1].$1.get_View()))}:bX[1].$==10?{$:1,$0:I.TextView(T.Map(a.String,bX[1].$1.get_View()))}:bX[1].$==11?{$:1,$0:I.TextView(T.Map(function(bZ){return bZ.get_Input();},bX[1].$1.get_View()))}:bX[1].$==12?{$:1,$0:I.TextView(T.Map(a.String,bX[1].$1.get_View()))}:(bE.warn("Content hole filled with attribute data",bW),null):null;}bP=[];bQ=[];bR=[];bS=[];bT=new D.New$5();bU=O.Get(bH);try{while(bU.MoveNext()){bV=bU.Current();bT.set_Item(bV.$0,bV);}}finally{if("Dispose"in bU)bU.Dispose();}bI=S.ChildrenArray(bG);S.IterSelector(bG,"[ws-hole]",function(bW){var bX,bY,bZ;bZ=bW.getAttribute("ws-hole");bW.removeAttribute("ws-hole");while(bW.hasChildNodes())bW.removeChild(bW.lastChild);bX=bO(bZ);bX!=null&&bX.$==1?(bY=bX.$0,W.LinkElement(bW,bY.docNode),bP.push(_0.New(L.Empty(bW),bY.docNode,null,bW,K.Int(),null)),bQ.push(bY.updates)):void 0;});S.IterSelector(bG,"[ws-replace]",function(bW){var bX,bY,bZ,b0,b1,b2;bX=bO(bW.getAttribute("ws-replace"));bX!=null&&bX.$==1?(bY=bX.$0,bZ=bW.parentNode,b0=a.document.createTextNode(""),bZ.replaceChild(b0,bW),b1=W.InsertBeforeDelim(b0,bY.docNode),b2=o.tryFindIndex(function(b3){return bW===b3;},bI),b2==null?void 0:o.set(bI,b2.$0,bY.docNode),bP.push(_0.New(L.Empty(bZ),bY.docNode,{$:1,$0:[b1,b0]},bZ,K.Int(),null)),bQ.push(bY.updates)):void 0;});S.IterSelector(bG,"[ws-attr]",function(bW){var bX,bY,bZ;bX=bW.getAttribute("ws-attr");bW.removeAttribute("ws-attr");bY=(bZ=null,[bT.TryGetValue(bX,{get:function(){return bZ;},set:function(b0){bZ=b0;}}),bZ]);bY[0]?bY[1].$==3?bN(bW,bY[1].$1):bE.warn("Attribute hole filled with non-attribute data",bX):void 0;});S.IterSelector(bG,"[ws-on]",function(bW){bN(bW,p.Concat(o.choose(function(bX){var bY,bZ,b0;bY=_3.SplitChars(bX,[":"],1);bZ=(b0=null,[bT.TryGetValue(o.get(bY,1),{get:function(){return b0;},set:function(b1){b0=b1;}}),b0]);return bZ[0]?bZ[1].$==4?{$:1,$0:A.Handler(o.get(bY,0),bZ[1].$1)}:bZ[1].$==5?{$:1,$0:p.Handler(o.get(bY,0),bZ[1].$2)}:(bE.warn("Event hole on"+o.get(bY,0)+" filled with non-event data",o.get(bY,1)),null):null;},_3.SplitChars(bW.getAttribute("ws-on"),[" "],1))));bW.removeAttribute("ws-on");});S.IterSelector(bG,"[ws-onafterrender]",function(bW){var bX,bY,bZ;bX=bW.getAttribute("ws-onafterrender");bY=(bZ=null,[bT.TryGetValue(bX,{get:function(){return bZ;},set:function(b0){bZ=b0;}}),bZ]);bY[0]?bY[1].$==6?(bW.removeAttribute("ws-onafterrender"),bN(bW,A.OnAfterRender(bY[1].$1))):bE.warn("onafterrender hole filled with non-onafterrender data",bX):void 0;});S.IterSelector(bG,"[ws-var]",function(bW){var bX,bY,bZ;bX=bW.getAttribute("ws-var");bW.removeAttribute("ws-var");bY=(bZ=null,[bT.TryGetValue(bX,{get:function(){return bZ;},set:function(b0){bZ=b0;}}),bZ]);bY[0]?bY[1].$==7?bN(bW,A.Value(bY[1].$1)):bY[1].$==8?bN(bW,A.Checked(bY[1].$1)):bY[1].$==9?bN(bW,A.IntValue(bY[1].$1)):bY[1].$==10?bN(bW,A.IntValueUnchecked(bY[1].$1)):bY[1].$==11?bN(bW,A.FloatValue(bY[1].$1)):bY[1].$==12?bN(bW,A.FloatValueUnchecked(bY[1].$1)):bE.warn("Var hole filled with non-Var data",bX):void 0;});S.IterSelector(bG,"[ws-attr-holes]",function(bW){var bX,bY,bZ,b0;bX=new a.RegExp(W.TextHoleRE(),"g");bY=_3.SplitChars(bW.getAttribute("ws-attr-holes"),[" "],1);bW.removeAttribute("ws-attr-holes");for(bZ=0,b0=bY.length-1;bZ<=b0;bZ++)(function(){var b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb;b_=o.get(bY,bZ);b$=bW.getAttribute(b_);b1=null;b2=0;ca=[];while(b1=bX.exec(b$),b1!==null){cb=_2.string(b$,{$:1,$0:b2},{$:1,$0:bX.lastIndex-o.get(b1,0).length-1});b2=bX.lastIndex;ca.push([cb,o.get(b1,1)]);}b4=_2.string(b$,{$:1,$0:b2},null);bX.lastIndex=0;b5=o.foldBack(function(cc,cd){return(function(ce){var cf,cg;cf=ce[0];cg=ce[1];return function(ch){var ci,cj,ck,cl,cm;ci=ch[0];cj=ch[1];ck=(cl=(cm=null,[bT.TryGetValue(cg,{get:function(){return cm;},set:function(cn){cm=cn;}}),cm]),cl[0]?cl[1].$==1?{$:0,$0:cl[1].$1}:cl[1].$==2?{$:1,$0:cl[1].$1}:cl[1].$==7?{$:1,$0:cl[1].$1.get_View()}:cl[1].$==8?{$:1,$0:T.Map(a.String,cl[1].$1.get_View())}:cl[1].$==9?{$:1,$0:T.Map(function(cn){return cn.get_Input();},cl[1].$1.get_View())}:cl[1].$==10?{$:1,$0:T.Map(a.String,cl[1].$1.get_View())}:cl[1].$==11?{$:1,$0:T.Map(function(cn){return cn.get_Input();},cl[1].$1.get_View())}:cl[1].$==12?{$:1,$0:T.Map(a.String,cl[1].$1.get_View())}:(bE.warn("Attribute value hole filled with non-text data",cg),{$:0,$0:""}):{$:0,$0:""});return ck.$==1?[cf,new n({$:1,$0:ci===""?ck.$0:T.Map(function(cn){return cn+ci;},ck.$0),$1:cj})]:[cf+ck.$0+ci,cj];};}(cc))(cd);},ca,[b4,n.Empty]);return bN(bW,b5[1].$==1?b5[1].$1.$==1?b5[1].$1.$1.$==1?b5[1].$1.$1.$1.$==0?(b6=b5[0],A.Dynamic(b_,T.Map3(function(cc,cd,ce){return b6+cc+cd+ce;},b5[1].$0,b5[1].$1.$0,b5[1].$1.$1.$0))):(b7=b5[0],A.Dynamic(b_,T.Map(function(cc){return b7+_3.concat("",cc);},T.Sequence(b5[1])))):(b8=b5[0],A.Dynamic(b_,T.Map2(function(cc,cd){return b8+cc+cd;},b5[1].$0,b5[1].$1.$0))):b5[0]===""?A.Dynamic(b_,b5[1].$0):(b9=b5[0],A.Dynamic(b_,T.Map(function(cc){return b9+cc;},b5[1].$0))):p.Create(b_,b5[0]));}());});bJ=bC.DeleteEmptyFields({Els:bI,Dirty:true,Holes:bP,Attrs:bR,Render:(bK=bS.length==0?null:{$:1,$0:function(bW){o.iter(function(bX){bX(bW);},bS);}},bK?bK.$0:void 0)},["Render"]);bL=B.TreeReduce(T.Const(),T.Map2Unit,bQ);return!i.Equals(bI,null)&&bI.length===1&&(o.get(bI,0)instanceof R&&(i.Equals(o.get(bI,0).nodeType,R.ELEMENT_NODE)&&(bM=o.get(bI,0),true)))?bc.TreeNode(bJ,bL):I.Mk({$:6,$0:bJ},bL);};I.Empty=function(){return I.Mk(null,T.Const());};I.PrepareSingleTemplate=function(bG,bH,bI){var bJ,bK,bL;bI.removeAttribute("ws-template");bJ=bI.getAttribute("ws-replace");bJ===null?void 0:(bI.removeAttribute("ws-replace"),bK=bI.parentNode,i.Equals(bK,null)?void 0:(bL=a.document.createElement(bI.tagName),bL.setAttribute("ws-replace",bJ),bK.replaceChild(bL,bI)));I.PrepareTemplateStrict(bG,bH,[bI]);};I.FakeRoot=function(bG){var bH,bI,bJ;bH=a.document.createElement("div");for(bI=0,bJ=bG.length-1;bI<=bJ;bI++)bH.appendChild(o.get(bG,bI));return bH;};I.TextNode=function(bG){return I.Mk({$:5,$0:S.CreateText(bG)},T.Const());};I.TextView=function(bG){var bH;bH=W.CreateTextNode();return I.Mk({$:4,$0:bH},T.Map(function(bI){W.UpdateTextNode(bH,bI);},bG));};I.Mk=function(bG,bH){return new I.New(bG,bH);};I.New=bC.Ctor(function(bG,bH){this.docNode=bG;this.updates=bH;},I);K.Int=function(){K.set_counter(K.counter()+1);return K.counter();};K.set_counter=function(bG){Z.$cctor();Z.counter=bG;};K.counter=function(){Z.$cctor();return Z.counter;};L.Static=function(bG){return new p({$:3,$0:bG});};L.EmptyAttr=function(){V.$cctor();return V.EmptyAttr;};L.AppendTree=function(bG,bH){var bI;return bG===null?bH:bH===null?bG:(bI=new p({$:2,$0:bG,$1:bH}),(L.SetFlags(bI,L.Flags(bG)|L.Flags(bH)),bI));};L.SetFlags=function(bG,bH){bG.flags=bH;};L.Flags=function(bG){return bG!==null&&bG.hasOwnProperty("flags")?bG.flags:0;};L.Insert=function(bG,bH){var bI,bJ,bK;function bL(bM){if(!(bM===null))if(bM!=null&&bM.$==1)bI.push(bM.$0);else if(bM!=null&&bM.$==2){bL(bM.$0);bL(bM.$1);}else if(bM!=null&&bM.$==3)bM.$0(bG);else if(bM!=null&&bM.$==4)bJ.push(bM.$0);}bI=[];bJ=[];bL(bH);bK=bI.slice(0);return $.New(bG,L.Flags(bH),bK,bJ.length===0?null:{$:1,$0:function(bM){G.iter(function(bN){bN(bM);},bJ);}});};L.Updates=function(bG){return B.MapTreeReduce(function(bH){return bH.NChanged();},T.Const(),T.Map2Unit,bG.DynNodes);};L.Empty=function(bG){return $.New(bG,0,[],null);};L.HasChangeAnim=function(bG){var bH;bH=4;return(bG.DynFlags&bH)===bH;};L.GetChangeAnim=function(bG){return L.GetAnim(bG,function(bH,bI){return bH.NGetChangeAnim(bI);});};L.HasEnterAnim=function(bG){var bH;bH=1;return(bG.DynFlags&bH)===bH;};L.GetEnterAnim=function(bG){return L.GetAnim(bG,function(bH,bI){return bH.NGetEnterAnim(bI);});};L.HasExitAnim=function(bG){var bH;bH=2;return(bG.DynFlags&bH)===bH;};L.GetExitAnim=function(bG){return L.GetAnim(bG,function(bH,bI){return bH.NGetExitAnim(bI);});};L.Dynamic=function(bG,bH){return new p({$:1,$0:new bp.New(bG,bH)});};L.GetAnim=function(bG,bH){return _8.Concat(o.map(function(bI){return bH(bI,bG.DynElem);},bG.DynNodes));};L.Sync=function(bG,bH){o.iter(function(bI){bI.NSync(bG);},bH.DynNodes);};N.notPresent=function(){return f.FailWith("The given key was not present in the dictionary.");};O.Get=function(bG){return bG instanceof a.Array?O.ArrayEnumerator(bG):i.Equals(typeof bG,"string")?O.StringEnumerator(bG):bG.GetEnumerator();};O.ArrayEnumerator=function(bG){return new P.New(0,null,function(bH){var bI;bI=bH.s;return bI<o.length(bG)&&(bH.c=o.get(bG,bI),bH.s=bI+1,true);},void 0);};O.StringEnumerator=function(bG){return new P.New(0,null,function(bH){var bI;bI=bH.s;return bI<bG.length&&(bH.c=bG[bI],bH.s=bI+1,true);},void 0);};O.Get0=function(bG){return bG instanceof a.Array?O.ArrayEnumerator(bG):i.Equals(typeof bG,"string")?O.StringEnumerator(bG):"GetEnumerator0"in bG?bG.GetEnumerator0():bG.GetEnumerator();};P=O.T=bC.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},l,P);P.New=bC.Ctor(function(bG,bH,bI,bJ){this.s=bG;this.c=bH;this.n=bI;this.d=bJ;},P);S.Doc=function(){X.$cctor();return X.Doc;};S.IterSelector=function(bG,bH,bI){var bJ,bK,bL;bJ=bG.querySelectorAll(bH);for(bK=0,bL=bJ.length-1;bK<=bL;bK++)bI(bJ[bK]);};S.ChildrenArray=function(bG){var bH,bI,bJ;bH=[];for(bI=0,bJ=bG.childNodes.length-1;bI<=bJ;bI++)bH.push(bG.childNodes[bI]);return bH;};S.CreateText=function(bG){return S.Doc().createTextNode(bG);};S.SetAttr=function(bG,bH,bI){bG.setAttribute(bH,bI);};S.InsertAt=function(bG,bH,bI){var bJ;if(!(bI.parentNode===bG&&bH===(bJ=bI.nextSibling,i.Equals(bJ,null)?null:bJ)))bG.insertBefore(bI,bH);};S.RemoveNode=function(bG,bH){if(bH.parentNode===bG)bG.removeChild(bH);};z.Obsolete=function(bG){var bH,bI,bJ,bK,bL;bI=bG.s;if(bI==null||(bI!=null&&bI.$==2?(bH=bI.$1,false):bI!=null&&bI.$==3?(bH=bI.$1,false):true))void 0;else{bG.s=null;for(bJ=0,bK=o.length(bH)-1;bJ<=bK;bJ++){bL=o.get(bH,bJ);typeof bL=="object"?function(bM){z.Obsolete(bM);}(bL):bL();}}};z.New=function(bG){return{s:bG};};T=g.View=bC.Class({},null,T);U.TryParseInt32=function(bG,bH){return U.TryParse(bG,-2147483648,2147483647,bH);};V.$cctor=function(){V.$cctor=a.ignore;V.EmptyAttr=null;};W.LoadedTemplateFile=function(bG){var bH,bI,bJ;bH=(bI=null,[W.LoadedTemplates().TryGetValue(bG,{get:function(){return bI;},set:function(bK){bI=bK;}}),bI]);return bH[0]?bH[1]:(bJ=new D.New$5(),(W.LoadedTemplates().set_Item(bG,bJ),bJ));};W.LinkElement=function(bG,bH){W.InsertDoc(bG,bH,null);};W.CreateRunState=function(bG,bH){return _6.New(_7.get_Empty(),W.CreateElemNode(bG,L.EmptyAttr(),bH));};W.PerformAnimatedUpdate=function(bG,bH){var bI;return _8.get_UseAnimations()?(bI=null,bd.Delay(function(){var bJ,bK,bL;bJ=_7.FindAll(bH);bK=W.ComputeChangeAnim(bG,bJ);bL=W.ComputeEnterAnim(bG,bJ);return bd.Bind(_8.Play(_8.Append(bK,W.ComputeExitAnim(bG,bJ))),function(){return bd.Bind(W.SyncElemNodesNextFrame(bG),function(){return bd.Bind(_8.Play(bL),function(){bG.PreviousNodes=bJ;return bd.Return(null);});});});})):W.SyncElemNodesNextFrame(bG);};W.LocalTemplatesLoaded=function(){ba.$cctor();return ba.LocalTemplatesLoaded;};W.set_LocalTemplatesLoaded=function(bG){ba.$cctor();ba.LocalTemplatesLoaded=bG;};W.LoadedTemplates=function(){ba.$cctor();return ba.LoadedTemplates;};W.TextHoleRE=function(){ba.$cctor();return ba.TextHoleRE;};W.InsertDoc=function(bG,bH,bI){var bJ;return bH!=null&&bH.$==1?W.InsertNode(bG,bH.$0.El,bI):bH!=null&&bH.$==2?(bJ=bH.$0,(bJ.Dirty=false,W.InsertDoc(bG,bJ.Current,bI))):bH==null?bI:bH!=null&&bH.$==4?W.InsertNode(bG,bH.$0.Text,bI):bH!=null&&bH.$==5?W.InsertNode(bG,bH.$0,bI):bH!=null&&bH.$==6?o.foldBack(function(bK,bL){return bK.constructor===M?W.InsertDoc(bG,bK,bL):W.InsertNode(bG,bK,bL);},bH.$0.Els,bI):W.InsertDoc(bG,bH.$0,W.InsertDoc(bG,bH.$1,bI));};W.CreateElemNode=function(bG,bH,bI){var bJ;W.LinkElement(bG,bI);bJ=L.Insert(bG,bH);return _0.New(bJ,bI,null,bG,K.Int(),bC.GetOptional(bJ.OnAfterRender));};W.ComputeChangeAnim=function(bG,bH){var bI;function bJ(bK){return L.HasChangeAnim(bK.Attr);}bI=function(bK){return _7.Filter(bJ,bK);};return _8.Concat(o.map(function(bK){return L.GetChangeAnim(bK.Attr);},_7.ToArray(_7.Intersect(bI(bG.PreviousNodes),bI(bH)))));};W.ComputeEnterAnim=function(bG,bH){return _8.Concat(o.map(function(bI){return L.GetEnterAnim(bI.Attr);},_7.ToArray(_7.Except(bG.PreviousNodes,_7.Filter(function(bI){return L.HasEnterAnim(bI.Attr);},bH)))));};W.ComputeExitAnim=function(bG,bH){return _8.Concat(o.map(function(bI){return L.GetExitAnim(bI.Attr);},_7.ToArray(_7.Except(bH,_7.Filter(function(bI){return L.HasExitAnim(bI.Attr);},bG.PreviousNodes)))));};W.SyncElemNodesNextFrame=function(bG){function bH(bI){a.requestAnimationFrame(function(){W.SyncElemNode(bG.Top);bI();});}return bg.BatchUpdatesEnabled()?bd.FromContinuations(function(bI,bJ,bK){return bH.apply(null,[bI,bJ,bK]);}):(W.SyncElemNode(bG.Top),bd.Return(null));};W.InsertBeforeDelim=function(bG,bH){var bI,bJ;bI=bG.parentNode;bJ=a.document.createTextNode("");bI.insertBefore(bJ,bG);W.LinkPrevElement(bG,bH);return bJ;};W.InsertNode=function(bG,bH,bI){S.InsertAt(bG,bI,bH);return bH;};W.SyncElemNode=function(bG){W.SyncElement(bG);W.Sync(bG.Children);W.AfterRender(bG);};W.CreateTextNode=function(){return{Text:S.CreateText(""),Dirty:false,Value:""};};W.UpdateTextNode=function(bG,bH){bG.Value=bH;bG.Dirty=true;};W.LinkPrevElement=function(bG,bH){W.InsertDoc(bG.parentNode,bH,bG);};W.SyncElement=function(bG){function bH(bI){function bJ(bK){var bL,bM;return bK!=null&&bK.$==0?bJ(bK.$0)||bJ(bK.$1):bK!=null&&bK.$==2?(bL=bK.$0,bL.Dirty||bJ(bL.Current)):bK!=null&&bK.$==6&&(bM=bK.$0,bM.Dirty||o.exists(bH,bM.Holes));}return bJ(bI.Children);}L.Sync(bG.El,bG.Attr);bH(bG)?W.DoSyncElement(bG):void 0;};W.Sync=function(bG){var bH,bI;if(bG!=null&&bG.$==1)W.SyncElemNode(bG.$0);else if(bG!=null&&bG.$==2)W.Sync(bG.$0.Current);else if(bG==null);else if(bG!=null&&bG.$==5);else if(bG!=null&&bG.$==4){bH=bG.$0;bH.Dirty?(bH.Text.nodeValue=bH.Value,bH.Dirty=false):void 0;}else if(bG!=null&&bG.$==6){bI=bG.$0;o.iter(function(bJ){W.SyncElemNode(bJ);},bI.Holes);o.iter(function(bJ){L.Sync(bJ[0],bJ[1]);},bI.Attrs);W.AfterRender(bI);}else{W.Sync(bG.$0);W.Sync(bG.$1);}};W.AfterRender=function(bG){var bH;bH=bC.GetOptional(bG.Render);bH!=null&&bH.$==1?(bH.$0(bG.El),bC.SetOptional(bG,"Render",null)):void 0;};W.DoSyncElement=function(bG){var bH,bI,bJ;function bK(bL,bM){var bN,bO;return bL!=null&&bL.$==1?bL.$0.El:bL!=null&&bL.$==2?(bN=bL.$0,bN.Dirty?(bN.Dirty=false,W.InsertDoc(bH,bN.Current,bM)):bK(bN.Current,bM)):bL==null?bM:bL!=null&&bL.$==4?bL.$0.Text:bL!=null&&bL.$==5?bL.$0:bL!=null&&bL.$==6?(bO=bL.$0,(bO.Dirty?bO.Dirty=false:void 0,o.foldBack(function(bP,bQ){return bP.constructor===M?bK(bP,bQ):bP;},bO.Els,bM))):bK(bL.$0,bK(bL.$1,bM));}bH=bG.El;bw.Iter((bI=bG.El,function(bL){S.RemoveNode(bI,bL);}),bw.Except(bw.DocChildren(bG),bw.Children(bG.El,bC.GetOptional(bG.Delimiters))));bK(bG.Children,(bJ=bC.GetOptional(bG.Delimiters),bJ!=null&&bJ.$==1?bJ.$0[1]:null));};X.$cctor=function(){X.$cctor=a.ignore;X.Doc=a.document;};Y.StartProcessor=function(bG){var bH;function bI(){var bJ;bJ=null;return bd.Delay(function(){return bd.Bind(bG,function(){var bK;bK=bH[0];return bK===1?(bH[0]=0,bd.Zero()):bK===2?(bH[0]=1,bI()):bd.Zero();});});}bH=[0];return function(){var bJ;bJ=bH[0];bJ===0?(bH[0]=1,bd.Start(bI(),null)):bJ===1?bH[0]=2:void 0;};};T.Sink=function(bG,bH){function bI(){z.WhenRun(bH(),bG,function(){bd.scheduler().Fork(bI);});}bd.scheduler().Fork(bI);};T.Map=function(bG,bH){return T.CreateLazy(function(){return z.Map(bG,bH());});};T.Map3=function(bG,bH,bI,bJ){return T.CreateLazy(function(){return z.Map3(bG,bH(),bI(),bJ());});};T.Sequence=function(bG){return T.CreateLazy(function(){return z.Sequence(G.map(function(bH){return bH();},bG));});};T.Map2=function(bG,bH,bI){return T.CreateLazy(function(){return z.Map2(bG,bH(),bI());});};T.Const=function(bG){var bH;bH=z.New({$:0,$0:bG});return function(){return bH;};};T.Map2Unit=function(bG,bH){return T.CreateLazy(function(){return z.Map2Unit(bG(),bH());});};T.CreateLazy=function(bG){var bH;bH={c:null,o:bG};return function(){var bI,bJ;bI=bH.c;return bI===null?(bI=bH.o(),bH.c=bI,(bJ=bI.s,bJ!=null&&bJ.$==0)?bH.o=null:z.WhenObsoleteRun(bI,function(){bH.c=null;}),bI):bI;};};Z.$cctor=function(){Z.$cctor=a.ignore;Z.counter=0;};_0=g.DocElemNode=bC.Class({Equals:function(bG){return this.ElKey===bG.ElKey;},GetHashCode:function(){return this.ElKey;}},null,_0);_0.New=function(bG,bH,bI,bJ,bK,bL){var bM;return new _0((bM={Attr:bG,Children:bH,El:bJ,ElKey:bK},(bC.SetOptional(bM,"Delimiters",bI),bC.SetOptional(bM,"Render",bL),bM)));};_2.string=function(bG,bH,bI){return bH==null?bI!=null&&bI.$==1?bG.slice(0,bI.$0+1):"":bI==null?bG.slice(bH.$0):bG.slice(bH.$0,bI.$0+1);};_3.concat=function(bG,bH){return o.ofSeq(bH).join(bG);};_3.StartsWith=function(bG,bH){return bG.substring(0,bH.length)==bH;};_3.SplitChars=function(bG,bH,bI){return _3.Split(bG,new a.RegExp("["+_3.RegexEscape(bH.join(""))+"]"),bI);};_3.RegexEscape=function(bG){return bG.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};_3.Split=function(bG,bH,bI){return bI===1?o.filter(function(bJ){return bJ!=="";},_3.SplitWith(bG,bH)):_3.SplitWith(bG,bH);};_3.forall=function(bG,bH){return G.forall(bG,_3.protect(bH));};_3.SplitWith=function(bG,bH){return bG.split(bH);};_3.protect=function(bG){return bG===null?"":bG;};_6.New=function(bG,bH){return{PreviousNodes:bG,Top:bH};};_7.get_Empty=function(){return{$:0,$0:new E.New$3()};};_7.FindAll=function(bG){var bH;function bI(bK){if(bK!=null&&bK.$==0){bI(bK.$0);bI(bK.$1);}else if(bK!=null&&bK.$==1)bJ(bK.$0);else if(bK!=null&&bK.$==2)bI(bK.$0.Current);else if(bK!=null&&bK.$==6)o.iter(bJ,bK.$0.Holes);}function bJ(bK){bH.push(bK);bI(bK.Children);}bH=[];bI(bG);return{$:0,$0:new E.New$2(bH)};};_7.Filter=function(bG,bH){return{$:0,$0:bn.Filter(bG,bH.$0)};};_7.Intersect=function(bG,bH){return{$:0,$0:bn.Intersect(bG.$0,bH.$0)};};_7.ToArray=function(bG){return bn.ToArray(bG.$0);};_7.Except=function(bG,bH){return{$:0,$0:bn.Except(bG.$0,bH.$0)};};_8.get_UseAnimations=function(){return be.UseAnimations();};_8.Play=function(bG){var bH;bH=null;return bd.Delay(function(){return bd.Bind(_8.Run(a.ignore,be.Actions(bG)),function(){be.Finalize(bG);return bd.Return(null);});});};_8.Append=function(bG,bH){return{$:0,$0:bf.Append(bG.$0,bH.$0)};};_8.Concat=function(bG){return{$:0,$0:bf.Concat(G.map(be.List,bG))};};_8.Run=function(bG,bH){var bI;function bJ(bK){function bL(bM,bN){var bO;bO=bN-bM;bH.Compute(bO);bG();return bO<=bI?void a.requestAnimationFrame(function(bP){bL(bM,bP);}):bK();}a.requestAnimationFrame(function(bM){bL(bM,bM);});}bI=bH.Duration;return bI===0?bd.Zero():bd.FromContinuations(function(bK,bL,bM){return bJ.apply(null,[bK,bL,bM]);});};_8.get_Empty=function(){return{$:0,$0:bf.Empty()};};_9.concat=function(bG){var bH,bI;bH=[];for(var bJ in bG)bH.push.apply(bH,bG[bJ]);return bH;};$.New=function(bG,bH,bI,bJ){var bK;bK={DynElem:bG,DynFlags:bH,DynNodes:bI};bC.SetOptional(bK,"OnAfterRender",bJ);return bK;};ba.$cctor=function(){ba.$cctor=a.ignore;ba.BatchUpdatesEnabled=true;ba.LoadedTemplates=new D.New$5();ba.LocalTemplatesLoaded=false;ba.TextHoleRE="\\${([^}]+)}";};bb=g.CheckedInput=bC.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,bb);bc=g.Elt=bC.Class({},I,bc);bc.TreeNode=function(bG,bH){var bI,bJ;function bK(bL){return bL[1];}bI=bi.Create(bH);return new bc.New$1({$:6,$0:bG},T.Map2Unit((bJ=o.map(function(bL){return L.Updates(bK(bL));},bG.Attrs),B.TreeReduce(T.Const(),T.Map2Unit,bJ)),bI.v),o.get(bG.Els,0),bI);};bc.New$1=bC.Ctor(function(bG,bH,bI,bJ){I.New.call(this,bG,bH);this.docNode$1=bG;this.updates$1=bH;this.elt=bI;this.rvUpdates=bJ;},bc);bd.Delay=function(bG){return function(bH){try{(bG(null))(bH);}catch(bI){bH.k({$:1,$0:bI});}};};bd.Bind=function(bG,bH){return bd.checkCancel(function(bI){bG(bj.New(function(bJ){var bK;if(bJ.$==0){bK=bJ.$0;bd.scheduler().Fork(function(){try{(bH(bK))(bI);}catch(bL){bI.k({$:1,$0:bL});}});}else bd.scheduler().Fork(function(){bI.k(bJ);});},bI.ct));});};bd.Zero=function(){bk.$cctor();return bk.Zero;};bd.Start=function(bG,bH){var bI,bJ;bI=(bJ=(bd.defCTS())[0],bH==null?bJ:bH.$0);bd.scheduler().Fork(function(){if(!bI.c)bG(bj.New(function(bK){if(bK.$==1)bd.UncaughtAsyncError(bK.$0);},bI));});};bd.Return=function(bG){return function(bH){bH.k({$:0,$0:bG});};};bd.checkCancel=function(bG){return function(bH){if(bH.ct.c)bd.cancel(bH);else bG(bH);};};bd.defCTS=function(){bk.$cctor();return bk.defCTS;};bd.UncaughtAsyncError=function(bG){bE.log("WebSharper: Uncaught asynchronous exception",bG);};bd.FromContinuations=function(bG){return function(bH){var bI;function bJ(bK){if(bI[0])f.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bI[0]=true;bd.scheduler().Fork(bK);}}bI=[false];bG(function(bK){bJ(function(){bH.k({$:0,$0:bK});});},function(bK){bJ(function(){bH.k({$:1,$0:bK});});},function(bK){bJ(function(){bH.k({$:2,$0:bK});});});};};bd.cancel=function(bG){bG.k({$:2,$0:new bt.New(bG.ct)});};bd.scheduler=function(){bk.$cctor();return bk.scheduler;};be.UseAnimations=function(){bm.$cctor();return bm.UseAnimations;};be.Actions=function(bG){return be.ConcatActions(o.choose(function(bH){return bH.$==1?{$:1,$0:bH.$0}:null;},bf.ToArray(bG.$0)));};be.Finalize=function(bG){o.iter(function(bH){if(bH.$==0)bH.$0();},bf.ToArray(bG.$0));};be.List=function(bG){return bG.$0;};be.ConcatActions=function(bG){var bH,bI,bJ,bK;bH=B.ofSeqNonCopying(bG);bI=o.length(bH);return bI===0?be.Const():bI===1?o.get(bH,0):(bJ=G.max(G.map(function(bL){return bL.Duration;},bH)),(bK=o.map(function(bL){return be.Prolong(bJ,bL);},bH),be.Def(bJ,function(bL){o.iter(function(bM){bM.Compute(bL);},bK);})));};be.Const=function(bG){return be.Def(0,function(){return bG;});};be.Prolong=function(bG,bH){var bI,bJ,bK;bI=bH.Compute;bJ=bH.Duration;bK=bv.Create(function(){return bH.Compute(bH.Duration);});return{Compute:function(bL){return bL>=bJ?bK.f():bI(bL);},Duration:bG};};be.Def=function(bG,bH){return{Compute:bH,Duration:bG};};bf.Append=function(bG,bH){return bG.$==0?bH:bH.$==0?bG:{$:2,$0:bG,$1:bH};};bf.Concat=function(bG){var bH;bH=B.ofSeqNonCopying(bG);return B.TreeReduce(bf.Empty(),bf.Append,bH);};bf.ToArray=function(bG){var bH;function bI(bJ){if(bJ.$==1)bH.push(bJ.$0);else if(bJ.$==2){bI(bJ.$0);bI(bJ.$1);}else if(bJ.$==3)o.iter(function(bK){bH.push(bK);},bJ.$0);}bH=[];bI(bG);return bH.slice(0);};bf.Empty=function(){bu.$cctor();return bu.Empty;};bg.BatchUpdatesEnabled=function(){ba.$cctor();return ba.BatchUpdatesEnabled;};bh.isBlank=function(bG){return _3.forall(bo.IsWhiteSpace,bG);};bi=g.Updates=bC.Class({},null,bi);bi.Create=function(bG){var bH;bH=null;bH=bi.New(bG,null,function(){var bI;bI=bH.s;return bI===null?(bI=z.Copy(bH.c()),bH.s=bI,z.WhenObsoleteRun(bI,function(){bH.s=null;}),bI):bI;});return bH;};bi.New=function(bG,bH,bI){return new bi({c:bG,s:bH,v:bI});};bj.New=function(bG,bH){return{k:bG,ct:bH};};bk.$cctor=function(){bk.$cctor=a.ignore;bk.noneCT=bl.New(false,[]);bk.scheduler=new bq.New();bk.defCTS=[new br.New()];bk.Zero=bd.Return();bk.GetCT=function(bG){bG.k({$:0,$0:bG.ct});};};bl.New=function(bG,bH){return{c:bG,r:bH};};bm.$cctor=function(){bm.$cctor=a.ignore;bm.CubicInOut=bs.Custom(function(bG){var bH;bH=bG*bG;return 3*bH-2*(bH*bG);});bm.UseAnimations=true;};bn.Filter=function(bG,bH){return new E.New$2(o.filter(bG,bn.ToArray(bH)));};bn.Intersect=function(bG,bH){var bI;bI=new E.New$2(bn.ToArray(bG));bI.IntersectWith(bn.ToArray(bH));return bI;};bn.ToArray=function(bG){var bH;bH=o.create(bG.get_Count(),void 0);bG.CopyTo(bH);return bH;};bn.Except=function(bG,bH){var bI;bI=new E.New$2(bn.ToArray(bH));bI.ExceptWith(bn.ToArray(bG));return bI;};bo.IsWhiteSpace=function(bG){return bG.match(new a.RegExp("\\s"))!==null;};U.TryParse=function(bG,bH,bI,bJ){var bK,bL;bK=+bG;bL=bK===bK-bK%1&&bK>=bH&&bK<=bI;bL?bJ.set(bK):void 0;return bL;};bp=g.DynamicAttrNode=bC.Class({NChanged:function(){return this.updates;},NGetChangeAnim:function(bG){return _8.get_Empty();},NGetEnterAnim:function(bG){return _8.get_Empty();},NGetExitAnim:function(bG){return _8.get_Empty();},NSync:function(bG){if(this.dirty){(this.push(bG))(this.value);this.dirty=false;}}},l,bp);bp.New=bC.Ctor(function(bG,bH){var bI;bI=this;this.push=bH;this.value=void 0;this.dirty=false;this.updates=T.Map(function(bJ){bI.value=bJ;bI.dirty=true;},bG);},bp);bq=bd.Scheduler=bC.Class({Fork:function(bG){var bH;bH=this;this.robin.push(bG);this.idle?(this.idle=false,a.setTimeout(function(){bH.tick();},0)):void 0;},tick:function(){var bG,bH,bI;bH=this;bI=bF.now();bG=true;while(bG)if(this.robin.length===0){this.idle=true;bG=false;}else{(this.robin.shift())();bF.now()-bI>40?(a.setTimeout(function(){bH.tick();},0),bG=false):void 0;}}},l,bq);bq.New=bC.Ctor(function(){this.idle=true;this.robin=[];},bq);br=e.CancellationTokenSource=bC.Class({},l,br);br.New=bC.Ctor(function(){this.c=false;this.pending=null;this.r=[];this.init=1;},br);bs=g.Easing=bC.Class({},l,bs);bs.Custom=function(bG){return new bs.New(bG);};bs.New=bC.Ctor(function(bG){this.transformTime=bG;},bs);bt=e.OperationCanceledException=bC.Class({},null,bt);bt.New=bC.Ctor(function(bG){bt.New$1.call(this,"The operation was canceled.",null,bG);},bt);bt.New$1=bC.Ctor(function(bG,bH,bI){this.message=bG;this.inner=bH;this.ct=bI;},bt);bu.$cctor=function(){bu.$cctor=a.ignore;bu.Empty={$:0};};bv.Create=function(bG){return by.New(false,bG,bv.forceLazy);};bv.forceLazy=function(){var bG;bG=this.v();this.c=true;this.v=bG;this.f=bv.cachedLazy;return bG;};bv.cachedLazy=function(){return this.v;};bw.DocChildren=function(bG){var bH;function bI(bJ){if(bJ!=null&&bJ.$==2)bI(bJ.$0.Current);else if(bJ!=null&&bJ.$==1)bH.push(bJ.$0.El);else if(bJ==null);else if(bJ!=null&&bJ.$==5)bH.push(bJ.$0);else if(bJ!=null&&bJ.$==4)bH.push(bJ.$0.Text);else if(bJ!=null&&bJ.$==6)o.iter(function(bK){if(bK.constructor===M)bI(bK);else bH.push(bK);},bJ.$0.Els);else{bI(bJ.$0);bI(bJ.$1);}}bH=[];bI(bG.Children);return{$:0,$0:B.ofSeqNonCopying(bH)};};bw.Children=function(bG,bH){var bI,bJ,bK;if(bH!=null&&bH.$==1){bK=[];bI=bH.$0[0].nextSibling;while(bI!==bH.$0[1]){bK.push(bI);bI=bI.nextSibling;}return{$:0,$0:bK};}else return{$:0,$0:o.init(bG.childNodes.length,(bJ=bG.childNodes,function(bL){return bJ[bL];}))};};bw.Except=function(bG,bH){var bI;bI=bG.$0;return{$:0,$0:o.filter(function(bJ){return o.forall(function(bK){return!(bJ===bK);},bI);},bH.$0)};};bw.Iter=function(bG,bH){o.iter(bG,bH.$0);};by.New=function(bG,bH,bI){return{c:bG,v:bH,f:bI};};bz.Clear=function(bG){bG.splice(0,o.length(bG));};bC.OnLoad(function(){c.Main();});}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
