function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){window.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE;a=window;b=a.WebSharperTerminalSample=a.WebSharperTerminalSample||{};c=b.Client=b.Client||{};d=a.StartupCode$WebSharper_JQueryTerminal_Tests$Client=a.StartupCode$WebSharper_JQueryTerminal_Tests$Client||{};e=a.WebSharper=a.WebSharper||{};f=e.Operators=e.Operators||{};g=e.UI=e.UI||{};h=g.Var=g.Var||{};i=e.Unchecked=e.Unchecked||{};j=a.System=a.System||{};k=j.Guid=j.Guid||{};l=e.Obj=e.Obj||{};m=e.List=e.List||{};n=m.T=m.T||{};o=e.Arrays=e.Arrays||{};p=g.AttrProxy=g.AttrProxy||{};q=e.JavaScript=e.JavaScript||{};r=q.JSModule=q.JSModule||{};s=g.Templating=g.Templating||{};t=s.Runtime=s.Runtime||{};u=t.Server=t.Server||{};v=u.Handler=u.Handler||{};w=u.TemplateInstance=u.TemplateInstance||{};x=a.WebSharper$JQueryTerminal$Tests_Templates=a.WebSharper$JQueryTerminal$Tests_Templates||{};y=g.ConcreteVar=g.ConcreteVar||{};z=g.Snap=g.Snap||{};A=g.AttrModule=g.AttrModule||{};B=g.Array=g.Array||{};C=e.Collections=e.Collections||{};D=C.Dictionary=C.Dictionary||{};E=C.HashSet=C.HashSet||{};F=t.Client=t.Client||{};G=e.Seq=e.Seq||{};H=q.Pervasives=q.Pervasives||{};I=g.Doc=g.Doc||{};J=g.Abbrev=g.Abbrev||{};K=J.Fresh=J.Fresh||{};L=g.Attrs=g.Attrs||{};M=a.Object;N=C.DictionaryUtil=C.DictionaryUtil||{};O=e.Enumerator=e.Enumerator||{};P=O.T=O.T||{};Q=a.EventTarget;R=a.Node;S=g.DomUtility=g.DomUtility||{};T=g.View=g.View||{};U=e.Numeric=e.Numeric||{};V=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};W=g.Docs=g.Docs||{};X=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};Y=J.Mailbox=J.Mailbox||{};Z=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};_0=g.DocElemNode=g.DocElemNode||{};_1=a.CharacterData;_2=e.Slice=e.Slice||{};_3=e.Strings=e.Strings||{};_4=g.Client=g.Client||{};_5=_4.Docs=_4.Docs||{};_6=_5.RunState=_5.RunState||{};_7=_5.NodeSet=_5.NodeSet||{};_8=g.An=g.An||{};_9=C.HashSetUtil=C.HashSetUtil||{};_=_4.Attrs=_4.Attrs||{};$=_.Dyn=_.Dyn||{};ba=a.StartupCode$WebSharper_UI$Doc_Client=a.StartupCode$WebSharper_UI$Doc_Client||{};bb=g.CheckedInput=g.CheckedInput||{};bc=g.Elt=g.Elt||{};bd=e.Concurrency=e.Concurrency||{};be=g.Anims=g.Anims||{};bf=g.AppendList=g.AppendList||{};bg=g.String=g.String||{};bh=g.Updates=g.Updates||{};bi=bd.AsyncBody=bd.AsyncBody||{};bj=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bk=bd.CT=bd.CT||{};bl=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bm=J.HashSet=J.HashSet||{};bn=e.Char=e.Char||{};bo=g.DynamicAttrNode=g.DynamicAttrNode||{};bp=bd.Scheduler=bd.Scheduler||{};bq=e.CancellationTokenSource=e.CancellationTokenSource||{};br=g.Easing=g.Easing||{};bs=e.OperationCanceledException=e.OperationCanceledException||{};bt=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bu=e.Lazy=e.Lazy||{};bv=_5.DomNodes=_5.DomNodes||{};bw=e.LazyExtensionsProxy=e.LazyExtensionsProxy||{};bx=bw.LazyRecord=bw.LazyRecord||{};by=e.Queue=e.Queue||{};bz=a.Math;bA=a.IntelliFactory;bB=bA&&bA.Runtime;bC=a.jQuery;bD=a.console;bE=a.Date;c.Main=function(){d.$cctor();return d.Main;};c.Help=function(bF){return bF==="help"?{$:1,$0:null}:null;};c.Template=function(bF){return bF==="template"?{$:1,$0:null}:null;};c.set_numOfTemplates=function(bF){d.$cctor();d.numOfTemplates=bF;};c.numOfTemplates=function(){d.$cctor();return d.numOfTemplates;};c.Clear=function(bF){return bF==="clear"?{$:1,$0:null}:null;};c.Switch=function(bF){return bF==="switch"?{$:1,$0:null}:null;};c.i2=function(bF,bG){if(bG==="asd")bF.echo("kek");else if(bG==="switch")bF.pop();else bF.echo("...");};c.intOpt=function(){d.$cctor();return d.intOpt;};c.Blank=function(bF){return bF===""?{$:1,$0:null}:null;};c.interpreter=function(){d.$cctor();return d.interpreter;};c.Opt=function(){d.$cctor();return d.Opt;};d.$cctor=function(){var bF,bG,bH,bI;d.$cctor=a.ignore;d.intOpt=(bF={},bF.name="No2",bF.prompt="+ ",bF);d.numOfTemplates=0;d.interpreter=function(bJ){var bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ;function b0(b1){a.alert(bN.Get());}return(bK=c.Help(bJ),bK!=null&&bK.$==1)?this.echo("Commands: help, clear, template"):(bL=c.Template(bJ),bL!=null&&bL.$==1)?(c.set_numOfTemplates(c.numOfTemplates()+1),bM="template"+a.String(c.numOfTemplates()),bN=h.Create$1(""),bO=(bP=(bQ=(bR=(bS=k.NewGuid(),a.String(bS)),(bT=new n({$:1,$0:{$:7,$0:"projname",$1:bN},$1:n.Empty}),[[null],bR,new n({$:1,$0:{$:3,$0:"eventprop",$1:p.Concat(m.ofArray([A.Handler("keypress",function(){return function(b1){return b1.stopPropagation();};}),A.Handler("keydown",function(){return function(b1){return b1.stopPropagation();};}),A.Handler("keyup",function(){return function(b1){return b1.stopPropagation();};}),A.Handler("input",function(){return function(b1){return b1.stopPropagation();};})]))},$1:bT})])),[bQ[0],bQ[1],new n({$:1,$0:(bU=bQ[0],{$:5,$0:"download",$1:true,$2:function(b1){return function(b2){return b0({Vars:bU[0],Target:b1,Event:b2});};}}),$1:bQ[2]})]),(bV=bP[0],(bW=v.CompleteHoles(bP[1],bP[2],[["projname",0]]),(bV[0]=new w.New(bW[1],x.form(bW[0])),bV[0])))).get_Doc(),this.echo("<div id=\""+bM+"\"></div>",{raw:true}),I.RunById(bM,bO)):(bX=c.Clear(bJ),bX!=null&&bX.$==1)?this.clear():(bY=c.Switch(bJ),bY!=null&&bY.$==1)?this.push(function(b1){return c.i2(this,b1);},c.intOpt()):(bZ=c.Blank(bJ),bZ!=null&&bZ.$==1)?this.echo(""):this.echo("Unknown command",{raw:true});};d.Opt=(bG={},bG.name="Terminal1",bG.prompt="> ",bG.greetings="Welcome to the Terminal Test Page! See 'help' for the list of commands.",bG.onInit=function(bJ){bJ.enable();return bJ.echo("Hey Dood, it's workin'!");},bG);d.Main=(bH=c.interpreter(),(bI=c.Opt(),void a.$("#body").terminal(bH,bI)));};f.FailWith=function(bF){throw a.Error(bF);};f.KeyValue=function(bF){return[bF.K,bF.V];};h.Create$1=function(bF){return new y.New(false,z.New({$:2,$0:bF,$1:[]}),bF);};i.Equals=function(bF,bG){var bH,bI,bJ,bK;if(bF===bG)return true;else{bH=typeof bF;if(bH=="object"){if(bF===null||bF===void 0||bG===null||bG===void 0)return false;else if("Equals"in bF)return bF.Equals(bG);else if(bF instanceof a.Array&&bG instanceof a.Array)return i.arrayEquals(bF,bG);else if(bF instanceof a.Date&&bG instanceof a.Date)return i.dateEquals(bF,bG);else{bI=[true];for(var bL in bF)if(function(bM){bI[0]=!bF.hasOwnProperty(bM)||bG.hasOwnProperty(bM)&&i.Equals(bF[bM],bG[bM]);return!bI[0];}(bL))break;if(bI[0]){for(var bM in bG)if(function(bN){bI[0]=!bG.hasOwnProperty(bN)||bF.hasOwnProperty(bN);return!bI[0];}(bM))break;}return bI[0];}}else return bH=="function"&&("$Func"in bF?bF.$Func===bG.$Func&&bF.$Target===bG.$Target:"$Invokes"in bF&&"$Invokes"in bG&&i.arrayEquals(bF.$Invokes,bG.$Invokes));}};i.Hash=function(bF){var bG;bG=typeof bF;return bG=="function"?0:bG=="boolean"?bF?1:0:bG=="number"?bF:bG=="string"?i.hashString(bF):bG=="object"?bF==null?0:bF instanceof a.Array?i.hashArray(bF):i.hashObject(bF):0;};i.arrayEquals=function(bF,bG){var bH,bI;if(o.length(bF)===o.length(bG)){bH=true;bI=0;while(bH&&bI<o.length(bF)){!i.Equals(o.get(bF,bI),o.get(bG,bI))?bH=false:void 0;bI=bI+1;}return bH;}else return false;};i.dateEquals=function(bF,bG){return bF.getTime()===bG.getTime();};i.hashString=function(bF){var bG,bH,bI;if(bF===null)return 0;else{bG=5381;for(bH=0,bI=bF.length-1;bH<=bI;bH++)bG=i.hashMix(bG,bF[bH].charCodeAt());return bG;}};i.hashArray=function(bF){var bG,bH,bI;bG=-34948909;for(bH=0,bI=o.length(bF)-1;bH<=bI;bH++)bG=i.hashMix(bG,i.Hash(o.get(bF,bH)));return bG;};i.hashObject=function(bF){var bG,bH;if("GetHashCode"in bF)return bF.GetHashCode();else{bG=[0];for(var bI in bF)if(function(bJ){bG[0]=i.hashMix(i.hashMix(bG[0],i.hashString(bJ)),i.Hash(bF[bJ]));return false;}(bI))break;return bG[0];}};i.hashMix=function(bF,bG){return(bF<<5)+bF+bG;};i.Compare=function(bF,bG){var bH,bI,bJ,bK,bL,bM;if(bF===bG)return 0;else{bI=typeof bF;switch(bI=="function"?1:bI=="boolean"?2:bI=="number"?2:bI=="string"?2:bI=="object"?3:0){case 0:return typeof bG=="undefined"?0:-1;break;case 1:return f.FailWith("Cannot compare function values.");break;case 2:return bF<bG?-1:1;break;case 3:if(bF===null)bJ=-1;else if(bG===null)bJ=1;else if("CompareTo"in bF)bJ=bF.CompareTo(bG);else if("CompareTo0"in bF)bJ=bF.CompareTo0(bG);else if(bF instanceof a.Array&&bG instanceof a.Array)bJ=i.compareArrays(bF,bG);else if(bF instanceof a.Date&&bG instanceof a.Date)bJ=i.compareDates(bF,bG);else{bK=[0];for(var bN in bF)if(function(bO){return!bF.hasOwnProperty(bO)?false:!bG.hasOwnProperty(bO)?(bK[0]=1,true):(bK[0]=i.Compare(bF[bO],bG[bO]),bK[0]!==0);}(bN))break;if(bK[0]===0){for(var bO in bG)if(function(bP){return!bG.hasOwnProperty(bP)?false:!bF.hasOwnProperty(bP)&&(bK[0]=-1,true);}(bO))break;}bJ=bK[0];}return bJ;break;}}};i.compareArrays=function(bF,bG){var bH,bI;if(o.length(bF)<o.length(bG))return -1;else if(o.length(bF)>o.length(bG))return 1;else{bH=0;bI=0;while(bH===0&&bI<o.length(bF)){bH=i.Compare(o.get(bF,bI),o.get(bG,bI));bI=bI+1;}return bH;}};i.compareDates=function(bF,bG){return i.Compare(bF.getTime(),bG.getTime());};k.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bF){var bG,bH;bG=bz.random()*16|0;bH=bF=="x"?bG:bG&3|8;return bH.toString(16);});};l=e.Obj=bB.Class({Equals:function(bF){return this===bF;},GetHashCode:function(){return -1;}},null,l);n=m.T=bB.Class({GetEnumerator:function(){return new P.New(this,null,function(bF){var bG;bG=bF.s;return bG.$==0?false:(bF.c=bG.$0,bF.s=bG.$1,true);},void 0);},GetEnumerator0:function(){return O.Get(this);}},null,n);n.Empty=new n({$:0});o.get=function(bF,bG){o.checkBounds(bF,bG);return bF[bG];};o.length=function(bF){return bF.dims===2?bF.length*bF.length:bF.length;};o.checkBounds=function(bF,bG){if(bG<0||bG>=bF.length)f.FailWith("Index was outside the bounds of the array.");};o.set=function(bF,bG,bH){o.checkBounds(bF,bG);bF[bG]=bH;};m.ofArray=function(bF){var bG,bH,bI;bG=n.Empty;for(bH=o.length(bF)-1,bI=0;bH>=bI;bH--)bG=new n({$:1,$0:o.get(bF,bH),$1:bG});return bG;};m.head=function(bF){return bF.$==1?bF.$0:m.listEmpty();};m.tail=function(bF){return bF.$==1?bF.$1:m.listEmpty();};m.listEmpty=function(){return f.FailWith("The input list was empty.");};p=g.AttrProxy=bB.Class({},null,p);p.Concat=function(bF){var bG;bG=B.ofSeqNonCopying(bF);return B.TreeReduce(L.EmptyAttr(),p.Append,bG);};p.Append=function(bF,bG){return L.AppendTree(bF,bG);};p.Handler=function(bF,bG){return p.HandlerImpl(bF,bG);};p.Create=function(bF,bG){return L.Static(function(bH){S.SetAttr(bH,bF,bG);});};p.HandlerImpl=function(bF,bG){return L.Static(function(bH){bH.addEventListener(bF,function(bI){return(bG(bH))(bI);},false);});};r.GetFieldValues=function(bF){var bG,bH;bG=[];for(var bI in bF)bG.push(bF[bI]);return bG;};h=g.Var=bB.Class({},l,h);h.New=bB.Ctor(function(){},h);v.CompleteHoles=function(bF,bG,bH){var bJ,bK,bL,bM,bN,bO;function bI(bP,bQ){var bR,bS,bT,bU;return bK.Contains(bP)?null:(bR=bQ===0?(bS=h.Create$1(""),[{$:7,$0:bP,$1:bS},bS]):bQ===1?(bT=h.Create$1(0),[{$:12,$0:bP,$1:bT},bT]):bQ===2?(bU=h.Create$1(false),[{$:8,$0:bP,$1:bU},bU]):f.FailWith("Invalid value type"),(bJ.set_Item(bP,bR[1]),{$:1,$0:bR[0]}));}bJ=new D.New$5();bK=new E.New$3();bL=O.Get(bG);try{while(bL.MoveNext()){bM=bL.Current();(bM.$==7?(bN=[bM.$0,F.Box(bM.$1)],true):bM.$==10?(bN=[bM.$0,F.Box(bM.$1)],true):bM.$==9?(bN=[bM.$0,F.Box(bM.$1)],true):bM.$==12?(bN=[bM.$0,F.Box(bM.$1)],true):bM.$==11?(bN=[bM.$0,F.Box(bM.$1)],true):bM.$==8&&(bN=[bM.$0,F.Box(bM.$1)],true))?(bO=bN[0],bK.Add(bO),bJ.set_Item(bO,bN[1])):void 0;}}finally{if("Dispose"in bL)bL.Dispose();}return[G.append(bG,o.choose(function(bP){return bI(bP[0],bP[1]);},bH)),{$:0,$0:bJ}];};w=u.TemplateInstance=bB.Class({get_Doc:function(){return this.doc;}},l,w);w.New=bB.Ctor(function(bF,bG){this.doc=bG;this.allVars=bF.$==0?bF.$0:f.FailWith("Should not happen");},w);x.form=function(bF){return bF?I.GetOrLoadTemplate("template",{$:1,$0:"form"},function(){return bC.parseHTML("<div class=\"form-class\">\n    <input type=\"text\" id=\"sample1\" placeholder=\"MyProject\" ws-var=\"ProjName\" ws-attr=\"EventProp\">\n    <div class=\"mdl-selectfield mdl-js-selectfield is-dirty\" id=\"plainSelect\" data-upgraded=\",MaterialSelectfield\">\n                            <select id=\"myselect\" name=\"myselect\" class=\"mdl-selectfield__select\" style=\"opacity: 0; z-index: -1;\">\n                                <option value=\"clientserverfsharp\">Client-Server Application F#\n                                </option><option value=\"spafsharp\">Single Page Application F#\n                                </option><option value=\"extensionfsharp\">Extension F#\n                                </option><option value=\"libraryfsharp\">Library F#\n                                </option><option value=\"offlinefsharp\">HTML Application F#\n                                </option><option value=\"owinfsharp\">Owin F#\n                                </option><option value=\"clientserverfsharp\">Client-Server Application C#\n                                </option><option value=\"spacsharp\">Single Page Application C#\n                                </option><option value=\"librarycsharp\">Library C#\n                                </option><option value=\"offlinecsharp\">HTML Application C#\n                            </option></select>\n                            <label class=\"mdl-selectfield__label\" for=\"myselect\">Available templates</label>\n                        <div class=\"mdl-selectfield__box\" tabindex=\"1\"><span tabindex=\"-1\" class=\"mdl-selectfield__arrow-down__container\"><span class=\"mdl-selectfield__arrow-down\" tabindex=\"-1\"></span></span><span class=\"mdl-selectfield__box-value\" tabindex=\"-1\">Client-Server Application F#\n                                </span></div><div class=\"mdl-selectfield__list-option-box\" tabindex=\"-1\"><ul tabindex=\"-1\"><li class=\"is-selected\" data-value=\"0\" tabindex=\"-1\">Client-Server Application F#\n                                </li><li class=\"\" data-value=\"1\" tabindex=\"-1\">Single Page Application F#\n                                </li><li class=\"\" data-value=\"2\" tabindex=\"-1\">Extension F#\n                                </li><li class=\"\" data-value=\"3\" tabindex=\"-1\">Library F#\n                                </li><li class=\"\" data-value=\"4\" tabindex=\"-1\">HTML Application F#\n                                </li><li class=\"\" data-value=\"5\" tabindex=\"-1\">Owin F#\n                                </li><li class=\"\" data-value=\"6\" tabindex=\"-1\">Client-Server Application C#\n                                </li><li class=\"\" data-value=\"7\" tabindex=\"-1\">Single Page Application C#\n                                </li><li class=\"\" data-value=\"8\" tabindex=\"-1\">Library C#\n                                </li><li class=\"\" data-value=\"9\" tabindex=\"-1\">HTML Application C#\n                            </li></ul></div></div>\n\n    <div class=\"mdl-selectfield mdl-js-selectfield is-dirty\" id=\"plainIdeSelect\" data-upgraded=\",MaterialSelectfield\">\n                            <select id=\"myselect\" name=\"myselect\" class=\"mdl-selectfield__select\" style=\"opacity: 0; z-index: -1;\">\n                                <option value=\"vs2017\">Visual Studio 2017\n                            </option></select>\n                            <label class=\"mdl-selectfield__label\" for=\"myselect\">Your IDE</label>\n                        <div class=\"mdl-selectfield__box\" tabindex=\"1\"><span tabindex=\"-1\" class=\"mdl-selectfield__arrow-down__container\"><span class=\"mdl-selectfield__arrow-down\" tabindex=\"-1\"></span></span><span class=\"mdl-selectfield__box-value\" tabindex=\"-1\">Visual Studio 2017\n                            </span></div><div class=\"mdl-selectfield__list-option-box\" tabindex=\"-1\"><ul tabindex=\"-1\"><li class=\"is-selected\" data-value=\"0\" tabindex=\"-1\">Visual Studio 2017\n                            </li></ul></div></div>\n\n    <div class=\"social-button-group\">\n                            <button class=\"mdl-button mdl-js-button mdl-button--raised mdl-button--colored dl-button\" data-upgraded=\",MaterialButton\" ws-onclick=\"Download\">\n                                Download\n                            </button>\n                        </div>\n</div>");},bF):I.PrepareTemplate("template",{$:1,$0:"form"},function(){return bC.parseHTML("<div class=\"form-class\">\n    <input type=\"text\" id=\"sample1\" placeholder=\"MyProject\" ws-var=\"ProjName\" ws-attr=\"EventProp\">\n    <div class=\"mdl-selectfield mdl-js-selectfield is-dirty\" id=\"plainSelect\" data-upgraded=\",MaterialSelectfield\">\n                            <select id=\"myselect\" name=\"myselect\" class=\"mdl-selectfield__select\" style=\"opacity: 0; z-index: -1;\">\n                                <option value=\"clientserverfsharp\">Client-Server Application F#\n                                </option><option value=\"spafsharp\">Single Page Application F#\n                                </option><option value=\"extensionfsharp\">Extension F#\n                                </option><option value=\"libraryfsharp\">Library F#\n                                </option><option value=\"offlinefsharp\">HTML Application F#\n                                </option><option value=\"owinfsharp\">Owin F#\n                                </option><option value=\"clientserverfsharp\">Client-Server Application C#\n                                </option><option value=\"spacsharp\">Single Page Application C#\n                                </option><option value=\"librarycsharp\">Library C#\n                                </option><option value=\"offlinecsharp\">HTML Application C#\n                            </option></select>\n                            <label class=\"mdl-selectfield__label\" for=\"myselect\">Available templates</label>\n                        <div class=\"mdl-selectfield__box\" tabindex=\"1\"><span tabindex=\"-1\" class=\"mdl-selectfield__arrow-down__container\"><span class=\"mdl-selectfield__arrow-down\" tabindex=\"-1\"></span></span><span class=\"mdl-selectfield__box-value\" tabindex=\"-1\">Client-Server Application F#\n                                </span></div><div class=\"mdl-selectfield__list-option-box\" tabindex=\"-1\"><ul tabindex=\"-1\"><li class=\"is-selected\" data-value=\"0\" tabindex=\"-1\">Client-Server Application F#\n                                </li><li class=\"\" data-value=\"1\" tabindex=\"-1\">Single Page Application F#\n                                </li><li class=\"\" data-value=\"2\" tabindex=\"-1\">Extension F#\n                                </li><li class=\"\" data-value=\"3\" tabindex=\"-1\">Library F#\n                                </li><li class=\"\" data-value=\"4\" tabindex=\"-1\">HTML Application F#\n                                </li><li class=\"\" data-value=\"5\" tabindex=\"-1\">Owin F#\n                                </li><li class=\"\" data-value=\"6\" tabindex=\"-1\">Client-Server Application C#\n                                </li><li class=\"\" data-value=\"7\" tabindex=\"-1\">Single Page Application C#\n                                </li><li class=\"\" data-value=\"8\" tabindex=\"-1\">Library C#\n                                </li><li class=\"\" data-value=\"9\" tabindex=\"-1\">HTML Application C#\n                            </li></ul></div></div>\n\n    <div class=\"mdl-selectfield mdl-js-selectfield is-dirty\" id=\"plainIdeSelect\" data-upgraded=\",MaterialSelectfield\">\n                            <select id=\"myselect\" name=\"myselect\" class=\"mdl-selectfield__select\" style=\"opacity: 0; z-index: -1;\">\n                                <option value=\"vs2017\">Visual Studio 2017\n                            </option></select>\n                            <label class=\"mdl-selectfield__label\" for=\"myselect\">Your IDE</label>\n                        <div class=\"mdl-selectfield__box\" tabindex=\"1\"><span tabindex=\"-1\" class=\"mdl-selectfield__arrow-down__container\"><span class=\"mdl-selectfield__arrow-down\" tabindex=\"-1\"></span></span><span class=\"mdl-selectfield__box-value\" tabindex=\"-1\">Visual Studio 2017\n                            </span></div><div class=\"mdl-selectfield__list-option-box\" tabindex=\"-1\"><ul tabindex=\"-1\"><li class=\"is-selected\" data-value=\"0\" tabindex=\"-1\">Visual Studio 2017\n                            </li></ul></div></div>\n\n    <div class=\"social-button-group\">\n                            <button class=\"mdl-button mdl-js-button mdl-button--raised mdl-button--colored dl-button\" data-upgraded=\",MaterialButton\" ws-onclick=\"Download\">\n                                Download\n                            </button>\n                        </div>\n</div>");});};y=g.ConcreteVar=bB.Class({Get:function(){return this.current;},get_View:function(){return this.view;},Set:function(bF){if(this.isConst)(function(bG){return bG("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bG){bD.log(bG);}));else{z.Obsolete(this.snap);this.current=bF;this.snap=z.New({$:2,$0:bF,$1:[]});}},UpdateMaybe:function(bF){var bG;bG=bF(this.Get());bG!=null&&bG.$==1?this.Set(bG.$0):void 0;}},h,y);y.New=bB.Ctor(function(bF,bG,bH){var bI;bI=this;h.New.call(this);this.isConst=bF;this.current=bH;this.snap=bG;this.view=function(){return bI.snap;};this.id=K.Int();},y);z.WhenRun=function(bF,bG,bH){var bI;bI=bF.s;bI==null?bH():bI!=null&&bI.$==2?(bI.$1.push(bH),bG(bI.$0)):bI!=null&&bI.$==3?(bI.$0.push(bG),bI.$1.push(bH)):bG(bI.$0);};z.Map=function(bF,bG){var bH,bI;bH=bG.s;return bH!=null&&bH.$==0?z.New({$:0,$0:bF(bH.$0)}):(bI=z.New({$:3,$0:[],$1:[]}),(z.When(bG,function(bJ){z.MarkDone(bI,bG,bF(bJ));},bI),bI));};z.Map3=function(bF,bG,bH,bI){var bJ,bK,bL,bM;function bN(bO){var bP,bQ,bR,bS;if(!(bP=bM.s,bP!=null&&bP.$==0||bP!=null&&bP.$==2)){bQ=z.ValueAndForever(bG);bR=z.ValueAndForever(bH);bS=z.ValueAndForever(bI);bQ!=null&&bQ.$==1?bR!=null&&bR.$==1?bS!=null&&bS.$==1?bQ.$0[1]&&bR.$0[1]&&bS.$0[1]?z.MarkForever(bM,bF(bQ.$0[0],bR.$0[0],bS.$0[0])):z.MarkReady(bM,bF(bQ.$0[0],bR.$0[0],bS.$0[0])):void 0:void 0:void 0;}}bJ=bG.s;bK=bH.s;bL=bI.s;return bJ!=null&&bJ.$==0?bK!=null&&bK.$==0?bL!=null&&bL.$==0?z.New({$:0,$0:bF(bJ.$0,bK.$0,bL.$0)}):z.Map3Opt1(bF,bJ.$0,bK.$0,bI):bL!=null&&bL.$==0?z.Map3Opt2(bF,bJ.$0,bL.$0,bH):z.Map3Opt3(bF,bJ.$0,bH,bI):bK!=null&&bK.$==0?bL!=null&&bL.$==0?z.Map3Opt4(bF,bK.$0,bL.$0,bG):z.Map3Opt5(bF,bK.$0,bG,bI):bL!=null&&bL.$==0?z.Map3Opt6(bF,bL.$0,bG,bH):(bM=z.New({$:3,$0:[],$1:[]}),(z.When(bG,bN,bM),z.When(bH,bN,bM),z.When(bI,bN,bM),bM));};z.Sequence=function(bF){var bG,bH,bI;function bJ(bK){var bL;if(bI[0]===0){bL=o.map(function(bM){var bN;bN=bM.s;return bN!=null&&bN.$==0?bN.$0:bN!=null&&bN.$==2?bN.$0:f.FailWith("value not found by View.Sequence");},bG);o.forall(function(bM){var bN;bN=bM.s;return bN!=null&&bN.$==0;},bG)?z.MarkForever(bH,bL):z.MarkReady(bH,bL);}else bI[0]--;}bG=o.ofSeq(bF);return bG.length==0?z.New({$:0,$0:[]}):(bH=z.New({$:3,$0:[],$1:[]}),(bI=[o.length(bG)-1],(o.iter(function(bK){z.When(bK,bJ,bH);},bG),bH)));};z.Map2=function(bF,bG,bH){var bI,bJ,bK;function bL(bM){var bN,bO,bP;if(!(bN=bK.s,bN!=null&&bN.$==0||bN!=null&&bN.$==2)){bO=z.ValueAndForever(bG);bP=z.ValueAndForever(bH);bO!=null&&bO.$==1?bP!=null&&bP.$==1?bO.$0[1]&&bP.$0[1]?z.MarkForever(bK,bF(bO.$0[0],bP.$0[0])):z.MarkReady(bK,bF(bO.$0[0],bP.$0[0])):void 0:void 0;}}bI=bG.s;bJ=bH.s;return bI!=null&&bI.$==0?bJ!=null&&bJ.$==0?z.New({$:0,$0:bF(bI.$0,bJ.$0)}):z.Map2Opt1(bF,bI.$0,bH):bJ!=null&&bJ.$==0?z.Map2Opt2(bF,bJ.$0,bG):(bK=z.New({$:3,$0:[],$1:[]}),(z.When(bG,bL,bK),z.When(bH,bL,bK),bK));};z.Map2Unit=function(bF,bG){var bH,bI,bJ;function bK(){var bL,bM,bN;if(!(bL=bJ.s,bL!=null&&bL.$==0||bL!=null&&bL.$==2)){bM=z.ValueAndForever(bF);bN=z.ValueAndForever(bG);bM!=null&&bM.$==1?bN!=null&&bN.$==1?bM.$0[1]&&bN.$0[1]?z.MarkForever(bJ,null):z.MarkReady(bJ,null):void 0:void 0;}}bH=bF.s;bI=bG.s;return bH!=null&&bH.$==0?bI!=null&&bI.$==0?z.New({$:0,$0:null}):bG:bI!=null&&bI.$==0?bF:(bJ=z.New({$:3,$0:[],$1:[]}),(z.When(bF,bK,bJ),z.When(bG,bK,bJ),bJ));};z.WhenObsoleteRun=function(bF,bG){var bH;bH=bF.s;bH==null?bG():bH!=null&&bH.$==2?bH.$1.push(bG):bH!=null&&bH.$==3?bH.$1.push(bG):void 0;};z.When=function(bF,bG,bH){var bI;bI=bF.s;bI==null?z.Obsolete(bH):bI!=null&&bI.$==2?(z.EnqueueSafe(bI.$1,bH),bG(bI.$0)):bI!=null&&bI.$==3?(bI.$0.push(bG),z.EnqueueSafe(bI.$1,bH)):bG(bI.$0);};z.MarkDone=function(bF,bG,bH){var bI;if(bI=bG.s,bI!=null&&bI.$==0)z.MarkForever(bF,bH);else z.MarkReady(bF,bH);};z.Map3Opt1=function(bF,bG,bH,bI){return z.Map(function(bJ){return bF(bG,bH,bJ);},bI);};z.Map3Opt2=function(bF,bG,bH,bI){return z.Map(function(bJ){return bF(bG,bJ,bH);},bI);};z.Map3Opt3=function(bF,bG,bH,bI){return z.Map2(function(bJ,bK){return bF(bG,bJ,bK);},bH,bI);};z.Map3Opt4=function(bF,bG,bH,bI){return z.Map(function(bJ){return bF(bJ,bG,bH);},bI);};z.Map3Opt5=function(bF,bG,bH,bI){return z.Map2(function(bJ,bK){return bF(bJ,bG,bK);},bH,bI);};z.Map3Opt6=function(bF,bG,bH,bI){return z.Map2(function(bJ,bK){return bF(bJ,bK,bG);},bH,bI);};z.ValueAndForever=function(bF){var bG;bG=bF.s;return bG!=null&&bG.$==0?{$:1,$0:[bG.$0,true]}:bG!=null&&bG.$==2?{$:1,$0:[bG.$0,false]}:null;};z.MarkForever=function(bF,bG){var bH,bI,bJ,bK;bH=bF.s;if(bH!=null&&bH.$==3){bF.s={$:0,$0:bG};bI=bH.$0;for(bJ=0,bK=o.length(bI)-1;bJ<=bK;bJ++)(o.get(bI,bJ))(bG);}else void 0;};z.MarkReady=function(bF,bG){var bH,bI,bJ,bK;bH=bF.s;if(bH!=null&&bH.$==3){bF.s={$:2,$0:bG,$1:bH.$1};bI=bH.$0;for(bJ=0,bK=o.length(bI)-1;bJ<=bK;bJ++)(o.get(bI,bJ))(bG);}else void 0;};z.Map2Opt1=function(bF,bG,bH){return z.Map(function(bI){return bF(bG,bI);},bH);};z.Map2Opt2=function(bF,bG,bH){return z.Map(function(bI){return bF(bI,bG);},bH);};z.Copy=function(bF){var bG,bH,bI;bG=bF.s;return bG==null?bF:bG!=null&&bG.$==2?(bH=z.New({$:2,$0:bG.$0,$1:[]}),(z.WhenObsolete(bF,bH),bH)):bG!=null&&bG.$==3?(bI=z.New({$:3,$0:[],$1:[]}),(z.When(bF,function(bJ){z.MarkDone(bI,bF,bJ);},bI),bI)):bF;};z.EnqueueSafe=function(bF,bG){var bH,bI,bJ,bK;bF.push(bG);if(bF.length%20===0){bH=bF.slice(0);by.Clear(bF);for(bI=0,bJ=o.length(bH)-1;bI<=bJ;bI++){bK=o.get(bH,bI);typeof bK=="object"?function(bL){if(bL.s)bF.push(bL);}(bK):function(bL){bF.push(bL);}(bK);}}else void 0;};z.WhenObsolete=function(bF,bG){var bH;bH=bF.s;bH==null?z.Obsolete(bG):bH!=null&&bH.$==2?z.EnqueueSafe(bH.$1,bG):bH!=null&&bH.$==3?z.EnqueueSafe(bH.$1,bG):void 0;};A.Handler=function(bF,bG){return L.Static(function(bH){bH.addEventListener(bF,function(bI){return(bG(bH))(bI);},false);});};A.OnAfterRender=function(bF){return new p({$:4,$0:bF});};A.Value=function(bF){function bG(bH){return{$:1,$0:bH};}return A.CustomValue(bF,a.id,function(bH){return bG(a.id(bH));});};A.Checked=function(bF){function bG(bH,bI){return!i.Equals(bF.Get(),bH.checked)?bF.Set(bH.checked):null;}return p.Concat([A.DynamicProp("checked",bF.get_View()),A.Handler("change",function(bH){return function(bI){return bG(bH,bI);};}),A.Handler("click",function(bH){return function(bI){return bG(bH,bI);};})]);};A.IntValue=function(bF){return A.CustomVar(bF,function(bG,bH){var bI;bI=bH.get_Input();return bG.value!==bI?void(bG.value=bI):null;},function(bG){var bH,bI,bJ;bH=bG.value;return{$:1,$0:bg.isBlank(bH)?(bG.checkValidity?bG.checkValidity():true)?new bb({$:2,$0:bH}):new bb({$:1,$0:bH}):(bI=(bJ=0,[U.TryParseInt32(bH,{get:function(){return bJ;},set:function(bK){bJ=bK;}}),bJ]),bI[0]?new bb({$:0,$0:bI[1],$1:bH}):new bb({$:1,$0:bH}))};});};A.IntValueUnchecked=function(bF){return A.CustomValue(bF,a.String,function(bG){var bH;return bg.isBlank(bG)?{$:1,$0:0}:(bH=+bG,bH!==bH>>0?null:{$:1,$0:bH});});};A.FloatValue=function(bF){return A.CustomVar(bF,function(bG,bH){var bI;bI=bH.get_Input();return bG.value!==bI?void(bG.value=bI):null;},function(bG){var bH,bI;bH=bG.value;return{$:1,$0:bg.isBlank(bH)?(bG.checkValidity?bG.checkValidity():true)?new bb({$:2,$0:bH}):new bb({$:1,$0:bH}):(bI=+bH,a.isNaN(bI)?new bb({$:1,$0:bH}):new bb({$:0,$0:bI,$1:bH}))};});};A.FloatValueUnchecked=function(bF){return A.CustomValue(bF,a.String,function(bG){var bH;return bg.isBlank(bG)?{$:1,$0:0}:(bH=+bG,a.isNaN(bH)?null:{$:1,$0:bH});});};A.Dynamic=function(bF,bG){return L.Dynamic(bG,function(bH){return function(bI){return S.SetAttr(bH,bF,bI);};});};A.CustomValue=function(bF,bG,bH){return A.CustomVar(bF,function(bI,bJ){bI.value=bG(bJ);},function(bI){return bH(bI.value);});};A.DynamicProp=function(bF,bG){return L.Dynamic(bG,function(bH){return function(bI){bH[bF]=bI;};});};A.CustomVar=function(bF,bG,bH){function bI(bK,bL){return bF.UpdateMaybe(function(bM){var bN,bO;bN=bH(bK);return bN!=null&&bN.$==1&&(!i.Equals(bN.$0,bM)&&(bO=[bN,bN.$0],true))?bO[0]:null;});}function bJ(bK,bL){var bM,bN;bM=bH(bK);return bM!=null&&bM.$==1&&(i.Equals(bM.$0,bL)&&(bN=bM.$0,true))?null:bG(bK,bL);}return p.Concat([A.Handler("change",function(bK){return function(bL){return bI(bK,bL);};}),A.Handler("input",function(bK){return function(bL){return bI(bK,bL);};}),A.Handler("keypress",function(bK){return function(bL){return bI(bK,bL);};}),A.DynamicCustom(function(bK){return function(bL){return bJ(bK,bL);};},bF.get_View())]);};A.DynamicCustom=function(bF,bG){return L.Dynamic(bG,bF);};B.ofSeqNonCopying=function(bF){var bG,bH;if(bF instanceof a.Array)return bF;else if(bF instanceof n)return o.ofList(bF);else if(bF===null)return[];else{bG=[];bH=O.Get(bF);try{while(bH.MoveNext())bG.push(bH.Current());return bG;}finally{if("Dispose"in bH)bH.Dispose();}}};B.TreeReduce=function(bF,bG,bH){var bI;function bJ(bK,bL){var bM,bN;return bL<=0?bF:bL===1&&(bK>=0&&bK<bI)?o.get(bH,bK):(bN=bL/2>>0,bG(bJ(bK,bN),bJ(bK+bN,bL-bN)));}bI=o.length(bH);return bJ(0,bI);};B.MapTreeReduce=function(bF,bG,bH,bI){var bJ;function bK(bL,bM){var bN,bO;return bM<=0?bG:bM===1&&(bL>=0&&bL<bJ)?bF(o.get(bI,bL)):(bO=bM/2>>0,bH(bK(bL,bO),bK(bL+bO,bM-bO)));}bJ=o.length(bI);return bK(0,bJ);};D=C.Dictionary=bB.Class({set_Item:function(bF,bG){this.set(bF,bG);},set:function(bF,bG){var bH,bI,bJ,bK;bH=this;bI=this.hash(bF);bJ=this.data[bI];bJ?(bK=o.tryFindIndex(function(bL){return bH.equals.apply(null,[(f.KeyValue(bL))[0],bF]);},bJ),bK==null?(this.count=this.count+1,bJ.push({K:bF,V:bG})):bJ[bK.$0]={K:bF,V:bG}):(this.count=this.count+1,this.data[bI]=new a.Array({K:bF,V:bG}));},ContainsKey:function(bF){var bG,bH;bG=this;bH=this.data[this.hash(bF)];return bH&&o.exists(function(bI){return bG.equals.apply(null,[(f.KeyValue(bI))[0],bF]);},bH);},TryGetValue:function(bF,bG){var bH,bI,bJ;bH=this;bI=this.data[this.hash(bF)];return bI&&(bJ=o.tryPick(function(bK){var bL;bL=f.KeyValue(bK);return bH.equals.apply(null,[bL[0],bF])?{$:1,$0:bL[1]}:null;},bI),bJ!=null&&bJ.$==1&&(bG.set(bJ.$0),true));},get_Item:function(bF){return this.get(bF);},get:function(bF){var bG,bH;bG=this;bH=this.data[this.hash(bF)];return bH?o.pick(function(bI){var bJ;bJ=f.KeyValue(bI);return bG.equals.apply(null,[bJ[0],bF])?{$:1,$0:bJ[1]}:null;},bH):N.notPresent();},GetEnumerator:function(){return O.Get0(this);},GetEnumerator0:function(){return O.Get0(o.concat(r.GetFieldValues(this.data)));}},l,D);D.New$5=bB.Ctor(function(){D.New$6.call(this,[],i.Equals,i.Hash);},D);D.New$6=bB.Ctor(function(bF,bG,bH){var bI,bJ;this.equals=bG;this.hash=bH;this.count=0;this.data=[];bI=O.Get(bF);try{while(bI.MoveNext()){bJ=bI.Current();this.set(bJ.K,bJ.V);}}finally{if("Dispose"in bI)bI.Dispose();}},D);E=C.HashSet=bB.Class({Add:function(bF){return this.add(bF);},Contains:function(bF){var bG;bG=this.data[this.hash(bF)];return bG==null?false:this.arrContains(bF,bG);},add:function(bF){var bG,bH;bG=this.hash(bF);bH=this.data[bG];return bH==null?(this.data[bG]=[bF],this.count=this.count+1,true):this.arrContains(bF,bH)?false:(bH.push(bF),this.count=this.count+1,true);},arrContains:function(bF,bG){var bH,bI,bJ,bK;bH=true;bI=0;bK=bG.length;while(bH&&bI<bK)if(this.equals.apply(null,[bG[bI],bF]))bH=false;else bI=bI+1;return!bH;},IntersectWith:function(bF){var bG,bH,bI,bJ,bK;bG=new E.New$4(bF,this.equals,this.hash);bH=_9.concat(this.data);for(bI=0,bJ=bH.length-1;bI<=bJ;bI++){bK=bH[bI];!bG.Contains(bK)?this.Remove(bK):void 0;}},get_Count:function(){return this.count;},CopyTo:function(bF){var bG,bH,bI,bJ;bG=0;bH=_9.concat(this.data);for(bI=0,bJ=bH.length-1;bI<=bJ;bI++)o.set(bF,bI,bH[bI]);},ExceptWith:function(bF){var bG;bG=O.Get(bF);try{while(bG.MoveNext())this.Remove(bG.Current());}finally{if("Dispose"in bG)bG.Dispose();}},Remove:function(bF){var bG;bG=this.data[this.hash(bF)];return bG==null?false:this.arrRemove(bF,bG)&&(this.count=this.count-1,true);},arrRemove:function(bF,bG){var bH,bI,bJ,bK;bH=true;bI=0;bK=bG.length;while(bH&&bI<bK)if(this.equals.apply(null,[bG[bI],bF])){bG.splice.apply(bG,[bI,1]);bH=false;}else bI=bI+1;return!bH;},GetEnumerator:function(){return O.Get(_9.concat(this.data));},GetEnumerator0:function(){return O.Get(_9.concat(this.data));}},l,E);E.New$3=bB.Ctor(function(){E.New$4.call(this,[],i.Equals,i.Hash);},E);E.New$4=bB.Ctor(function(bF,bG,bH){var bI;this.equals=bG;this.hash=bH;this.data=[];this.count=0;bI=O.Get(bF);try{while(bI.MoveNext())this.add(bI.Current());}finally{if("Dispose"in bI)bI.Dispose();}},E);E.New$2=bB.Ctor(function(bF){E.New$4.call(this,bF,i.Equals,i.Hash);},E);F.Box=a.id;o.choose=function(bF,bG){var bH,bI,bJ,bK;bH=[];for(bI=0,bJ=bG.length-1;bI<=bJ;bI++){bK=bF(bG[bI]);bK==null?void 0:bH.push(bK.$0);}return bH;};o.ofList=function(bF){var bG,bH;bH=[];bG=bF;while(!(bG.$==0)){bH.push(m.head(bG));bG=m.tail(bG);}return bH;};o.tryFindIndex=function(bF,bG){var bH,bI;bH=null;bI=0;while(bI<bG.length&&bH==null){bF(bG[bI])?bH={$:1,$0:bI}:void 0;bI=bI+1;}return bH;};o.exists=function(bF,bG){var bH,bI,bJ,bK;bH=false;bI=0;bK=o.length(bG);while(!bH&&bI<bK)if(bF(bG[bI]))bH=true;else bI=bI+1;return bH;};o.iter=function(bF,bG){var bH,bI;for(bH=0,bI=bG.length-1;bH<=bI;bH++)bF(bG[bH]);};o.map=function(bF,bG){var bH,bI,bJ;bH=new a.Array(bG.length);for(bI=0,bJ=bG.length-1;bI<=bJ;bI++)bH[bI]=bF(bG[bI]);return bH;};o.filter=function(bF,bG){var bH,bI,bJ;bH=[];for(bI=0,bJ=bG.length-1;bI<=bJ;bI++)if(bF(bG[bI]))bH.push(bG[bI]);return bH;};o.concat=function(bF){return a.Array.prototype.concat.apply([],o.ofSeq(bF));};o.tryPick=function(bF,bG){var bH,bI,bJ;bH=null;bI=0;while(bI<bG.length&&bH==null){bJ=bF(bG[bI]);bJ!=null&&bJ.$==1?bH=bJ:void 0;bI=bI+1;}return bH;};o.foldBack=function(bF,bG,bH){var bI,bJ,bK,bL,bM;bI=bH;bK=bG.length;for(bL=1,bM=bK;bL<=bM;bL++)bI=bF(bG[bK-bL],bI);return bI;};o.ofSeq=function(bF){var bG,bH;if(bF instanceof a.Array)return bF.slice();else if(bF instanceof n)return o.ofList(bF);else{bG=[];bH=O.Get(bF);try{while(bH.MoveNext())bG.push(bH.Current());return bG;}finally{if("Dispose"in bH)bH.Dispose();}}};o.pick=function(bF,bG){var bH;bH=o.tryPick(bF,bG);return bH==null?f.FailWith("KeyNotFoundException"):bH.$0;};o.forall=function(bF,bG){var bH,bI,bJ,bK;bH=true;bI=0;bK=o.length(bG);while(bH&&bI<bK)if(bF(bG[bI]))bI=bI+1;else bH=false;return bH;};o.create=function(bF,bG){var bH,bI,bJ;bH=new a.Array(bF);for(bI=0,bJ=bF-1;bI<=bJ;bI++)bH[bI]=bG;return bH;};o.init=function(bF,bG){var bH,bI,bJ;bF<0?f.FailWith("Negative size given."):null;bH=new a.Array(bF);for(bI=0,bJ=bF-1;bI<=bJ;bI++)bH[bI]=bG(bI);return bH;};G.append=function(bF,bG){return{GetEnumerator:function(){var bH,bI;bH=O.Get(bF);bI=[true];return new P.New(bH,null,function(bJ){var bK;return bJ.s.MoveNext()?(bJ.c=bJ.s.Current(),true):(bK=bJ.s,!i.Equals(bK,null)?bK.Dispose():void 0,bJ.s=null,bI[0]&&(bI[0]=false,bJ.s=O.Get(bG),bJ.s.MoveNext()?(bJ.c=bJ.s.Current(),true):(bJ.s.Dispose(),bJ.s=null,false)));},function(bJ){var bK;bK=bJ.s;!i.Equals(bK,null)?bK.Dispose():void 0;});}};};G.fold=function(bF,bG,bH){var bI,bJ;bI=bG;bJ=O.Get(bH);try{while(bJ.MoveNext())bI=bF(bI,bJ.Current());return bI;}finally{if("Dispose"in bJ)bJ.Dispose();}};G.iter=function(bF,bG){var bH;bH=O.Get(bG);try{while(bH.MoveNext())bF(bH.Current());}finally{if("Dispose"in bH)bH.Dispose();}};G.map=function(bF,bG){return{GetEnumerator:function(){var bH;bH=O.Get(bG);return new P.New(null,null,function(bI){return bH.MoveNext()&&(bI.c=bF(bH.Current()),true);},function(){bH.Dispose();});}};};G.max=function(bF){var bG,bH,bI;bG=O.Get(bF);try{if(!bG.MoveNext())G.seqEmpty();bH=bG.Current();while(bG.MoveNext()){bI=bG.Current();i.Compare(bI,bH)===1?bH=bI:void 0;}return bH;}finally{if("Dispose"in bG)bG.Dispose();}};G.forall=function(bF,bG){return!G.exists(function(bH){return!bF(bH);},bG);};G.seqEmpty=function(){return f.FailWith("The input sequence was empty.");};G.exists=function(bF,bG){var bH,bI;bH=O.Get(bG);try{bI=false;while(!bI&&bH.MoveNext())bI=bF(bH.Current());return bI;}finally{if("Dispose"in bH)bH.Dispose();}};H.NewFromSeq=function(bF){var bG,bH,bI;bG={};bH=O.Get(bF);try{while(bH.MoveNext()){bI=bH.Current();bG[bI[0]]=bI[1];}}finally{if("Dispose"in bH)bH.Dispose();}return bG;};I=g.Doc=bB.Class({},l,I);I.RunById=function(bF,bG){var bH;bH=S.Doc().getElementById(bF);i.Equals(bH,null)?f.FailWith("invalid id: "+bF):I.Run(bH,bG);};I.GetOrLoadTemplate=function(bF,bG,bH,bI){I.LoadLocalTemplates$1();I.PrepareTemplate(bF,bG,bH);return I.NamedTemplate(bF,bG,bI);};I.PrepareTemplate=function(bF,bG,bH){var bI,bJ,bK,bL,bM;if(!W.LoadedTemplateFile(bF).ContainsKey(bG==null?"":bG.$0)){bI=bH();for(bJ=0,bK=bI.length-1;bJ<=bK;bJ++){bL=o.get(bI,bJ);bM=bL.parentNode;i.Equals(bM,null)?void 0:bM.removeChild(bL);}I.PrepareTemplateStrict(bF,bG,bI);}};I.Run=function(bF,bG){var bH;I.LoadLocalTemplates$1();bH=bG.docNode;W.LinkElement(bF,bH);T.Sink(Y.StartProcessor(W.PerformAnimatedUpdate(W.CreateRunState(bF,bH),bH)),bG.updates);};I.LoadLocalTemplates$1=function(){if(!W.LocalTemplatesLoaded()){W.set_LocalTemplatesLoaded(true);I.LoadLocalTemplates("");}};I.NamedTemplate=function(bF,bG,bH){var bI,bJ;bI=(bJ=null,[W.LoadedTemplateFile(bF).TryGetValue(bG==null?"":bG.$0,{get:function(){return bJ;},set:function(bK){bJ=bK;}}),bJ]);return bI[0]?I.ChildrenTemplate(bI[1].cloneNode(true),bH):(bD.warn("Local template doesn't exist",bG),I.Empty());};I.PrepareTemplateStrict=function(bF,bG,bH){var bI,bJ;function bK(bW){var bY,bZ,b0,b1,b2,b3,b4,b5;function bX(b6){var b7;b7=bW.getAttribute(b6);b7===null?void 0:bW.setAttribute(b6,b7.toLowerCase());}bY=bW.attributes;bZ=[];b0=[];b1=[];for(b2=0,b3=bY.length-1;b2<=b3;b2++){b4=bY.item(b2);_3.StartsWith(b4.nodeName,"ws-on")&&b4.nodeName!=="ws-onafterrender"&&b4.nodeName!=="ws-on"?(bZ.push(b4.nodeName),b0.push(_2.string(b4.nodeName,{$:1,$0:"ws-on".length},null)+":"+b4.nodeValue.toLowerCase())):!_3.StartsWith(b4.nodeName,"ws-")&&(new a.RegExp(W.TextHoleRE())).test(b4.nodeValue)?(b4.nodeValue=(b5=new a.RegExp(W.TextHoleRE(),"g"),b4.nodeValue.replace(b5,function(b6,b7){return"${"+b7.toLowerCase()+"}";})),b1.push(b4.nodeName)):void 0;}!(b0.length==0)?bW.setAttribute("ws-on",_3.concat(" ",b0)):void 0;!(b1.length==0)?bW.setAttribute("ws-attr-holes",_3.concat(" ",b1)):void 0;bX("ws-hole");bX("ws-replace");bX("ws-attr");bX("ws-onafterrender");bX("ws-var");o.iter(function(b6){bW.removeAttribute(b6);},bZ);}function bL(bW){var bX,bY,bZ,b0,b1,b2;bX=null;bY=0;b0=bW.textContent;b1=new a.RegExp(W.TextHoleRE(),"g");while(bX=b1.exec(b0),bX!==null){bW.parentNode.insertBefore(a.document.createTextNode(_2.string(b0,{$:1,$0:bY},{$:1,$0:b1.lastIndex-o.get(bX,0).length-1})),bW);bY=b1.lastIndex;b2=a.document.createElement("span");b2.setAttribute("ws-replace",o.get(bX,1).toLowerCase());bW.parentNode.insertBefore(b2,bW);}b1.lastIndex=0;bW.textContent=_2.string(b0,{$:1,$0:bY},null);}function bM(bW,bX){function bY(bZ){S.IterSelector(bW,"["+bZ+"]",function(b0){var b1,b2;b1=(b2=null,[bX.TryGetValue(b0.getAttribute(bZ).toLowerCase(),{get:function(){return b2;},set:function(b3){b2=b3;}}),b2]);b1[0]?b0.setAttribute(bZ,b1[1]):void 0;});}bY("ws-hole");bY("ws-replace");bY("ws-attr");bY("ws-onafterrender");bY("ws-var");S.IterSelector(bW,"[ws-on]",function(bZ){bZ.setAttribute("ws-on",_3.concat(" ",o.map(function(b0){var b1,b2,b3;b1=_3.SplitChars(b0,[":"],1);b2=(b3=null,[bX.TryGetValue(o.get(b1,1),{get:function(){return b3;},set:function(b4){b3=b4;}}),b3]);return b2[0]?o.get(b1,0)+":"+b2[1]:b0;},_3.SplitChars(bZ.getAttribute("ws-on"),[" "],1))));});return S.IterSelector(bW,"[ws-attr-holes]",function(bZ){var b0,b1,b2;b0=_3.SplitChars(bZ.getAttribute("ws-attr-holes"),[" "],1);for(b1=0,b2=b0.length-1;b1<=b2;b1++)(function(){var b3;function b4(b5,b6){var b7;b7=f.KeyValue(b6);return b5.replace(new a.RegExp("\\${"+b7[0]+"}","ig"),"${"+b7[1]+"}");}b3=o.get(b0,b1);return bZ.setAttribute(b3,(((bB.Curried3(G.fold))(b4))(bZ.getAttribute(b3)))(bX));}());});}function bN(bW,bX){var bY,bZ,b0,b1,b2;bK(bX);bY=bX.nodeName.toLowerCase();bZ=bW.querySelector("[ws-attr="+bY+"]");if(i.Equals(bZ,null))return bD.warn("Filling non-existent attr hole",bY);else{bZ.removeAttribute("ws-attr");for(b0=0,b1=bX.attributes.length-1;b0<=b1;b0++){b2=bX.attributes.item(b0);b2.name==="class"&&bZ.hasAttribute("class")?bZ.setAttribute("class",bZ.getAttribute("class")+" "+b2.nodeValue):bZ.setAttribute(b2.name,b2.nodeValue);}return;}}function bO(bW,bX){function bY(bZ){S.IterSelector(bW,"["+bZ+"]",function(b0){if(!bX.Contains(b0.getAttribute(bZ)))b0.removeAttribute(bZ);});}bY("ws-attr");bY("ws-onafterrender");bY("ws-var");S.IterSelector(bW,"[ws-hole]",function(bZ){if(!bX.Contains(bZ.getAttribute("ws-hole"))){bZ.removeAttribute("ws-hole");while(bZ.hasChildNodes())bZ.removeChild(bZ.lastChild);}});S.IterSelector(bW,"[ws-replace]",function(bZ){if(!bX.Contains(bZ.getAttribute("ws-replace")))bZ.parentNode.removeChild(bZ);});S.IterSelector(bW,"[ws-on]",function(bZ){bZ.setAttribute("ws-on",_3.concat(" ",o.filter(function(b0){return bX.Contains(o.get(_3.SplitChars(b0,[":"],1),1));},_3.SplitChars(bZ.getAttribute("ws-on"),[" "],1))));});return S.IterSelector(bW,"[ws-attr-holes]",function(bZ){var b0,b1,b2,b3,b4;b0=_3.SplitChars(bZ.getAttribute("ws-attr-holes"),[" "],1);for(b1=0,b2=b0.length-1;b1<=b2;b1++){b3=o.get(b0,b1);bZ.setAttribute(b3,(b4=new a.RegExp(W.TextHoleRE(),"g"),bZ.getAttribute(b3).replace(b4,function(b5,b6){return bX.Contains(b6)?b5:"";})));}});}function bP(bW,bX){var bY;bY=bW.querySelector("[ws-replace]");return i.Equals(bY,null)?(bD.warn("Filling non-existent text hole",bG),null):(bY.parentNode.replaceChild(new a.Text(bX),bY),{$:1,$0:bY.getAttribute("ws-replace")});}function bQ(bW,bX,bY){while(true)if(bW.hasChildNodes())bY=bX.insertBefore(bW.lastChild,bY);else return null;}function bR(bW,bX,bY){var bZ,b0,b1,b2,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn;function b3(co){}while(true)switch(bW){case 0:b4=_2.string(bX.nodeName,{$:1,$0:3},null).toLowerCase();b5=(bZ=b4.indexOf("."),bZ===-1?[bF,b4]:[_2.string(b4,null,{$:1,$0:bZ-1}),_2.string(b4,{$:1,$0:bZ+1},null)]);b6=b5[1];b7=b5[0];if(!W.LoadedTemplates().ContainsKey(b7))return bD.warn("Instantiating non-loaded template",b6);else{b8=W.LoadedTemplates().get_Item(b7);if(!b8.ContainsKey(b6))return bD.warn("Instantiating non-loaded template",b6);else{b9=b8.get_Item(b6);b_=b9.cloneNode(true);b$=new E.New$3();ca=new D.New$5();cb=bX.attributes;for(cc=0,cd=cb.length-1;cc<=cd;cc++){ce=cb.item(cc).name.toLowerCase();ca.set_Item(ce,(cf=cb.item(cc).nodeValue,cf===""?ce:cf.toLowerCase()));!b$.Add(ce)?bD.warn("Hole mapped twice",ce):void 0;}for(cg=0,ch=bX.childNodes.length-1;cg<=ch;cg++){ci=bX.childNodes[cg];i.Equals(ci.nodeType,R.ELEMENT_NODE)?!b$.Add(ci.nodeName.toLowerCase())?bD.warn("Hole filled twice",b6):void 0:void 0;}cj=bX.childNodes.length===1&&i.Equals(bX.firstChild.nodeType,R.TEXT_NODE);if(cj){b1=bP(b_,bX.firstChild.textContent);((function(co){return function(cp){if(cp!=null)co(cp.$0);};}((b2=function(co){return function(cp){return co.Add(cp);};}(b$),function(co){return b3(b2(co));})))(b1));}bO(b_,b$);if(!cj){for(ck=0,cl=bX.childNodes.length-1;ck<=cl;ck++){cm=bX.childNodes[ck];i.Equals(cm.nodeType,R.ELEMENT_NODE)?cm.hasAttributes()?bN(b_,cm):bS(b_,cm):void 0;}}bM(b_,ca);(((function(co){function cp(cq,cr){return bQ(co,cq,cr);}return function(cq){return function(cr){return cp(cq,cr);};};}(b_))(bX.parentNode))(bX));bX.parentNode.removeChild(bX);return;}}break;case 1:if(bY!==null){cn=bY.nextSibling;if(i.Equals(bY.nodeType,R.TEXT_NODE))bL(bY);else if(i.Equals(bY.nodeType,R.ELEMENT_NODE))bU(bY);bY=cn;}else return null;break;}}function bS(bW,bX){var bY,b0,b1;function bZ(b2,b3){var b4,b5,b6;if(b0==="title"&&bX.hasChildNodes()){b4=bC.parseHTML(bX.textContent);bX.removeChild(bX.firstChild);for(b5=0,b6=b4.length-1;b5<=b6;b5++)bX.appendChild(o.get(b4,b5));}else null;bU(bX);return bQ(bX,b2,b3);}b0=bX.nodeName.toLowerCase();S.IterSelector(bW,"[ws-attr-holes]",function(b2){var b3,b4,b5,b6,b7;b3=_3.SplitChars(b2.getAttribute("ws-attr-holes"),[" "],1);for(b4=0,b5=b3.length-1;b4<=b5;b4++){b6=o.get(b3,b4);b2.setAttribute(b6,(b7=new a.RegExp("\\${"+b0+"}","ig"),b2.getAttribute(b6).replace(b7,bX.textContent)));}});b1=bW.querySelector("[ws-hole="+b0+"]");if(i.Equals(b1,null)){bY=bW.querySelector("[ws-replace="+b0+"]");return i.Equals(bY,null)?null:(bZ(bY.parentNode,bY),void bY.parentNode.removeChild(bY));}else{while(b1.hasChildNodes())b1.removeChild(b1.lastChild);b1.removeAttribute("ws-hole");return bZ(b1,null);}}function bT(bW){return bR(0,bW);}function bU(bW){var bX,bY;if(_3.StartsWith(bW.nodeName.toLowerCase(),"ws-")&&!bW.hasAttribute("ws-template"))bT(bW);else{bK(bW);bX=bW.getAttribute("ws-template");if(bX===null){bY=bW.getAttribute("ws-children-template");if(bY===null)bV(bW,bW.firstChild);else{bW.removeAttribute("ws-children-template");I.PrepareTemplate(bF,{$:1,$0:bY},function(){return S.ChildrenArray(bW);});while(bW.hasChildNodes())bW.removeChild(bW.lastChild);}}else I.PrepareSingleTemplate(bF,{$:1,$0:bX},bW);}}function bV(bW,bX){return bR(1,bW,bX);}bI=I.FakeRoot(bH);bJ=(bG==null?"":bG.$0).toLowerCase();W.LoadedTemplateFile(bF).set_Item(bJ,bI);o.length(bH)>0?bV(bI,o.get(bH,0)):void 0;};I.LoadLocalTemplates=function(bF){var bG;bG=W.LoadedTemplateFile("");bG.count>0?W.LoadedTemplates().set_Item(bF,bG):(function(){var bH,bI,bJ,bK;while(true){bH=a.document.querySelector("[ws-template]");if(i.Equals(bH,null)){bI=a.document.querySelector("[ws-children-template]");if(i.Equals(bI,null))return null;else{bJ=bI.getAttribute("ws-children-template");bI.removeAttribute("ws-children-template");I.PrepareTemplate(bF,{$:1,$0:bJ},function(bL){return function(){return S.ChildrenArray(bL);};}(bI));}}else{bK=bH.getAttribute("ws-template");I.PrepareSingleTemplate(bF,{$:1,$0:bK},bH);}}}(),W.LoadedTemplates().set_Item("",W.LoadedTemplateFile(bF)));};I.ChildrenTemplate=function(bF,bG){var bH,bI,bJ,bK,bL,bO,bP,bQ,bR,bS,bT,bU;function bM(bV,bW){var bX,bY,bZ;bX=L.Insert(bV,bW);bP.push(L.Updates(bX));bQ.push([bV,bX]);bY=bB.GetOptional(bX.OnAfterRender);return bY==null?null:(bZ=bY.$0,void bR.push(function(){bZ(bV);}));}function bN(bV){var bW,bX;bW=(bX=null,[bS.TryGetValue(bV,{get:function(){return bX;},set:function(bY){bX=bY;}}),bX]);return bW[0]?bW[1].$==0?{$:1,$0:bW[1].$1}:bW[1].$==1?{$:1,$0:I.TextNode(bW[1].$1)}:bW[1].$==2?{$:1,$0:I.TextView(bW[1].$1)}:bW[1].$==7?{$:1,$0:I.TextView(bW[1].$1.get_View())}:bW[1].$==8?{$:1,$0:I.TextView(T.Map(a.String,bW[1].$1.get_View()))}:bW[1].$==9?{$:1,$0:I.TextView(T.Map(function(bY){return bY.get_Input();},bW[1].$1.get_View()))}:bW[1].$==10?{$:1,$0:I.TextView(T.Map(a.String,bW[1].$1.get_View()))}:bW[1].$==11?{$:1,$0:I.TextView(T.Map(function(bY){return bY.get_Input();},bW[1].$1.get_View()))}:bW[1].$==12?{$:1,$0:I.TextView(T.Map(a.String,bW[1].$1.get_View()))}:(bD.warn("Content hole filled with attribute data",bV),null):null;}bO=[];bP=[];bQ=[];bR=[];bS=new D.New$5();bT=O.Get(bG);try{while(bT.MoveNext()){bU=bT.Current();bS.set_Item(bU.$0,bU);}}finally{if("Dispose"in bT)bT.Dispose();}bH=S.ChildrenArray(bF);S.IterSelector(bF,"[ws-hole]",function(bV){var bW,bX,bY;bY=bV.getAttribute("ws-hole");bV.removeAttribute("ws-hole");while(bV.hasChildNodes())bV.removeChild(bV.lastChild);bW=bN(bY);bW!=null&&bW.$==1?(bX=bW.$0,W.LinkElement(bV,bX.docNode),bO.push(_0.New(L.Empty(bV),bX.docNode,null,bV,K.Int(),null)),bP.push(bX.updates)):void 0;});S.IterSelector(bF,"[ws-replace]",function(bV){var bW,bX,bY,bZ,b0,b1;bW=bN(bV.getAttribute("ws-replace"));bW!=null&&bW.$==1?(bX=bW.$0,bY=bV.parentNode,bZ=a.document.createTextNode(""),bY.replaceChild(bZ,bV),b0=W.InsertBeforeDelim(bZ,bX.docNode),b1=o.tryFindIndex(function(b2){return bV===b2;},bH),b1==null?void 0:o.set(bH,b1.$0,bX.docNode),bO.push(_0.New(L.Empty(bY),bX.docNode,{$:1,$0:[b0,bZ]},bY,K.Int(),null)),bP.push(bX.updates)):void 0;});S.IterSelector(bF,"[ws-attr]",function(bV){var bW,bX,bY;bW=bV.getAttribute("ws-attr");bV.removeAttribute("ws-attr");bX=(bY=null,[bS.TryGetValue(bW,{get:function(){return bY;},set:function(bZ){bY=bZ;}}),bY]);bX[0]?bX[1].$==3?bM(bV,bX[1].$1):bD.warn("Attribute hole filled with non-attribute data",bW):void 0;});S.IterSelector(bF,"[ws-on]",function(bV){bM(bV,p.Concat(o.choose(function(bW){var bX,bY,bZ;bX=_3.SplitChars(bW,[":"],1);bY=(bZ=null,[bS.TryGetValue(o.get(bX,1),{get:function(){return bZ;},set:function(b0){bZ=b0;}}),bZ]);return bY[0]?bY[1].$==4?{$:1,$0:A.Handler(o.get(bX,0),bY[1].$1)}:bY[1].$==5?{$:1,$0:p.Handler(o.get(bX,0),bY[1].$2)}:(bD.warn("Event hole on"+o.get(bX,0)+" filled with non-event data",o.get(bX,1)),null):null;},_3.SplitChars(bV.getAttribute("ws-on"),[" "],1))));bV.removeAttribute("ws-on");});S.IterSelector(bF,"[ws-onafterrender]",function(bV){var bW,bX,bY;bW=bV.getAttribute("ws-onafterrender");bX=(bY=null,[bS.TryGetValue(bW,{get:function(){return bY;},set:function(bZ){bY=bZ;}}),bY]);bX[0]?bX[1].$==6?(bV.removeAttribute("ws-onafterrender"),bM(bV,A.OnAfterRender(bX[1].$1))):bD.warn("onafterrender hole filled with non-onafterrender data",bW):void 0;});S.IterSelector(bF,"[ws-var]",function(bV){var bW,bX,bY;bW=bV.getAttribute("ws-var");bV.removeAttribute("ws-var");bX=(bY=null,[bS.TryGetValue(bW,{get:function(){return bY;},set:function(bZ){bY=bZ;}}),bY]);bX[0]?bX[1].$==7?bM(bV,A.Value(bX[1].$1)):bX[1].$==8?bM(bV,A.Checked(bX[1].$1)):bX[1].$==9?bM(bV,A.IntValue(bX[1].$1)):bX[1].$==10?bM(bV,A.IntValueUnchecked(bX[1].$1)):bX[1].$==11?bM(bV,A.FloatValue(bX[1].$1)):bX[1].$==12?bM(bV,A.FloatValueUnchecked(bX[1].$1)):bD.warn("Var hole filled with non-Var data",bW):void 0;});S.IterSelector(bF,"[ws-attr-holes]",function(bV){var bW,bX,bY,bZ;bW=new a.RegExp(W.TextHoleRE(),"g");bX=_3.SplitChars(bV.getAttribute("ws-attr-holes"),[" "],1);bV.removeAttribute("ws-attr-holes");for(bY=0,bZ=bX.length-1;bY<=bZ;bY++)(function(){var b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca;b9=o.get(bX,bY);b_=bV.getAttribute(b9);b0=null;b1=0;b$=[];while(b0=bW.exec(b_),b0!==null){ca=_2.string(b_,{$:1,$0:b1},{$:1,$0:bW.lastIndex-o.get(b0,0).length-1});b1=bW.lastIndex;b$.push([ca,o.get(b0,1)]);}b3=_2.string(b_,{$:1,$0:b1},null);bW.lastIndex=0;b4=o.foldBack(function(cb,cc){return(function(cd){var ce,cf;ce=cd[0];cf=cd[1];return function(cg){var ch,ci,cj,ck,cl;ch=cg[0];ci=cg[1];cj=(ck=(cl=null,[bS.TryGetValue(cf,{get:function(){return cl;},set:function(cm){cl=cm;}}),cl]),ck[0]?ck[1].$==1?{$:0,$0:ck[1].$1}:ck[1].$==2?{$:1,$0:ck[1].$1}:ck[1].$==7?{$:1,$0:ck[1].$1.get_View()}:ck[1].$==8?{$:1,$0:T.Map(a.String,ck[1].$1.get_View())}:ck[1].$==9?{$:1,$0:T.Map(function(cm){return cm.get_Input();},ck[1].$1.get_View())}:ck[1].$==10?{$:1,$0:T.Map(a.String,ck[1].$1.get_View())}:ck[1].$==11?{$:1,$0:T.Map(function(cm){return cm.get_Input();},ck[1].$1.get_View())}:ck[1].$==12?{$:1,$0:T.Map(a.String,ck[1].$1.get_View())}:(bD.warn("Attribute value hole filled with non-text data",cf),{$:0,$0:""}):{$:0,$0:""});return cj.$==1?[ce,new n({$:1,$0:ch===""?cj.$0:T.Map(function(cm){return cm+ch;},cj.$0),$1:ci})]:[ce+cj.$0+ch,ci];};}(cb))(cc);},b$,[b3,n.Empty]);return bM(bV,b4[1].$==1?b4[1].$1.$==1?b4[1].$1.$1.$==1?b4[1].$1.$1.$1.$==0?(b5=b4[0],A.Dynamic(b9,T.Map3(function(cb,cc,cd){return b5+cb+cc+cd;},b4[1].$0,b4[1].$1.$0,b4[1].$1.$1.$0))):(b6=b4[0],A.Dynamic(b9,T.Map(function(cb){return b6+_3.concat("",cb);},T.Sequence(b4[1])))):(b7=b4[0],A.Dynamic(b9,T.Map2(function(cb,cc){return b7+cb+cc;},b4[1].$0,b4[1].$1.$0))):b4[0]===""?A.Dynamic(b9,b4[1].$0):(b8=b4[0],A.Dynamic(b9,T.Map(function(cb){return b8+cb;},b4[1].$0))):p.Create(b9,b4[0]));}());});bI=bB.DeleteEmptyFields({Els:bH,Dirty:true,Holes:bO,Attrs:bQ,Render:(bJ=bR.length==0?null:{$:1,$0:function(bV){o.iter(function(bW){bW(bV);},bR);}},bJ?bJ.$0:void 0)},["Render"]);bK=B.TreeReduce(T.Const(),T.Map2Unit,bP);return!i.Equals(bH,null)&&bH.length===1&&(o.get(bH,0)instanceof R&&(i.Equals(o.get(bH,0).nodeType,R.ELEMENT_NODE)&&(bL=o.get(bH,0),true)))?bc.TreeNode(bI,bK):I.Mk({$:6,$0:bI},bK);};I.Empty=function(){return I.Mk(null,T.Const());};I.PrepareSingleTemplate=function(bF,bG,bH){var bI,bJ,bK;bH.removeAttribute("ws-template");bI=bH.getAttribute("ws-replace");bI===null?void 0:(bH.removeAttribute("ws-replace"),bJ=bH.parentNode,i.Equals(bJ,null)?void 0:(bK=a.document.createElement(bH.tagName),bK.setAttribute("ws-replace",bI),bJ.replaceChild(bK,bH)));I.PrepareTemplateStrict(bF,bG,[bH]);};I.FakeRoot=function(bF){var bG,bH,bI;bG=a.document.createElement("div");for(bH=0,bI=bF.length-1;bH<=bI;bH++)bG.appendChild(o.get(bF,bH));return bG;};I.TextNode=function(bF){return I.Mk({$:5,$0:S.CreateText(bF)},T.Const());};I.TextView=function(bF){var bG;bG=W.CreateTextNode();return I.Mk({$:4,$0:bG},T.Map(function(bH){W.UpdateTextNode(bG,bH);},bF));};I.Mk=function(bF,bG){return new I.New(bF,bG);};I.New=bB.Ctor(function(bF,bG){this.docNode=bF;this.updates=bG;},I);K.Int=function(){K.set_counter(K.counter()+1);return K.counter();};K.set_counter=function(bF){Z.$cctor();Z.counter=bF;};K.counter=function(){Z.$cctor();return Z.counter;};L.Static=function(bF){return new p({$:3,$0:bF});};L.EmptyAttr=function(){V.$cctor();return V.EmptyAttr;};L.AppendTree=function(bF,bG){var bH;return bF===null?bG:bG===null?bF:(bH=new p({$:2,$0:bF,$1:bG}),(L.SetFlags(bH,L.Flags(bF)|L.Flags(bG)),bH));};L.SetFlags=function(bF,bG){bF.flags=bG;};L.Flags=function(bF){return bF!==null&&bF.hasOwnProperty("flags")?bF.flags:0;};L.Insert=function(bF,bG){var bH,bI,bJ;function bK(bL){if(!(bL===null))if(bL!=null&&bL.$==1)bH.push(bL.$0);else if(bL!=null&&bL.$==2){bK(bL.$0);bK(bL.$1);}else if(bL!=null&&bL.$==3)bL.$0(bF);else if(bL!=null&&bL.$==4)bI.push(bL.$0);}bH=[];bI=[];bK(bG);bJ=bH.slice(0);return $.New(bF,L.Flags(bG),bJ,bI.length===0?null:{$:1,$0:function(bL){G.iter(function(bM){bM(bL);},bI);}});};L.Updates=function(bF){return B.MapTreeReduce(function(bG){return bG.NChanged();},T.Const(),T.Map2Unit,bF.DynNodes);};L.Empty=function(bF){return $.New(bF,0,[],null);};L.HasChangeAnim=function(bF){var bG;bG=4;return(bF.DynFlags&bG)===bG;};L.GetChangeAnim=function(bF){return L.GetAnim(bF,function(bG,bH){return bG.NGetChangeAnim(bH);});};L.HasEnterAnim=function(bF){var bG;bG=1;return(bF.DynFlags&bG)===bG;};L.GetEnterAnim=function(bF){return L.GetAnim(bF,function(bG,bH){return bG.NGetEnterAnim(bH);});};L.HasExitAnim=function(bF){var bG;bG=2;return(bF.DynFlags&bG)===bG;};L.GetExitAnim=function(bF){return L.GetAnim(bF,function(bG,bH){return bG.NGetExitAnim(bH);});};L.Dynamic=function(bF,bG){return new p({$:1,$0:new bo.New(bF,bG)});};L.GetAnim=function(bF,bG){return _8.Concat(o.map(function(bH){return bG(bH,bF.DynElem);},bF.DynNodes));};L.Sync=function(bF,bG){o.iter(function(bH){bH.NSync(bF);},bG.DynNodes);};N.notPresent=function(){return f.FailWith("The given key was not present in the dictionary.");};O.Get=function(bF){return bF instanceof a.Array?O.ArrayEnumerator(bF):i.Equals(typeof bF,"string")?O.StringEnumerator(bF):bF.GetEnumerator();};O.ArrayEnumerator=function(bF){return new P.New(0,null,function(bG){var bH;bH=bG.s;return bH<o.length(bF)&&(bG.c=o.get(bF,bH),bG.s=bH+1,true);},void 0);};O.StringEnumerator=function(bF){return new P.New(0,null,function(bG){var bH;bH=bG.s;return bH<bF.length&&(bG.c=bF[bH],bG.s=bH+1,true);},void 0);};O.Get0=function(bF){return bF instanceof a.Array?O.ArrayEnumerator(bF):i.Equals(typeof bF,"string")?O.StringEnumerator(bF):"GetEnumerator0"in bF?bF.GetEnumerator0():bF.GetEnumerator();};P=O.T=bB.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},l,P);P.New=bB.Ctor(function(bF,bG,bH,bI){this.s=bF;this.c=bG;this.n=bH;this.d=bI;},P);S.Doc=function(){X.$cctor();return X.Doc;};S.IterSelector=function(bF,bG,bH){var bI,bJ,bK;bI=bF.querySelectorAll(bG);for(bJ=0,bK=bI.length-1;bJ<=bK;bJ++)bH(bI[bJ]);};S.ChildrenArray=function(bF){var bG,bH,bI;bG=[];for(bH=0,bI=bF.childNodes.length-1;bH<=bI;bH++)bG.push(bF.childNodes[bH]);return bG;};S.CreateText=function(bF){return S.Doc().createTextNode(bF);};S.SetAttr=function(bF,bG,bH){bF.setAttribute(bG,bH);};S.InsertAt=function(bF,bG,bH){var bI;if(!(bH.parentNode===bF&&bG===(bI=bH.nextSibling,i.Equals(bI,null)?null:bI)))bF.insertBefore(bH,bG);};S.RemoveNode=function(bF,bG){if(bG.parentNode===bF)bF.removeChild(bG);};z.Obsolete=function(bF){var bG,bH,bI,bJ,bK;bH=bF.s;if(bH==null||(bH!=null&&bH.$==2?(bG=bH.$1,false):bH!=null&&bH.$==3?(bG=bH.$1,false):true))void 0;else{bF.s=null;for(bI=0,bJ=o.length(bG)-1;bI<=bJ;bI++){bK=o.get(bG,bI);typeof bK=="object"?function(bL){z.Obsolete(bL);}(bK):bK();}}};z.New=function(bF){return{s:bF};};T=g.View=bB.Class({},null,T);U.TryParseInt32=function(bF,bG){return U.TryParse(bF,-2147483648,2147483647,bG);};V.$cctor=function(){V.$cctor=a.ignore;V.EmptyAttr=null;};W.LoadedTemplateFile=function(bF){var bG,bH,bI;bG=(bH=null,[W.LoadedTemplates().TryGetValue(bF,{get:function(){return bH;},set:function(bJ){bH=bJ;}}),bH]);return bG[0]?bG[1]:(bI=new D.New$5(),(W.LoadedTemplates().set_Item(bF,bI),bI));};W.LinkElement=function(bF,bG){W.InsertDoc(bF,bG,null);};W.CreateRunState=function(bF,bG){return _6.New(_7.get_Empty(),W.CreateElemNode(bF,L.EmptyAttr(),bG));};W.PerformAnimatedUpdate=function(bF,bG){var bH;return _8.get_UseAnimations()?(bH=null,bd.Delay(function(){var bI,bJ,bK;bI=_7.FindAll(bG);bJ=W.ComputeChangeAnim(bF,bI);bK=W.ComputeEnterAnim(bF,bI);return bd.Bind(_8.Play(_8.Append(bJ,W.ComputeExitAnim(bF,bI))),function(){return bd.Bind(W.SyncElemNodesNextFrame(bF),function(){return bd.Bind(_8.Play(bK),function(){bF.PreviousNodes=bI;return bd.Return(null);});});});})):W.SyncElemNodesNextFrame(bF);};W.LocalTemplatesLoaded=function(){ba.$cctor();return ba.LocalTemplatesLoaded;};W.set_LocalTemplatesLoaded=function(bF){ba.$cctor();ba.LocalTemplatesLoaded=bF;};W.LoadedTemplates=function(){ba.$cctor();return ba.LoadedTemplates;};W.TextHoleRE=function(){ba.$cctor();return ba.TextHoleRE;};W.InsertDoc=function(bF,bG,bH){var bI;return bG!=null&&bG.$==1?W.InsertNode(bF,bG.$0.El,bH):bG!=null&&bG.$==2?(bI=bG.$0,(bI.Dirty=false,W.InsertDoc(bF,bI.Current,bH))):bG==null?bH:bG!=null&&bG.$==4?W.InsertNode(bF,bG.$0.Text,bH):bG!=null&&bG.$==5?W.InsertNode(bF,bG.$0,bH):bG!=null&&bG.$==6?o.foldBack(function(bJ,bK){return bJ.constructor===M?W.InsertDoc(bF,bJ,bK):W.InsertNode(bF,bJ,bK);},bG.$0.Els,bH):W.InsertDoc(bF,bG.$0,W.InsertDoc(bF,bG.$1,bH));};W.CreateElemNode=function(bF,bG,bH){var bI;W.LinkElement(bF,bH);bI=L.Insert(bF,bG);return _0.New(bI,bH,null,bF,K.Int(),bB.GetOptional(bI.OnAfterRender));};W.ComputeChangeAnim=function(bF,bG){var bH;function bI(bJ){return L.HasChangeAnim(bJ.Attr);}bH=function(bJ){return _7.Filter(bI,bJ);};return _8.Concat(o.map(function(bJ){return L.GetChangeAnim(bJ.Attr);},_7.ToArray(_7.Intersect(bH(bF.PreviousNodes),bH(bG)))));};W.ComputeEnterAnim=function(bF,bG){return _8.Concat(o.map(function(bH){return L.GetEnterAnim(bH.Attr);},_7.ToArray(_7.Except(bF.PreviousNodes,_7.Filter(function(bH){return L.HasEnterAnim(bH.Attr);},bG)))));};W.ComputeExitAnim=function(bF,bG){return _8.Concat(o.map(function(bH){return L.GetExitAnim(bH.Attr);},_7.ToArray(_7.Except(bG,_7.Filter(function(bH){return L.HasExitAnim(bH.Attr);},bF.PreviousNodes)))));};W.SyncElemNodesNextFrame=function(bF){function bG(bH){a.requestAnimationFrame(function(){W.SyncElemNode(bF.Top);bH();});}return bd.FromContinuations(function(bH,bI,bJ){return bG.apply(null,[bH,bI,bJ]);});};W.InsertBeforeDelim=function(bF,bG){var bH,bI;bH=bF.parentNode;bI=a.document.createTextNode("");bH.insertBefore(bI,bF);W.LinkPrevElement(bF,bG);return bI;};W.InsertNode=function(bF,bG,bH){S.InsertAt(bF,bH,bG);return bG;};W.SyncElemNode=function(bF){W.SyncElement(bF);W.Sync(bF.Children);W.AfterRender(bF);};W.CreateTextNode=function(){return{Text:S.CreateText(""),Dirty:false,Value:""};};W.UpdateTextNode=function(bF,bG){bF.Value=bG;bF.Dirty=true;};W.LinkPrevElement=function(bF,bG){W.InsertDoc(bF.parentNode,bG,bF);};W.SyncElement=function(bF){function bG(bH){function bI(bJ){var bK,bL;return bJ!=null&&bJ.$==0?bI(bJ.$0)||bI(bJ.$1):bJ!=null&&bJ.$==2?(bK=bJ.$0,bK.Dirty||bI(bK.Current)):bJ!=null&&bJ.$==6&&(bL=bJ.$0,bL.Dirty||o.exists(bG,bL.Holes));}return bI(bH.Children);}L.Sync(bF.El,bF.Attr);bG(bF)?W.DoSyncElement(bF):void 0;};W.Sync=function(bF){var bG,bH;if(bF!=null&&bF.$==1)W.SyncElemNode(bF.$0);else if(bF!=null&&bF.$==2)W.Sync(bF.$0.Current);else if(bF==null);else if(bF!=null&&bF.$==5);else if(bF!=null&&bF.$==4){bG=bF.$0;bG.Dirty?(bG.Text.nodeValue=bG.Value,bG.Dirty=false):void 0;}else if(bF!=null&&bF.$==6){bH=bF.$0;o.iter(function(bI){W.SyncElemNode(bI);},bH.Holes);o.iter(function(bI){L.Sync(bI[0],bI[1]);},bH.Attrs);W.AfterRender(bH);}else{W.Sync(bF.$0);W.Sync(bF.$1);}};W.AfterRender=function(bF){var bG;bG=bB.GetOptional(bF.Render);bG!=null&&bG.$==1?(bG.$0(bF.El),bB.SetOptional(bF,"Render",null)):void 0;};W.DoSyncElement=function(bF){var bG,bH,bI;function bJ(bK,bL){var bM,bN;return bK!=null&&bK.$==1?bK.$0.El:bK!=null&&bK.$==2?(bM=bK.$0,bM.Dirty?(bM.Dirty=false,W.InsertDoc(bG,bM.Current,bL)):bJ(bM.Current,bL)):bK==null?bL:bK!=null&&bK.$==4?bK.$0.Text:bK!=null&&bK.$==5?bK.$0:bK!=null&&bK.$==6?(bN=bK.$0,(bN.Dirty?bN.Dirty=false:void 0,o.foldBack(function(bO,bP){return bO.constructor===M?bJ(bO,bP):bO;},bN.Els,bL))):bJ(bK.$0,bJ(bK.$1,bL));}bG=bF.El;bv.Iter((bH=bF.El,function(bK){S.RemoveNode(bH,bK);}),bv.Except(bv.DocChildren(bF),bv.Children(bF.El,bB.GetOptional(bF.Delimiters))));bJ(bF.Children,(bI=bB.GetOptional(bF.Delimiters),bI!=null&&bI.$==1?bI.$0[1]:null));};X.$cctor=function(){X.$cctor=a.ignore;X.Doc=a.document;};Y.StartProcessor=function(bF){var bG;function bH(){var bI;bI=null;return bd.Delay(function(){return bd.Bind(bF,function(){var bJ;bJ=bG[0];return bJ===1?(bG[0]=0,bd.Zero()):bJ===2?(bG[0]=1,bH()):bd.Zero();});});}bG=[0];return function(){var bI;bI=bG[0];bI===0?(bG[0]=1,bd.Start(bH(),null)):bI===1?bG[0]=2:void 0;};};T.Sink=function(bF,bG){function bH(){z.WhenRun(bG(),bF,function(){bd.scheduler().Fork(bH);});}bd.scheduler().Fork(bH);};T.Map=function(bF,bG){return T.CreateLazy(function(){return z.Map(bF,bG());});};T.Map3=function(bF,bG,bH,bI){return T.CreateLazy(function(){return z.Map3(bF,bG(),bH(),bI());});};T.Sequence=function(bF){return T.CreateLazy(function(){return z.Sequence(G.map(function(bG){return bG();},bF));});};T.Map2=function(bF,bG,bH){return T.CreateLazy(function(){return z.Map2(bF,bG(),bH());});};T.Const=function(bF){var bG;bG=z.New({$:0,$0:bF});return function(){return bG;};};T.Map2Unit=function(bF,bG){return T.CreateLazy(function(){return z.Map2Unit(bF(),bG());});};T.CreateLazy=function(bF){var bG;bG={c:null,o:bF};return function(){var bH,bI;bH=bG.c;return bH===null?(bH=bG.o(),bG.c=bH,(bI=bH.s,bI!=null&&bI.$==0)?bG.o=null:z.WhenObsoleteRun(bH,function(){bG.c=null;}),bH):bH;};};Z.$cctor=function(){Z.$cctor=a.ignore;Z.counter=0;};_0=g.DocElemNode=bB.Class({Equals:function(bF){return this.ElKey===bF.ElKey;},GetHashCode:function(){return this.ElKey;}},null,_0);_0.New=function(bF,bG,bH,bI,bJ,bK){var bL;return new _0((bL={Attr:bF,Children:bG,El:bI,ElKey:bJ},(bB.SetOptional(bL,"Delimiters",bH),bB.SetOptional(bL,"Render",bK),bL)));};_2.string=function(bF,bG,bH){return bG==null?bH!=null&&bH.$==1?bF.slice(0,bH.$0+1):"":bH==null?bF.slice(bG.$0):bF.slice(bG.$0,bH.$0+1);};_3.concat=function(bF,bG){return o.ofSeq(bG).join(bF);};_3.StartsWith=function(bF,bG){return bF.substring(0,bG.length)==bG;};_3.SplitChars=function(bF,bG,bH){return _3.Split(bF,new a.RegExp("["+_3.RegexEscape(bG.join(""))+"]"),bH);};_3.RegexEscape=function(bF){return bF.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};_3.Split=function(bF,bG,bH){return bH===1?o.filter(function(bI){return bI!=="";},_3.SplitWith(bF,bG)):_3.SplitWith(bF,bG);};_3.forall=function(bF,bG){return G.forall(bF,_3.protect(bG));};_3.SplitWith=function(bF,bG){return bF.split(bG);};_3.protect=function(bF){return bF===null?"":bF;};_6.New=function(bF,bG){return{PreviousNodes:bF,Top:bG};};_7.get_Empty=function(){return{$:0,$0:new E.New$3()};};_7.FindAll=function(bF){var bG;function bH(bJ){if(bJ!=null&&bJ.$==0){bH(bJ.$0);bH(bJ.$1);}else if(bJ!=null&&bJ.$==1)bI(bJ.$0);else if(bJ!=null&&bJ.$==2)bH(bJ.$0.Current);else if(bJ!=null&&bJ.$==6)o.iter(bI,bJ.$0.Holes);}function bI(bJ){bG.push(bJ);bH(bJ.Children);}bG=[];bH(bF);return{$:0,$0:new E.New$2(bG)};};_7.Filter=function(bF,bG){return{$:0,$0:bm.Filter(bF,bG.$0)};};_7.Intersect=function(bF,bG){return{$:0,$0:bm.Intersect(bF.$0,bG.$0)};};_7.ToArray=function(bF){return bm.ToArray(bF.$0);};_7.Except=function(bF,bG){return{$:0,$0:bm.Except(bF.$0,bG.$0)};};_8.get_UseAnimations=function(){return be.UseAnimations();};_8.Play=function(bF){var bG;bG=null;return bd.Delay(function(){return bd.Bind(_8.Run(a.ignore,be.Actions(bF)),function(){be.Finalize(bF);return bd.Return(null);});});};_8.Append=function(bF,bG){return{$:0,$0:bf.Append(bF.$0,bG.$0)};};_8.Concat=function(bF){return{$:0,$0:bf.Concat(G.map(be.List,bF))};};_8.Run=function(bF,bG){var bH;function bI(bJ){function bK(bL,bM){var bN;bN=bM-bL;bG.Compute(bN);bF();return bN<=bH?void a.requestAnimationFrame(function(bO){bK(bL,bO);}):bJ();}a.requestAnimationFrame(function(bL){bK(bL,bL);});}bH=bG.Duration;return bH===0?bd.Zero():bd.FromContinuations(function(bJ,bK,bL){return bI.apply(null,[bJ,bK,bL]);});};_8.get_Empty=function(){return{$:0,$0:bf.Empty()};};_9.concat=function(bF){var bG,bH;bG=[];for(var bI in bF)bG.push.apply(bG,bF[bI]);return bG;};$.New=function(bF,bG,bH,bI){var bJ;bJ={DynElem:bF,DynFlags:bG,DynNodes:bH};bB.SetOptional(bJ,"OnAfterRender",bI);return bJ;};ba.$cctor=function(){ba.$cctor=a.ignore;ba.LoadedTemplates=new D.New$5();ba.LocalTemplatesLoaded=false;ba.TextHoleRE="\\${([^}]+)}";};bb=g.CheckedInput=bB.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,bb);bc=g.Elt=bB.Class({},I,bc);bc.TreeNode=function(bF,bG){var bH,bI;function bJ(bK){return bK[1];}bH=bh.Create(bG);return new bc.New$1({$:6,$0:bF},T.Map2Unit((bI=o.map(function(bK){return L.Updates(bJ(bK));},bF.Attrs),B.TreeReduce(T.Const(),T.Map2Unit,bI)),bH.v),o.get(bF.Els,0),bH);};bc.New$1=bB.Ctor(function(bF,bG,bH,bI){I.New.call(this,bF,bG);this.docNode$1=bF;this.updates$1=bG;this.elt=bH;this.rvUpdates=bI;},bc);bd.Delay=function(bF){return function(bG){try{(bF(null))(bG);}catch(bH){bG.k({$:1,$0:bH});}};};bd.Bind=function(bF,bG){return bd.checkCancel(function(bH){bF(bi.New(function(bI){var bJ;if(bI.$==0){bJ=bI.$0;bd.scheduler().Fork(function(){try{(bG(bJ))(bH);}catch(bK){bH.k({$:1,$0:bK});}});}else bd.scheduler().Fork(function(){bH.k(bI);});},bH.ct));});};bd.Zero=function(){bj.$cctor();return bj.Zero;};bd.Start=function(bF,bG){var bH,bI;bH=(bI=(bd.defCTS())[0],bG==null?bI:bG.$0);bd.scheduler().Fork(function(){if(!bH.c)bF(bi.New(function(bJ){if(bJ.$==1)bd.UncaughtAsyncError(bJ.$0);},bH));});};bd.Return=function(bF){return function(bG){bG.k({$:0,$0:bF});};};bd.checkCancel=function(bF){return function(bG){if(bG.ct.c)bd.cancel(bG);else bF(bG);};};bd.defCTS=function(){bj.$cctor();return bj.defCTS;};bd.UncaughtAsyncError=function(bF){bD.log("WebSharper: Uncaught asynchronous exception",bF);};bd.FromContinuations=function(bF){return function(bG){var bH;function bI(bJ){if(bH[0])f.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bH[0]=true;bd.scheduler().Fork(bJ);}}bH=[false];bF(function(bJ){bI(function(){bG.k({$:0,$0:bJ});});},function(bJ){bI(function(){bG.k({$:1,$0:bJ});});},function(bJ){bI(function(){bG.k({$:2,$0:bJ});});});};};bd.cancel=function(bF){bF.k({$:2,$0:new bs.New(bF.ct)});};bd.scheduler=function(){bj.$cctor();return bj.scheduler;};be.UseAnimations=function(){bl.$cctor();return bl.UseAnimations;};be.Actions=function(bF){return be.ConcatActions(o.choose(function(bG){return bG.$==1?{$:1,$0:bG.$0}:null;},bf.ToArray(bF.$0)));};be.Finalize=function(bF){o.iter(function(bG){if(bG.$==0)bG.$0();},bf.ToArray(bF.$0));};be.List=function(bF){return bF.$0;};be.ConcatActions=function(bF){var bG,bH,bI,bJ;bG=B.ofSeqNonCopying(bF);bH=o.length(bG);return bH===0?be.Const():bH===1?o.get(bG,0):(bI=G.max(G.map(function(bK){return bK.Duration;},bG)),(bJ=o.map(function(bK){return be.Prolong(bI,bK);},bG),be.Def(bI,function(bK){o.iter(function(bL){bL.Compute(bK);},bJ);})));};be.Const=function(bF){return be.Def(0,function(){return bF;});};be.Prolong=function(bF,bG){var bH,bI,bJ;bH=bG.Compute;bI=bG.Duration;bJ=bu.Create(function(){return bG.Compute(bG.Duration);});return{Compute:function(bK){return bK>=bI?bJ.f():bH(bK);},Duration:bF};};be.Def=function(bF,bG){return{Compute:bG,Duration:bF};};bf.Append=function(bF,bG){return bF.$==0?bG:bG.$==0?bF:{$:2,$0:bF,$1:bG};};bf.Concat=function(bF){var bG;bG=B.ofSeqNonCopying(bF);return B.TreeReduce(bf.Empty(),bf.Append,bG);};bf.ToArray=function(bF){var bG;function bH(bI){if(bI.$==1)bG.push(bI.$0);else if(bI.$==2){bH(bI.$0);bH(bI.$1);}else if(bI.$==3)o.iter(function(bJ){bG.push(bJ);},bI.$0);}bG=[];bH(bF);return bG.slice(0);};bf.Empty=function(){bt.$cctor();return bt.Empty;};bg.isBlank=function(bF){return _3.forall(bn.IsWhiteSpace,bF);};bh=g.Updates=bB.Class({},null,bh);bh.Create=function(bF){var bG;bG=null;bG=bh.New(bF,null,function(){var bH;bH=bG.s;return bH===null?(bH=z.Copy(bG.c()),bG.s=bH,z.WhenObsoleteRun(bH,function(){bG.s=null;}),bH):bH;});return bG;};bh.New=function(bF,bG,bH){return new bh({c:bF,s:bG,v:bH});};bi.New=function(bF,bG){return{k:bF,ct:bG};};bj.$cctor=function(){bj.$cctor=a.ignore;bj.noneCT=bk.New(false,[]);bj.scheduler=new bp.New();bj.defCTS=[new bq.New()];bj.Zero=bd.Return();bj.GetCT=function(bF){bF.k({$:0,$0:bF.ct});};};bk.New=function(bF,bG){return{c:bF,r:bG};};bl.$cctor=function(){bl.$cctor=a.ignore;bl.CubicInOut=br.Custom(function(bF){var bG;bG=bF*bF;return 3*bG-2*(bG*bF);});bl.UseAnimations=true;};bm.Filter=function(bF,bG){return new E.New$2(o.filter(bF,bm.ToArray(bG)));};bm.Intersect=function(bF,bG){var bH;bH=new E.New$2(bm.ToArray(bF));bH.IntersectWith(bm.ToArray(bG));return bH;};bm.ToArray=function(bF){var bG;bG=o.create(bF.get_Count(),void 0);bF.CopyTo(bG);return bG;};bm.Except=function(bF,bG){var bH;bH=new E.New$2(bm.ToArray(bG));bH.ExceptWith(bm.ToArray(bF));return bH;};bn.IsWhiteSpace=function(bF){return bF.match(new a.RegExp("\\s"))!==null;};U.TryParse=function(bF,bG,bH,bI){var bJ,bK;bJ=+bF;bK=bJ===bJ-bJ%1&&bJ>=bG&&bJ<=bH;bK?bI.set(bJ):void 0;return bK;};bo=g.DynamicAttrNode=bB.Class({NChanged:function(){return this.updates;},NGetChangeAnim:function(bF){return _8.get_Empty();},NGetEnterAnim:function(bF){return _8.get_Empty();},NGetExitAnim:function(bF){return _8.get_Empty();},NSync:function(bF){if(this.dirty){(this.push(bF))(this.value);this.dirty=false;}}},l,bo);bo.New=bB.Ctor(function(bF,bG){var bH;bH=this;this.push=bG;this.value=void 0;this.dirty=false;this.updates=T.Map(function(bI){bH.value=bI;bH.dirty=true;},bF);},bo);bp=bd.Scheduler=bB.Class({Fork:function(bF){var bG;bG=this;this.robin.push(bF);this.idle?(this.idle=false,a.setTimeout(function(){bG.tick();},0)):void 0;},tick:function(){var bF,bG,bH;bG=this;bH=bE.now();bF=true;while(bF)if(this.robin.length===0){this.idle=true;bF=false;}else{(this.robin.shift())();bE.now()-bH>40?(a.setTimeout(function(){bG.tick();},0),bF=false):void 0;}}},l,bp);bp.New=bB.Ctor(function(){this.idle=true;this.robin=[];},bp);bq=e.CancellationTokenSource=bB.Class({},l,bq);bq.New=bB.Ctor(function(){this.c=false;this.pending=null;this.r=[];this.init=1;},bq);br=g.Easing=bB.Class({},l,br);br.Custom=function(bF){return new br.New(bF);};br.New=bB.Ctor(function(bF){this.transformTime=bF;},br);bs=e.OperationCanceledException=bB.Class({},null,bs);bs.New=bB.Ctor(function(bF){bs.New$1.call(this,"The operation was canceled.",null,bF);},bs);bs.New$1=bB.Ctor(function(bF,bG,bH){this.message=bF;this.inner=bG;this.ct=bH;},bs);bt.$cctor=function(){bt.$cctor=a.ignore;bt.Empty={$:0};};bu.Create=function(bF){return bx.New(false,bF,bu.forceLazy);};bu.forceLazy=function(){var bF;bF=this.v();this.c=true;this.v=bF;this.f=bu.cachedLazy;return bF;};bu.cachedLazy=function(){return this.v;};bv.DocChildren=function(bF){var bG;function bH(bI){if(bI!=null&&bI.$==2)bH(bI.$0.Current);else if(bI!=null&&bI.$==1)bG.push(bI.$0.El);else if(bI==null);else if(bI!=null&&bI.$==5)bG.push(bI.$0);else if(bI!=null&&bI.$==4)bG.push(bI.$0.Text);else if(bI!=null&&bI.$==6)o.iter(function(bJ){if(bJ.constructor===M)bH(bJ);else bG.push(bJ);},bI.$0.Els);else{bH(bI.$0);bH(bI.$1);}}bG=[];bH(bF.Children);return{$:0,$0:B.ofSeqNonCopying(bG)};};bv.Children=function(bF,bG){var bH,bI,bJ;if(bG!=null&&bG.$==1){bJ=[];bH=bG.$0[0].nextSibling;while(bH!==bG.$0[1]){bJ.push(bH);bH=bH.nextSibling;}return{$:0,$0:bJ};}else return{$:0,$0:o.init(bF.childNodes.length,(bI=bF.childNodes,function(bK){return bI[bK];}))};};bv.Except=function(bF,bG){var bH;bH=bF.$0;return{$:0,$0:o.filter(function(bI){return o.forall(function(bJ){return!(bI===bJ);},bH);},bG.$0)};};bv.Iter=function(bF,bG){o.iter(bF,bG.$0);};bx.New=function(bF,bG,bH){return{c:bF,v:bG,f:bH};};by.Clear=function(bF){bF.splice(0,o.length(bF));};bB.OnLoad(function(){c.Main();});}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
