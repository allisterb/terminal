function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){window.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL;a=window;b=a.WebSharperTerminalSample=a.WebSharperTerminalSample||{};c=b.Client=b.Client||{};d=a.StartupCode$WebSharper_JQueryTerminal_Tests$Client=a.StartupCode$WebSharper_JQueryTerminal_Tests$Client||{};e=a.WebSharper=a.WebSharper||{};f=e.Operators=e.Operators||{};g=e.UI=e.UI||{};h=g.Var=g.Var||{};i=e.Obj=e.Obj||{};j=g.Templating=g.Templating||{};k=j.Runtime=j.Runtime||{};l=k.Server=k.Server||{};m=l.TemplateInstance=l.TemplateInstance||{};n=e.Arrays=e.Arrays||{};o=l.ProviderBuilder=l.ProviderBuilder||{};p=g.AttrProxy=g.AttrProxy||{};q=e.List=e.List||{};r=l.Handler=l.Handler||{};s=e.JavaScript=e.JavaScript||{};t=s.JSModule=s.JSModule||{};u=a.WebSharper$JQueryTerminal$Tests_Templates=a.WebSharper$JQueryTerminal$Tests_Templates||{};v=g.ConcreteVar=g.ConcreteVar||{};w=g.Snap=g.Snap||{};x=g.Client=g.Client||{};y=x.Templates=x.Templates||{};z=g.Doc=g.Doc||{};A=s.Pervasives=s.Pervasives||{};B=e.Collections=e.Collections||{};C=B.List=B.List||{};D=g.Array=g.Array||{};E=e.Unchecked=e.Unchecked||{};F=a.System=a.System||{};G=F.Guid=F.Guid||{};H=q.T=q.T||{};I=g.AttrModule=g.AttrModule||{};J=B.Dictionary=B.Dictionary||{};K=B.HashSet=B.HashSet||{};L=k.Client=k.Client||{};M=e.Seq=e.Seq||{};N=g.Abbrev=g.Abbrev||{};O=N.Fresh=N.Fresh||{};P=a.EventTarget;Q=a.Node;R=g.DomUtility=g.DomUtility||{};S=a.Object;T=g.Attrs=g.Attrs||{};U=g.View=g.View||{};V=g.CheckedInput=g.CheckedInput||{};W=e.Numeric=e.Numeric||{};X=B.DictionaryUtil=B.DictionaryUtil||{};Y=e.Enumerator=e.Enumerator||{};Z=Y.T=Y.T||{};_0=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};_1=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};_2=g.Docs=g.Docs||{};_3=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};_4=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};_5=y.Prepare=y.Prepare||{};_6=e.Slice=e.Slice||{};_7=B.KeyCollection=B.KeyCollection||{};_8=g.DocElemNode=g.DocElemNode||{};_9=a.CharacterData;_=g.An=g.An||{};$=x.Settings=x.Settings||{};ba=N.Mailbox=N.Mailbox||{};bb=B.HashSetUtil=B.HashSetUtil||{};bc=e.Strings=e.Strings||{};bd=x.Attrs=x.Attrs||{};be=bd.Dyn=bd.Dyn||{};bf=x.Docs=x.Docs||{};bg=bf.RunState=bf.RunState||{};bh=bf.NodeSet=bf.NodeSet||{};bi=g.Anims=g.Anims||{};bj=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bk=g.Elt=g.Elt||{};bl=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bm=e.Concurrency=e.Concurrency||{};bn=g.AppendList=g.AppendList||{};bo=g.Updates=g.Updates||{};bp=g.Easing=g.Easing||{};bq=bm.AsyncBody=bm.AsyncBody||{};br=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bs=bm.CT=bm.CT||{};bt=N.HashSet=N.HashSet||{};bu=g.String=g.String||{};bv=bm.Scheduler=bm.Scheduler||{};bw=e.CancellationTokenSource=e.CancellationTokenSource||{};bx=bf.DomNodes=bf.DomNodes||{};by=e.Char=e.Char||{};bz=g.DynamicAttrNode=g.DynamicAttrNode||{};bA=e.OperationCanceledException=e.OperationCanceledException||{};bB=e.Lazy=e.Lazy||{};bC=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bD=e.LazyExtensionsProxy=e.LazyExtensionsProxy||{};bE=bD.LazyRecord=bD.LazyRecord||{};bF=e.Queue=e.Queue||{};bG=a.IntelliFactory;bH=bG&&bG.Runtime;bI=a.jQuery;bJ=a.console;bK=a.Math;bL=a.Date;c.Main=function(){d.$cctor();return d.Main;};c.set_numOfTemplates=function(bM){d.$cctor();d.numOfTemplates=bM;};c.numOfTemplates=function(){d.$cctor();return d.numOfTemplates;};c.i2=function(bM,bN){if(bN==="asd")bM.echo("kek");else if(bN==="switch")bM.pop();else bM.echo("...");};c.intOpt=function(){d.$cctor();return d.intOpt;};c.Blank=function(bM){return bM===""?{$:1,$0:null}:null;};c.Switch=function(bM){return bM==="switch"?{$:1,$0:null}:null;};c.Clear=function(bM){return bM==="clear"?{$:1,$0:null}:null;};c.Template=function(bM){return bM==="template"?{$:1,$0:null}:null;};c.Help=function(bM){return bM==="help"?{$:1,$0:null}:null;};c.interpreter=function(){d.$cctor();return d.interpreter;};c.Opt=function(){d.$cctor();return d.Opt;};d.$cctor=function(){var bM,bN,bO,bP;d.$cctor=a.ignore;d.intOpt=(bM={},bM.name="No2",bM.prompt="+ ",bM);d.numOfTemplates=0;d.interpreter=function(bQ){var bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3;return(bR=c.Help(bQ),bR!=null&&bR.$==1)?this.echo("Commands: help, clear, template"):(bS=c.Template(bQ),bS!=null&&bS.$==1)?(c.set_numOfTemplates(c.numOfTemplates()+1),bT="template"+a.String(c.numOfTemplates()),bU=h.Create$1(""),bV=(bW=(bX=(bY=q.ofArray([I.Handler("keypress",function(){return function(b4){return b4.stopPropagation();};}),I.Handler("keydown",function(){return function(b4){return b4.stopPropagation();};}),I.Handler("keyup",function(){return function(b4){return b4.stopPropagation();};}),I.Handler("input",function(){return function(b4){return b4.stopPropagation();};})]),o.Make().WithHole({$:8,$0:"projname",$1:bU}).WithHole({$:3,$0:"eventprop",$1:p.Concat(bY)})),bX.WithHole(r.EventQ2(bX.k,"download",function(){return bX.i;},function(){a.alert(bU.Get());}))),(bZ=r.CompleteHoles(bW.k,bW.h,[["projname",0]]),(b0=new m.New(bZ[1],u.form(bZ[0])),(bW.i=b0,b0)))).get_Doc(),this.echo("<div id=\""+bT+"\"></div>",{raw:true}),y.LoadLocalTemplates(""),z.RunById(bT,bV)):(b1=c.Clear(bQ),b1!=null&&b1.$==1)?this.clear():(b2=c.Switch(bQ),b2!=null&&b2.$==1)?this.push(function(b4){return c.i2(this,b4);},c.intOpt()):(b3=c.Blank(bQ),b3!=null&&b3.$==1)?this.echo(""):this.echo("Unknown command",{raw:true});};d.Opt=(bN={},bN.name="Terminal1",bN.prompt="> ",bN.greetings="Welcome to the Terminal Test Page! See 'help' for the list of commands.",bN.onInit=function(bQ){bQ.enable();return bQ.echo("Hey Dood, it's workin'!");},bN);d.Main=(bO=c.interpreter(),(bP=c.Opt(),void a.$("#body").terminal(bO,bP)));};f.FailWith=function(bM){throw a.Error(bM);};f.KeyValue=function(bM){return[bM.K,bM.V];};h.Create$1=function(bM){return new v.New(false,w.New({$:2,$0:bM,$1:[]}),bM);};i=e.Obj=bH.Class({Equals:function(bM){return this===bM;},GetHashCode:function(){return -1;}},null,i);m=l.TemplateInstance=bH.Class({get_Doc:function(){return this.doc;}},i,m);m.New=bH.Ctor(function(bM,bN){this.doc=bN;this.allVars=bM.$==0?bM.$0:f.FailWith("Should not happen");},m);n.get=function(bM,bN){n.checkBounds(bM,bN);return bM[bN];};n.length=function(bM){return bM.dims===2?bM.length*bM.length:bM.length;};n.checkBounds=function(bM,bN){if(bN<0||bN>=bM.length)f.FailWith("Index was outside the bounds of the array.");};n.set=function(bM,bN,bO){n.checkBounds(bM,bN);bM[bN]=bO;};o=l.ProviderBuilder=bH.Class({WithHole:function(bM){this.h.push(bM);return this;}},null,o);o.Make=function(){var bM;return o.New(null,(bM=G.NewGuid(),a.String(bM)),[]);};o.New=function(bM,bN,bO){return new o({i:bM,k:bN,h:bO});};p=g.AttrProxy=bH.Class({},null,p);p.Concat=function(bM){var bN;bN=D.ofSeqNonCopying(bM);return D.TreeReduce(T.EmptyAttr(),p.Append,bN);};p.Append=function(bM,bN){return T.AppendTree(bM,bN);};p.Handler=function(bM,bN){return p.HandlerImpl(bM,bN);};p.Create=function(bM,bN){return T.Static(function(bO){R.SetAttr(bO,bM,bN);});};p.HandlerImpl=function(bM,bN){return T.Static(function(bO){bO.addEventListener(bM,function(bP){return(bN(bO))(bP);},false);});};q.ofArray=function(bM){var bN,bO,bP;bN=H.Empty;for(bO=n.length(bM)-1,bP=0;bO>=bP;bO--)bN=new H({$:1,$0:n.get(bM,bO),$1:bN});return bN;};q.head=function(bM){return bM.$==1?bM.$0:q.listEmpty();};q.tail=function(bM){return bM.$==1?bM.$1:q.listEmpty();};q.listEmpty=function(){return f.FailWith("The input list was empty.");};r.EventQ2=function(bM,bN,bO,bP){return{$:5,$0:bN,$1:true,$2:function(bQ){return function(bR){return bP({Vars:bO(),Target:bQ,Event:bR});};}};};r.CompleteHoles=function(bM,bN,bO){var bQ,bR,bS,bT,bU,bV;function bP(bW,bX){var bY,bZ,b0,b1;return bR.Contains(bW)?null:(bY=bX===0?(bZ=h.Create$1(""),[{$:8,$0:bW,$1:bZ},bZ]):bX===1?(b0=h.Create$1(0),[{$:13,$0:bW,$1:b0},b0]):bX===2?(b1=h.Create$1(false),[{$:9,$0:bW,$1:b1},b1]):f.FailWith("Invalid value type"),(bQ.set_Item(bW,bY[1]),{$:1,$0:bY[0]}));}bQ=new J.New$5();bR=new K.New$3();bS=Y.Get(bN);try{while(bS.MoveNext()){bT=bS.Current();(bT.$==8?(bU=[bT.$0,L.Box(bT.$1)],true):bT.$==11?(bU=[bT.$0,L.Box(bT.$1)],true):bT.$==10?(bU=[bT.$0,L.Box(bT.$1)],true):bT.$==13?(bU=[bT.$0,L.Box(bT.$1)],true):bT.$==12?(bU=[bT.$0,L.Box(bT.$1)],true):bT.$==9&&(bU=[bT.$0,L.Box(bT.$1)],true))?(bV=bU[0],bR.Add(bV),bQ.set_Item(bV,bU[1])):void 0;}}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}return[M.append(bN,n.choose(function(bW){return bP(bW[0],bW[1]);},bO)),{$:0,$0:bQ}];};t.GetFieldValues=function(bM){var bN,bO;bN=[];for(var bP in bM)bN.push(bM[bP]);return bN;};h=g.Var=bH.Class({},i,h);h.New=bH.Ctor(function(){},h);u.form=function(bM){return bM?y.GetOrLoadTemplate("template",{$:1,$0:"form"},function(){return bI.parseHTML("<div class=\"form-class\">\n    <input type=\"text\" id=\"sample1\" placeholder=\"MyProject\" ws-var=\"ProjName\" ws-attr=\"EventProp\">\n    <div class=\"mdl-selectfield mdl-js-selectfield is-dirty\" id=\"plainSelect\" data-upgraded=\",MaterialSelectfield\">\n                            <select id=\"myselect\" name=\"myselect\" class=\"mdl-selectfield__select\" style=\"opacity: 0; z-index: -1;\">\n                                <option value=\"clientserverfsharp\">Client-Server Application F#\n                                </option><option value=\"spafsharp\">Single Page Application F#\n                                </option><option value=\"extensionfsharp\">Extension F#\n                                </option><option value=\"libraryfsharp\">Library F#\n                                </option><option value=\"offlinefsharp\">HTML Application F#\n                                </option><option value=\"owinfsharp\">Owin F#\n                                </option><option value=\"clientserverfsharp\">Client-Server Application C#\n                                </option><option value=\"spacsharp\">Single Page Application C#\n                                </option><option value=\"librarycsharp\">Library C#\n                                </option><option value=\"offlinecsharp\">HTML Application C#\n                            </option></select>\n                            <label class=\"mdl-selectfield__label\" for=\"myselect\">Available templates</label>\n                        <div class=\"mdl-selectfield__box\" tabindex=\"1\"><span tabindex=\"-1\" class=\"mdl-selectfield__arrow-down__container\"><span class=\"mdl-selectfield__arrow-down\" tabindex=\"-1\"></span></span><span class=\"mdl-selectfield__box-value\" tabindex=\"-1\">Client-Server Application F#\n                                </span></div><div class=\"mdl-selectfield__list-option-box\" tabindex=\"-1\"><ul tabindex=\"-1\"><li class=\"is-selected\" data-value=\"0\" tabindex=\"-1\">Client-Server Application F#\n                                </li><li class=\"\" data-value=\"1\" tabindex=\"-1\">Single Page Application F#\n                                </li><li class=\"\" data-value=\"2\" tabindex=\"-1\">Extension F#\n                                </li><li class=\"\" data-value=\"3\" tabindex=\"-1\">Library F#\n                                </li><li class=\"\" data-value=\"4\" tabindex=\"-1\">HTML Application F#\n                                </li><li class=\"\" data-value=\"5\" tabindex=\"-1\">Owin F#\n                                </li><li class=\"\" data-value=\"6\" tabindex=\"-1\">Client-Server Application C#\n                                </li><li class=\"\" data-value=\"7\" tabindex=\"-1\">Single Page Application C#\n                                </li><li class=\"\" data-value=\"8\" tabindex=\"-1\">Library C#\n                                </li><li class=\"\" data-value=\"9\" tabindex=\"-1\">HTML Application C#\n                            </li></ul></div></div>\n\n    <div class=\"mdl-selectfield mdl-js-selectfield is-dirty\" id=\"plainIdeSelect\" data-upgraded=\",MaterialSelectfield\">\n                            <select id=\"myselect\" name=\"myselect\" class=\"mdl-selectfield__select\" style=\"opacity: 0; z-index: -1;\">\n                                <option value=\"vs2017\">Visual Studio 2017\n                            </option></select>\n                            <label class=\"mdl-selectfield__label\" for=\"myselect\">Your IDE</label>\n                        <div class=\"mdl-selectfield__box\" tabindex=\"1\"><span tabindex=\"-1\" class=\"mdl-selectfield__arrow-down__container\"><span class=\"mdl-selectfield__arrow-down\" tabindex=\"-1\"></span></span><span class=\"mdl-selectfield__box-value\" tabindex=\"-1\">Visual Studio 2017\n                            </span></div><div class=\"mdl-selectfield__list-option-box\" tabindex=\"-1\"><ul tabindex=\"-1\"><li class=\"is-selected\" data-value=\"0\" tabindex=\"-1\">Visual Studio 2017\n                            </li></ul></div></div>\n\n    <div class=\"social-button-group\">\n                            <button class=\"mdl-button mdl-js-button mdl-button--raised mdl-button--colored dl-button\" data-upgraded=\",MaterialButton\" ws-onclick=\"Download\">\n                                Download\n                            </button>\n                        </div>\n</div>");},bM):y.PrepareTemplate("template",{$:1,$0:"form"},function(){return bI.parseHTML("<div class=\"form-class\">\n    <input type=\"text\" id=\"sample1\" placeholder=\"MyProject\" ws-var=\"ProjName\" ws-attr=\"EventProp\">\n    <div class=\"mdl-selectfield mdl-js-selectfield is-dirty\" id=\"plainSelect\" data-upgraded=\",MaterialSelectfield\">\n                            <select id=\"myselect\" name=\"myselect\" class=\"mdl-selectfield__select\" style=\"opacity: 0; z-index: -1;\">\n                                <option value=\"clientserverfsharp\">Client-Server Application F#\n                                </option><option value=\"spafsharp\">Single Page Application F#\n                                </option><option value=\"extensionfsharp\">Extension F#\n                                </option><option value=\"libraryfsharp\">Library F#\n                                </option><option value=\"offlinefsharp\">HTML Application F#\n                                </option><option value=\"owinfsharp\">Owin F#\n                                </option><option value=\"clientserverfsharp\">Client-Server Application C#\n                                </option><option value=\"spacsharp\">Single Page Application C#\n                                </option><option value=\"librarycsharp\">Library C#\n                                </option><option value=\"offlinecsharp\">HTML Application C#\n                            </option></select>\n                            <label class=\"mdl-selectfield__label\" for=\"myselect\">Available templates</label>\n                        <div class=\"mdl-selectfield__box\" tabindex=\"1\"><span tabindex=\"-1\" class=\"mdl-selectfield__arrow-down__container\"><span class=\"mdl-selectfield__arrow-down\" tabindex=\"-1\"></span></span><span class=\"mdl-selectfield__box-value\" tabindex=\"-1\">Client-Server Application F#\n                                </span></div><div class=\"mdl-selectfield__list-option-box\" tabindex=\"-1\"><ul tabindex=\"-1\"><li class=\"is-selected\" data-value=\"0\" tabindex=\"-1\">Client-Server Application F#\n                                </li><li class=\"\" data-value=\"1\" tabindex=\"-1\">Single Page Application F#\n                                </li><li class=\"\" data-value=\"2\" tabindex=\"-1\">Extension F#\n                                </li><li class=\"\" data-value=\"3\" tabindex=\"-1\">Library F#\n                                </li><li class=\"\" data-value=\"4\" tabindex=\"-1\">HTML Application F#\n                                </li><li class=\"\" data-value=\"5\" tabindex=\"-1\">Owin F#\n                                </li><li class=\"\" data-value=\"6\" tabindex=\"-1\">Client-Server Application C#\n                                </li><li class=\"\" data-value=\"7\" tabindex=\"-1\">Single Page Application C#\n                                </li><li class=\"\" data-value=\"8\" tabindex=\"-1\">Library C#\n                                </li><li class=\"\" data-value=\"9\" tabindex=\"-1\">HTML Application C#\n                            </li></ul></div></div>\n\n    <div class=\"mdl-selectfield mdl-js-selectfield is-dirty\" id=\"plainIdeSelect\" data-upgraded=\",MaterialSelectfield\">\n                            <select id=\"myselect\" name=\"myselect\" class=\"mdl-selectfield__select\" style=\"opacity: 0; z-index: -1;\">\n                                <option value=\"vs2017\">Visual Studio 2017\n                            </option></select>\n                            <label class=\"mdl-selectfield__label\" for=\"myselect\">Your IDE</label>\n                        <div class=\"mdl-selectfield__box\" tabindex=\"1\"><span tabindex=\"-1\" class=\"mdl-selectfield__arrow-down__container\"><span class=\"mdl-selectfield__arrow-down\" tabindex=\"-1\"></span></span><span class=\"mdl-selectfield__box-value\" tabindex=\"-1\">Visual Studio 2017\n                            </span></div><div class=\"mdl-selectfield__list-option-box\" tabindex=\"-1\"><ul tabindex=\"-1\"><li class=\"is-selected\" data-value=\"0\" tabindex=\"-1\">Visual Studio 2017\n                            </li></ul></div></div>\n\n    <div class=\"social-button-group\">\n                            <button class=\"mdl-button mdl-js-button mdl-button--raised mdl-button--colored dl-button\" data-upgraded=\",MaterialButton\" ws-onclick=\"Download\">\n                                Download\n                            </button>\n                        </div>\n</div>");});};v=g.ConcreteVar=bH.Class({Get:function(){return this.current;},get_View:function(){return this.view;},Set:function(bM){if(this.isConst)(function(bN){return bN("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bN){bJ.log(bN);}));else{w.Obsolete(this.snap);this.current=bM;this.snap=w.New({$:2,$0:bM,$1:[]});}},UpdateMaybe:function(bM){var bN;bN=bM(this.Get());bN!=null&&bN.$==1?this.Set(bN.$0):void 0;}},h,v);v.New=bH.Ctor(function(bM,bN,bO){var bP;bP=this;h.New.call(this);this.isConst=bM;this.current=bO;this.snap=bN;this.view=function(){return bP.snap;};this.id=O.Int();},v);w.WhenRun=function(bM,bN,bO){var bP;bP=bM.s;bP==null?bO():bP!=null&&bP.$==2?(bP.$1.push(bO),bN(bP.$0)):bP!=null&&bP.$==3?(bP.$0.push(bN),bP.$1.push(bO)):bN(bP.$0);};w.Map=function(bM,bN){var bO,bP;bO=bN.s;return bO!=null&&bO.$==0?w.New({$:0,$0:bM(bO.$0)}):(bP=w.New({$:3,$0:[],$1:[]}),(w.When(bN,function(bQ){w.MarkDone(bP,bN,bM(bQ));},bP),bP));};w.Map3=function(bM,bN,bO,bP){var bQ,bR,bS,bT;function bU(bV){var bW,bX,bY,bZ;if(!(bW=bT.s,bW!=null&&bW.$==0||bW!=null&&bW.$==2)){bX=w.ValueAndForever(bN);bY=w.ValueAndForever(bO);bZ=w.ValueAndForever(bP);bX!=null&&bX.$==1?bY!=null&&bY.$==1?bZ!=null&&bZ.$==1?bX.$0[1]&&bY.$0[1]&&bZ.$0[1]?w.MarkForever(bT,bM(bX.$0[0],bY.$0[0],bZ.$0[0])):w.MarkReady(bT,bM(bX.$0[0],bY.$0[0],bZ.$0[0])):void 0:void 0:void 0;}}bQ=bN.s;bR=bO.s;bS=bP.s;return bQ!=null&&bQ.$==0?bR!=null&&bR.$==0?bS!=null&&bS.$==0?w.New({$:0,$0:bM(bQ.$0,bR.$0,bS.$0)}):w.Map3Opt1(bM,bQ.$0,bR.$0,bP):bS!=null&&bS.$==0?w.Map3Opt2(bM,bQ.$0,bS.$0,bO):w.Map3Opt3(bM,bQ.$0,bO,bP):bR!=null&&bR.$==0?bS!=null&&bS.$==0?w.Map3Opt4(bM,bR.$0,bS.$0,bN):w.Map3Opt5(bM,bR.$0,bN,bP):bS!=null&&bS.$==0?w.Map3Opt6(bM,bS.$0,bN,bO):(bT=w.New({$:3,$0:[],$1:[]}),(w.When(bN,bU,bT),w.When(bO,bU,bT),w.When(bP,bU,bT),bT));};w.Sequence=function(bM){var bN,bO,bP;function bQ(bR){var bS;if(bP[0]===0){bS=n.map(function(bT){var bU;bU=bT.s;return bU!=null&&bU.$==0?bU.$0:bU!=null&&bU.$==2?bU.$0:f.FailWith("value not found by View.Sequence");},bN);n.forall(function(bT){var bU;bU=bT.s;return bU!=null&&bU.$==0;},bN)?w.MarkForever(bO,bS):w.MarkReady(bO,bS);}else bP[0]--;}bN=n.ofSeq(bM);return bN.length==0?w.New({$:0,$0:[]}):(bO=w.New({$:3,$0:[],$1:[]}),(bP=[n.length(bN)-1],(n.iter(function(bR){w.When(bR,bQ,bO);},bN),bO)));};w.Map2=function(bM,bN,bO){var bP,bQ,bR;function bS(bT){var bU,bV,bW;if(!(bU=bR.s,bU!=null&&bU.$==0||bU!=null&&bU.$==2)){bV=w.ValueAndForever(bN);bW=w.ValueAndForever(bO);bV!=null&&bV.$==1?bW!=null&&bW.$==1?bV.$0[1]&&bW.$0[1]?w.MarkForever(bR,bM(bV.$0[0],bW.$0[0])):w.MarkReady(bR,bM(bV.$0[0],bW.$0[0])):void 0:void 0;}}bP=bN.s;bQ=bO.s;return bP!=null&&bP.$==0?bQ!=null&&bQ.$==0?w.New({$:0,$0:bM(bP.$0,bQ.$0)}):w.Map2Opt1(bM,bP.$0,bO):bQ!=null&&bQ.$==0?w.Map2Opt2(bM,bQ.$0,bN):(bR=w.New({$:3,$0:[],$1:[]}),(w.When(bN,bS,bR),w.When(bO,bS,bR),bR));};w.Map2Unit=function(bM,bN){var bO,bP,bQ;function bR(){var bS,bT,bU;if(!(bS=bQ.s,bS!=null&&bS.$==0||bS!=null&&bS.$==2)){bT=w.ValueAndForever(bM);bU=w.ValueAndForever(bN);bT!=null&&bT.$==1?bU!=null&&bU.$==1?bT.$0[1]&&bU.$0[1]?w.MarkForever(bQ,null):w.MarkReady(bQ,null):void 0:void 0;}}bO=bM.s;bP=bN.s;return bO!=null&&bO.$==0?bP!=null&&bP.$==0?w.New({$:0,$0:null}):bN:bP!=null&&bP.$==0?bM:(bQ=w.New({$:3,$0:[],$1:[]}),(w.When(bM,bR,bQ),w.When(bN,bR,bQ),bQ));};w.Copy=function(bM){var bN,bO,bP;bN=bM.s;return bN==null?bM:bN!=null&&bN.$==2?(bO=w.New({$:2,$0:bN.$0,$1:[]}),(w.WhenObsolete(bM,bO),bO)):bN!=null&&bN.$==3?(bP=w.New({$:3,$0:[],$1:[]}),(w.When(bM,function(bQ){w.MarkDone(bP,bM,bQ);},bP),bP)):bM;};w.WhenObsoleteRun=function(bM,bN){var bO;bO=bM.s;bO==null?bN():bO!=null&&bO.$==2?bO.$1.push(bN):bO!=null&&bO.$==3?bO.$1.push(bN):void 0;};w.When=function(bM,bN,bO){var bP;bP=bM.s;bP==null?w.Obsolete(bO):bP!=null&&bP.$==2?(w.EnqueueSafe(bP.$1,bO),bN(bP.$0)):bP!=null&&bP.$==3?(bP.$0.push(bN),w.EnqueueSafe(bP.$1,bO)):bN(bP.$0);};w.MarkDone=function(bM,bN,bO){var bP;if(bP=bN.s,bP!=null&&bP.$==0)w.MarkForever(bM,bO);else w.MarkReady(bM,bO);};w.Map3Opt1=function(bM,bN,bO,bP){return w.Map(function(bQ){return bM(bN,bO,bQ);},bP);};w.Map3Opt2=function(bM,bN,bO,bP){return w.Map(function(bQ){return bM(bN,bQ,bO);},bP);};w.Map3Opt3=function(bM,bN,bO,bP){return w.Map2(function(bQ,bR){return bM(bN,bQ,bR);},bO,bP);};w.Map3Opt4=function(bM,bN,bO,bP){return w.Map(function(bQ){return bM(bQ,bN,bO);},bP);};w.Map3Opt5=function(bM,bN,bO,bP){return w.Map2(function(bQ,bR){return bM(bQ,bN,bR);},bO,bP);};w.Map3Opt6=function(bM,bN,bO,bP){return w.Map2(function(bQ,bR){return bM(bQ,bR,bN);},bO,bP);};w.ValueAndForever=function(bM){var bN;bN=bM.s;return bN!=null&&bN.$==0?{$:1,$0:[bN.$0,true]}:bN!=null&&bN.$==2?{$:1,$0:[bN.$0,false]}:null;};w.MarkForever=function(bM,bN){var bO,bP,bQ,bR;bO=bM.s;if(bO!=null&&bO.$==3){bM.s={$:0,$0:bN};bP=bO.$0;for(bQ=0,bR=n.length(bP)-1;bQ<=bR;bQ++)(n.get(bP,bQ))(bN);}else void 0;};w.MarkReady=function(bM,bN){var bO,bP,bQ,bR;bO=bM.s;if(bO!=null&&bO.$==3){bM.s={$:2,$0:bN,$1:bO.$1};bP=bO.$0;for(bQ=0,bR=n.length(bP)-1;bQ<=bR;bQ++)(n.get(bP,bQ))(bN);}else void 0;};w.Map2Opt1=function(bM,bN,bO){return w.Map(function(bP){return bM(bN,bP);},bO);};w.Map2Opt2=function(bM,bN,bO){return w.Map(function(bP){return bM(bP,bN);},bO);};w.WhenObsolete=function(bM,bN){var bO;bO=bM.s;bO==null?w.Obsolete(bN):bO!=null&&bO.$==2?w.EnqueueSafe(bO.$1,bN):bO!=null&&bO.$==3?w.EnqueueSafe(bO.$1,bN):void 0;};w.EnqueueSafe=function(bM,bN){var bO,bP,bQ,bR;bM.push(bN);if(bM.length%20===0){bO=bM.slice(0);bF.Clear(bM);for(bP=0,bQ=n.length(bO)-1;bP<=bQ;bP++){bR=n.get(bO,bP);typeof bR=="object"?function(bS){if(bS.s)bM.push(bS);}(bR):function(bS){bM.push(bS);}(bR);}}else void 0;};y.LoadLocalTemplates=function(bM){!y.LocalTemplatesLoaded()?(y.set_LocalTemplatesLoaded(true),y.LoadNestedTemplates(a.document.body,"")):void 0;y.LoadedTemplates().set_Item(bM,y.LoadedTemplateFile(""));};y.LocalTemplatesLoaded=function(){_0.$cctor();return _0.LocalTemplatesLoaded;};y.set_LocalTemplatesLoaded=function(bM){_0.$cctor();_0.LocalTemplatesLoaded=bM;};y.LoadNestedTemplates=function(bM,bN){var bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2;function bO(b3){var b4,b5;if(!bP.ContainsKey(b3)){b4=(b5=null,[bQ.TryGetValue(b3,{get:function(){return b5;},set:function(b6){b5=b6;}}),b5]);b4[0]?(b2.Add(b3),bQ.Remove(b3),y.PrepareTemplateStrict(bN,{$:1,$0:b3},b4[1][0],{$:1,$0:b4[1][1]},{$:1,$0:bO})):bJ.warn(b2.Contains(b3)?"Encountered loop when instantiating "+b3:"Local template does not exist: "+b3);}}bP=y.LoadedTemplateFile(bN);bQ=new J.New$5();bR=bM.querySelectorAll("[ws-template]");for(bS=0,bT=bR.length-1;bS<=bT;bS++){bU=bR[bS];bV=bU.getAttribute("ws-template").toLowerCase();bU.removeAttribute("ws-template");bQ.set_Item(bV,[[bU],y.FakeRootSingle(bU)]);}bW=bM.querySelectorAll("[ws-children-template]");for(bX=0,bY=bW.length-1;bX<=bY;bX++){bZ=bW[bX];b0=bZ.getAttribute("ws-children-template").toLowerCase();bZ.removeAttribute("ws-children-template");bQ.set_Item(b0,(b1=R.ChildrenArray(bZ),[b1,y.FakeRoot(b1)]));}b2=new K.New$3();while(bQ.count>0)bO(M.head(bQ.get_Keys()));};y.LoadedTemplates=function(){_0.$cctor();return _0.LoadedTemplates;};y.LoadedTemplateFile=function(bM){var bN,bO,bP;bN=(bO=null,[y.LoadedTemplates().TryGetValue(bM,{get:function(){return bO;},set:function(bQ){bO=bQ;}}),bO]);return bN[0]?bN[1]:(bP=new J.New$5(),(y.LoadedTemplates().set_Item(bM,bP),bP));};y.GetOrLoadTemplate=function(bM,bN,bO,bP){y.LoadLocalTemplates("");y.PrepareTemplate(bM,bN,bO);return y.NamedTemplate(bM,bN,bP);};y.PrepareTemplate=function(bM,bN,bO){var bP,bQ,bR,bS,bT;if(!y.LoadedTemplateFile(bM).ContainsKey(bN==null?"":bN.$0)){bP=bO();for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++){bS=n.get(bP,bQ);bT=bS.parentNode;E.Equals(bT,null)?void 0:bT.removeChild(bS);}y.PrepareTemplateStrict(bM,bN,bP,null,null);}};y.FakeRootSingle=function(bM){var bN,bO,bP;bM.removeAttribute("ws-template");bN=bM.getAttribute("ws-replace");bN===null?void 0:(bM.removeAttribute("ws-replace"),bO=bM.parentNode,E.Equals(bO,null)?void 0:(bP=a.document.createElement(bM.tagName),bP.setAttribute("ws-replace",bN),bO.replaceChild(bP,bM)));return y.FakeRoot([bM]);};y.FakeRoot=function(bM){var bN,bO,bP;bN=a.document.createElement("div");for(bO=0,bP=bM.length-1;bO<=bP;bO++)bN.appendChild(n.get(bM,bO));return bN;};y.PrepareTemplateStrict=function(bM,bN,bO,bP,bQ){var bR,bS;function bT(bY,bZ){var b0,b1,b2,b3,b4,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co;function b5(cp){}while(true)switch(bY){case 0:if(bZ!==null){b0=bZ.nextSibling;if(E.Equals(bZ.nodeType,Q.TEXT_NODE))_5.convertTextNode(bZ);else if(E.Equals(bZ.nodeType,Q.ELEMENT_NODE))bV(bZ);bZ=b0;}else return null;break;case 1:b6=_6.string(bZ.nodeName,{$:1,$0:3},null).toLowerCase();b7=(b1=b6.indexOf("."),b1===-1?[bM,b6]:[_6.string(b6,null,{$:1,$0:b1-1}),_6.string(b6,{$:1,$0:b1+1},null)]);b8=b7[1];b9=b7[0];if(b9!==""&&!y.LoadedTemplates().ContainsKey(b9))return _5.failNotLoaded(b8);else{if(b9===""&&bQ!=null)bQ.$0(b8);b_=y.LoadedTemplates().get_Item(b9);if(!b_.ContainsKey(b8))return _5.failNotLoaded(b8);else{b$=b_.get_Item(b8);ca=b$.cloneNode(true);cb=new K.New$3();cc=new J.New$5();cd=bZ.attributes;for(ce=0,cf=cd.length-1;ce<=cf;ce++){cg=cd.item(ce).name.toLowerCase();cc.set_Item(cg,(ch=cd.item(ce).nodeValue,ch===""?cg:ch.toLowerCase()));!cb.Add(cg)?bJ.warn("Hole mapped twice",cg):void 0;}for(ci=0,cj=bZ.childNodes.length-1;ci<=cj;ci++){ck=bZ.childNodes[ci];E.Equals(ck.nodeType,Q.ELEMENT_NODE)?!cb.Add(ck.nodeName.toLowerCase())?bJ.warn("Hole filled twice",b8):void 0:void 0;}cl=bZ.childNodes.length===1&&E.Equals(bZ.firstChild.nodeType,Q.TEXT_NODE);if(cl){b3=_5.fillTextHole(ca,bZ.firstChild.textContent,b8);((function(cp){return function(cq){if(cq!=null)cp(cq.$0);};}((b4=function(cp){return function(cq){return cp.Add(cq);};}(cb),function(cp){return b5(b4(cp));})))(b3));}_5.removeHolesExcept(ca,cb);if(!cl){for(cm=0,cn=bZ.childNodes.length-1;cm<=cn;cm++){co=bZ.childNodes[cm];E.Equals(co.nodeType,Q.ELEMENT_NODE)?co.hasAttributes()?_5.fillInstanceAttrs(ca,co):bU(ca,co):void 0;}}_5.mapHoles(ca,cc);_5.fill(ca,bZ.parentNode,bZ);bZ.parentNode.removeChild(bZ);return;}}break;}}function bU(bY,bZ){var b0,b2,b3;function b1(b4,b5){var b6,b7,b8;if(b2==="title"&&bZ.hasChildNodes()){b6=bI.parseHTML(bZ.textContent);bZ.removeChild(bZ.firstChild);for(b7=0,b8=b6.length-1;b7<=b8;b7++)bZ.appendChild(n.get(b6,b7));}else null;bV(bZ);return _5.fill(bZ,b4,b5);}b2=bZ.nodeName.toLowerCase();R.IterSelector(bY,"[ws-attr-holes]",function(b4){var b5,b6,b7,b8,b9;b5=bc.SplitChars(b4.getAttribute("ws-attr-holes"),[" "],1);for(b6=0,b7=b5.length-1;b6<=b7;b6++){b8=n.get(b5,b6);b4.setAttribute(b8,(b9=new a.RegExp("\\${"+b2+"}","ig"),b4.getAttribute(b8).replace(b9,bZ.textContent)));}});b3=bY.querySelector("[ws-hole="+b2+"]");if(E.Equals(b3,null)){b0=bY.querySelector("[ws-replace="+b2+"]");return E.Equals(b0,null)?null:(b1(b0.parentNode,b0),void b0.parentNode.removeChild(b0));}else{while(b3.hasChildNodes())b3.removeChild(b3.lastChild);b3.removeAttribute("ws-hole");return b1(b3,null);}}function bV(bY){if(bc.StartsWith(bY.nodeName.toLowerCase(),"ws-"))bX(bY);else{_5.convertAttrs(bY);bW(bY.firstChild);}}function bW(bY){return bT(0,bY);}function bX(bY){return bT(1,bY);}bR=bP==null?y.FakeRoot(bO):bP.$0;bS=(bN==null?"":bN.$0).toLowerCase();y.LoadedTemplateFile(bM).set_Item(bS,bR);n.length(bO)>0?(function(bY){var bZ,b0,b1,b2;while(true){bZ=bY.querySelector("[ws-template]");if(E.Equals(bZ,null)){b0=bY.querySelector("[ws-children-template]");if(E.Equals(b0,null))return null;else{b1=b0.getAttribute("ws-children-template");b0.removeAttribute("ws-children-template");y.PrepareTemplateStrict(bM,{$:1,$0:b1},R.ChildrenArray(b0),null,null);bY=bY;}}else{b2=bZ.getAttribute("ws-template");(y.PrepareSingleTemplate(bM,{$:1,$0:b2},bZ))(null);bY=bY;}}}(bR),bW(n.get(bO,0))):void 0;};y.NamedTemplate=function(bM,bN,bO){var bP,bQ;bP=(bQ=null,[y.LoadedTemplateFile(bM).TryGetValue(bN==null?"":bN.$0,{get:function(){return bQ;},set:function(bR){bQ=bR;}}),bQ]);return bP[0]?y.ChildrenTemplate(bP[1].cloneNode(true),bO):(bJ.warn("Local template doesn't exist",bN),z.get_Empty());};y.PrepareSingleTemplate=function(bM,bN,bO){var bP,bQ,bR;bP=y.FakeRootSingle(bO);bQ=[bO];bR={$:1,$0:bP};return function(bS){y.PrepareTemplateStrict(bM,bN,bQ,bR,bS);};};y.ChildrenTemplate=function(bM,bN){var bO,bP,bQ,bR,bS;bO=y.InlineTemplate(bM,bN);bP=bO[1];bQ=bO[0];bR=bQ.Els;return!E.Equals(bR,null)&&bR.length===1&&(n.get(bR,0)instanceof Q&&(E.Equals(n.get(bR,0).nodeType,Q.ELEMENT_NODE)&&(bS=n.get(bR,0),true)))?bk.TreeNode(bQ,bP):z.Mk({$:6,$0:bQ},bP);};y.TextHoleRE=function(){_0.$cctor();return _0.TextHoleRE;};y.InlineTemplate=function(bM,bN){var bO,bP,bS,bT,bU,bV,bW,bX,bY;function bQ(bZ,b0){var b1,b2,b3;b1=T.Insert(bZ,b0);bT.push(T.Updates(b1));bU.push([bZ,b1]);b2=bH.GetOptional(b1.OnAfterRender);return b2==null?null:(b3=b2.$0,void bV.push(function(){b3(bZ);}));}function bR(bZ){var b0,b1;b0=(b1=null,[bW.TryGetValue(bZ,{get:function(){return b1;},set:function(b2){b1=b2;}}),b1]);return b0[0]?b0[1].$==0?{$:1,$0:b0[1].$1}:b0[1].$==1?{$:1,$0:z.TextNode(b0[1].$1)}:b0[1].$==2?{$:1,$0:z.TextView(b0[1].$1)}:b0[1].$==8?{$:1,$0:z.TextView(b0[1].$1.get_View())}:b0[1].$==9?{$:1,$0:z.TextView(U.Map(a.String,b0[1].$1.get_View()))}:b0[1].$==10?{$:1,$0:z.TextView(U.Map(function(b2){return b2.get_Input();},b0[1].$1.get_View()))}:b0[1].$==11?{$:1,$0:z.TextView(U.Map(a.String,b0[1].$1.get_View()))}:b0[1].$==12?{$:1,$0:z.TextView(U.Map(function(b2){return b2.get_Input();},b0[1].$1.get_View()))}:b0[1].$==13?{$:1,$0:z.TextView(U.Map(a.String,b0[1].$1.get_View()))}:(bJ.warn("Content hole filled with attribute data",bZ),null):null;}bS=[];bT=[];bU=[];bV=[];bW=new J.New$5();bX=Y.Get(bN);try{while(bX.MoveNext()){bY=bX.Current();bW.set_Item(bY.$0,bY);}}finally{if(typeof bX=="object"&&"Dispose"in bX)bX.Dispose();}bO=R.ChildrenArray(bM);R.IterSelector(bM,"[ws-hole]",function(bZ){var b0,b1,b2;b2=bZ.getAttribute("ws-hole");bZ.removeAttribute("ws-hole");while(bZ.hasChildNodes())bZ.removeChild(bZ.lastChild);b0=bR(b2);b0!=null&&b0.$==1?(b1=b0.$0,_2.LinkElement(bZ,b1.docNode),bS.push(_8.New(T.Empty(bZ),b1.docNode,null,bZ,O.Int(),null)),bT.push(b1.updates)):void 0;});R.IterSelector(bM,"[ws-replace]",function(bZ){var b0,b1,b2,b3,b4,b5;b0=bR(bZ.getAttribute("ws-replace"));b0!=null&&b0.$==1?(b1=b0.$0,b2=bZ.parentNode,b3=a.document.createTextNode(""),b2.replaceChild(b3,bZ),b4=_2.InsertBeforeDelim(b3,b1.docNode),b5=n.tryFindIndex(function(b6){return bZ===b6;},bO),b5==null?void 0:n.set(bO,b5.$0,b1.docNode),bS.push(_8.New(T.Empty(b2),b1.docNode,{$:1,$0:[b4,b3]},b2,O.Int(),null)),bT.push(b1.updates)):void 0;});R.IterSelector(bM,"[ws-attr]",function(bZ){var b0,b1,b2;b0=bZ.getAttribute("ws-attr");bZ.removeAttribute("ws-attr");b1=(b2=null,[bW.TryGetValue(b0,{get:function(){return b2;},set:function(b3){b2=b3;}}),b2]);b1[0]?b1[1].$==3?bQ(bZ,b1[1].$1):bJ.warn("Attribute hole filled with non-attribute data",b0):void 0;});R.IterSelector(bM,"[ws-on]",function(bZ){bQ(bZ,p.Concat(n.choose(function(b0){var b1,b2,b3;b1=bc.SplitChars(b0,[":"],1);b2=(b3=null,[bW.TryGetValue(n.get(b1,1),{get:function(){return b3;},set:function(b4){b3=b4;}}),b3]);return b2[0]?b2[1].$==4?{$:1,$0:I.Handler(n.get(b1,0),b2[1].$1)}:b2[1].$==5?{$:1,$0:p.Handler(n.get(b1,0),b2[1].$2)}:(bJ.warn("Event hole on"+n.get(b1,0)+" filled with non-event data",n.get(b1,1)),null):null;},bc.SplitChars(bZ.getAttribute("ws-on"),[" "],1))));bZ.removeAttribute("ws-on");});R.IterSelector(bM,"[ws-onafterrender]",function(bZ){var b0,b1,b2;b0=bZ.getAttribute("ws-onafterrender");b1=(b2=null,[bW.TryGetValue(b0,{get:function(){return b2;},set:function(b3){b2=b3;}}),b2]);b1[0]?b1[1].$==6?(bZ.removeAttribute("ws-onafterrender"),bQ(bZ,I.OnAfterRender(b1[1].$1))):b1[1].$==7?(bZ.removeAttribute("ws-onafterrender"),bQ(bZ,I.OnAfterRender(b1[1].$1))):bJ.warn("onafterrender hole filled with non-onafterrender data",b0):void 0;});R.IterSelector(bM,"[ws-var]",function(bZ){var b0,b1,b2;b0=bZ.getAttribute("ws-var");bZ.removeAttribute("ws-var");b1=(b2=null,[bW.TryGetValue(b0,{get:function(){return b2;},set:function(b3){b2=b3;}}),b2]);b1[0]?b1[1].$==8?bQ(bZ,I.Value(b1[1].$1)):b1[1].$==9?bQ(bZ,I.Checked(b1[1].$1)):b1[1].$==10?bQ(bZ,I.IntValue(b1[1].$1)):b1[1].$==11?bQ(bZ,I.IntValueUnchecked(b1[1].$1)):b1[1].$==12?bQ(bZ,I.FloatValue(b1[1].$1)):b1[1].$==13?bQ(bZ,I.FloatValueUnchecked(b1[1].$1)):bJ.warn("Var hole filled with non-Var data",b0):void 0;});R.IterSelector(bM,"[ws-attr-holes]",function(bZ){var b0,b1,b2,b3;b0=new a.RegExp(y.TextHoleRE(),"g");b1=bc.SplitChars(bZ.getAttribute("ws-attr-holes"),[" "],1);bZ.removeAttribute("ws-attr-holes");for(b2=0,b3=b1.length-1;b2<=b3;b2++)(function(){var b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce;cb=n.get(b1,b2);cc=bZ.getAttribute(cb);b4=null;b5=0;cd=[];while(b4=b0.exec(cc),b4!==null){ce=_6.string(cc,{$:1,$0:b5},{$:1,$0:b0.lastIndex-n.get(b4,0).length-1});b5=b0.lastIndex;cd.push([ce,n.get(b4,1)]);}b7=_6.string(cc,{$:1,$0:b5},null);b0.lastIndex=0;b8=n.foldBack(function(cf,cg){return(function(ch){var ci,cj;ci=ch[0];cj=ch[1];return function(ck){var cl,cm,cn,co,cp;cl=ck[0];cm=ck[1];cn=(co=(cp=null,[bW.TryGetValue(cj,{get:function(){return cp;},set:function(cq){cp=cq;}}),cp]),co[0]?co[1].$==1?{$:0,$0:co[1].$1}:co[1].$==2?{$:1,$0:co[1].$1}:co[1].$==8?{$:1,$0:co[1].$1.get_View()}:co[1].$==9?{$:1,$0:U.Map(a.String,co[1].$1.get_View())}:co[1].$==10?{$:1,$0:U.Map(function(cq){return cq.get_Input();},co[1].$1.get_View())}:co[1].$==11?{$:1,$0:U.Map(a.String,co[1].$1.get_View())}:co[1].$==12?{$:1,$0:U.Map(function(cq){return cq.get_Input();},co[1].$1.get_View())}:co[1].$==13?{$:1,$0:U.Map(a.String,co[1].$1.get_View())}:(bJ.warn("Attribute value hole filled with non-text data",cj),{$:0,$0:""}):{$:0,$0:""});return cn.$==1?[ci,new H({$:1,$0:cl===""?cn.$0:U.Map(function(cq){return cq+cl;},cn.$0),$1:cm})]:[ci+cn.$0+cl,cm];};}(cf))(cg);},cd,[b7,H.Empty]);return bQ(bZ,b8[1].$==1?b8[1].$1.$==1?b8[1].$1.$1.$==1?b8[1].$1.$1.$1.$==0?(b9=b8[0],I.Dynamic(cb,U.Map3(function(cf,cg,ch){return b9+cf+cg+ch;},b8[1].$0,b8[1].$1.$0,b8[1].$1.$1.$0))):(b_=b8[0],I.Dynamic(cb,U.Map(function(cf){return b_+bc.concat("",cf);},U.Sequence(b8[1])))):(b$=b8[0],I.Dynamic(cb,U.Map2(function(cf,cg){return b$+cf+cg;},b8[1].$0,b8[1].$1.$0))):b8[0]===""?I.Dynamic(cb,b8[1].$0):(ca=b8[0],I.Dynamic(cb,U.Map(function(cf){return ca+cf;},b8[1].$0))):p.Create(cb,b8[0]));}());});return[bH.DeleteEmptyFields({Els:bO,Dirty:true,Holes:bS,Attrs:bU,Render:(bP=bV.length==0?null:{$:1,$0:function(bZ){n.iter(function(b0){b0(bZ);},bV);}},bP?bP.$0:void 0)},["Render"]),D.TreeReduce(U.Const(),U.Map2Unit,bT)];};z=g.Doc=bH.Class({},i,z);z.RunById=function(bM,bN){var bO;bO=R.Doc().getElementById(bM);E.Equals(bO,null)?f.FailWith("invalid id: "+bM):z.Run(bO,bN);};z.Run=function(bM,bN){_2.LinkElement(bM,bN.docNode);z.RunInPlace(false,bM,bN);};z.RunInPlace=function(bM,bN,bO){var bP;bP=_2.CreateRunState(bN,bO.docNode);U.Sink(_.get_UseAnimations()||$.BatchUpdatesEnabled()?ba.StartProcessor(_2.PerformAnimatedUpdate(bM,bP,bO.docNode)):function(){_2.PerformSyncUpdate(bM,bP,bO.docNode);},bO.updates);};z.get_Empty=function(){return z.Mk(null,U.Const());};z.Mk=function(bM,bN){return new z.New(bM,bN);};z.TextNode=function(bM){return z.Mk({$:5,$0:R.CreateText(bM)},U.Const());};z.TextView=function(bM){var bN;bN=_2.CreateTextNode();return z.Mk({$:4,$0:bN},U.Map(function(bO){_2.UpdateTextNode(bN,bO);},bM));};z.New=bH.Ctor(function(bM,bN){this.docNode=bM;this.updates=bN;},z);A.NewFromSeq=function(bM){var bN,bO,bP;bN={};bO=Y.Get(bM);try{while(bO.MoveNext()){bP=bO.Current();bN[bP[0]]=bP[1];}}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}return bN;};C=B.List=bH.Class({GetEnumerator:function(){return Y.Get(this);},GetEnumerator0:function(){return Y.Get0(this);}},null,C);D.ofSeqNonCopying=function(bM){var bN,bO;if(bM instanceof a.Array)return bM;else if(bM instanceof H)return n.ofList(bM);else if(bM===null)return[];else{bN=[];bO=Y.Get(bM);try{while(bO.MoveNext())bN.push(bO.Current());return bN;}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}}};D.TreeReduce=function(bM,bN,bO){var bP;function bQ(bR,bS){var bT,bU;return bS<=0?bM:bS===1&&(bR>=0&&bR<bP)?n.get(bO,bR):(bU=bS/2>>0,bN(bQ(bR,bU),bQ(bR+bU,bS-bU)));}bP=n.length(bO);return bQ(0,bP);};D.MapTreeReduce=function(bM,bN,bO,bP){var bQ;function bR(bS,bT){var bU,bV;return bT<=0?bN:bT===1&&(bS>=0&&bS<bQ)?bM(n.get(bP,bS)):(bV=bT/2>>0,bO(bR(bS,bV),bR(bS+bV,bT-bV)));}bQ=n.length(bP);return bR(0,bQ);};E.Equals=function(bM,bN){var bO,bP,bQ,bR;if(bM===bN)return true;else{bO=typeof bM;if(bO=="object"){if(bM===null||bM===void 0||bN===null||bN===void 0)return false;else if("Equals"in bM)return bM.Equals(bN);else if(bM instanceof a.Array&&bN instanceof a.Array)return E.arrayEquals(bM,bN);else if(bM instanceof a.Date&&bN instanceof a.Date)return E.dateEquals(bM,bN);else{bP=[true];for(var bS in bM)if(function(bT){bP[0]=!bM.hasOwnProperty(bT)||bN.hasOwnProperty(bT)&&E.Equals(bM[bT],bN[bT]);return!bP[0];}(bS))break;if(bP[0]){for(var bT in bN)if(function(bU){bP[0]=!bN.hasOwnProperty(bU)||bM.hasOwnProperty(bU);return!bP[0];}(bT))break;}return bP[0];}}else return bO=="function"&&("$Func"in bM?bM.$Func===bN.$Func&&bM.$Target===bN.$Target:"$Invokes"in bM&&"$Invokes"in bN&&E.arrayEquals(bM.$Invokes,bN.$Invokes));}};E.arrayEquals=function(bM,bN){var bO,bP;if(n.length(bM)===n.length(bN)){bO=true;bP=0;while(bO&&bP<n.length(bM)){!E.Equals(n.get(bM,bP),n.get(bN,bP))?bO=false:void 0;bP=bP+1;}return bO;}else return false;};E.dateEquals=function(bM,bN){return bM.getTime()===bN.getTime();};E.Hash=function(bM){var bN;bN=typeof bM;return bN=="function"?0:bN=="boolean"?bM?1:0:bN=="number"?bM:bN=="string"?E.hashString(bM):bN=="object"?bM==null?0:bM instanceof a.Array?E.hashArray(bM):E.hashObject(bM):0;};E.hashString=function(bM){var bN,bO,bP;if(bM===null)return 0;else{bN=5381;for(bO=0,bP=bM.length-1;bO<=bP;bO++)bN=E.hashMix(bN,bM[bO].charCodeAt());return bN;}};E.hashArray=function(bM){var bN,bO,bP;bN=-34948909;for(bO=0,bP=n.length(bM)-1;bO<=bP;bO++)bN=E.hashMix(bN,E.Hash(n.get(bM,bO)));return bN;};E.hashObject=function(bM){var bN,bO;if("GetHashCode"in bM)return bM.GetHashCode();else{bN=[0];for(var bP in bM)if(function(bQ){bN[0]=E.hashMix(E.hashMix(bN[0],E.hashString(bQ)),E.Hash(bM[bQ]));return false;}(bP))break;return bN[0];}};E.hashMix=function(bM,bN){return(bM<<5)+bM+bN;};E.Compare=function(bM,bN){var bO,bP,bQ,bR,bS,bT;if(bM===bN)return 0;else{bP=typeof bM;switch(bP=="function"?1:bP=="boolean"?2:bP=="number"?2:bP=="string"?2:bP=="object"?3:0){case 0:return typeof bN=="undefined"?0:-1;break;case 1:return f.FailWith("Cannot compare function values.");break;case 2:return bM<bN?-1:1;break;case 3:if(bM===null)bQ=-1;else if(bN===null)bQ=1;else if("CompareTo"in bM)bQ=bM.CompareTo(bN);else if("CompareTo0"in bM)bQ=bM.CompareTo0(bN);else if(bM instanceof a.Array&&bN instanceof a.Array)bQ=E.compareArrays(bM,bN);else if(bM instanceof a.Date&&bN instanceof a.Date)bQ=E.compareDates(bM,bN);else{bR=[0];for(var bU in bM)if(function(bV){return!bM.hasOwnProperty(bV)?false:!bN.hasOwnProperty(bV)?(bR[0]=1,true):(bR[0]=E.Compare(bM[bV],bN[bV]),bR[0]!==0);}(bU))break;if(bR[0]===0){for(var bV in bN)if(function(bW){return!bN.hasOwnProperty(bW)?false:!bM.hasOwnProperty(bW)&&(bR[0]=-1,true);}(bV))break;}bQ=bR[0];}return bQ;break;}}};E.compareArrays=function(bM,bN){var bO,bP;if(n.length(bM)<n.length(bN))return -1;else if(n.length(bM)>n.length(bN))return 1;else{bO=0;bP=0;while(bO===0&&bP<n.length(bM)){bO=E.Compare(n.get(bM,bP),n.get(bN,bP));bP=bP+1;}return bO;}};E.compareDates=function(bM,bN){return E.Compare(bM.getTime(),bN.getTime());};G.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bM){var bN,bO;bN=bK.random()*16|0;bO=bM=="x"?bN:bN&3|8;return bO.toString(16);});};H=q.T=bH.Class({GetEnumerator:function(){return new Z.New(this,null,function(bM){var bN;bN=bM.s;return bN.$==0?false:(bM.c=bN.$0,bM.s=bN.$1,true);},void 0);},GetEnumerator0:function(){return Y.Get(this);}},null,H);H.Empty=new H({$:0});I.Handler=function(bM,bN){return T.Static(function(bO){bO.addEventListener(bM,function(bP){return(bN(bO))(bP);},false);});};I.OnAfterRender=function(bM){return new p({$:4,$0:bM});};I.Value=function(bM){function bN(bO){return{$:1,$0:bO};}return I.CustomValue(bM,a.id,function(bO){return bN(a.id(bO));});};I.Checked=function(bM){function bN(bO,bP){return!E.Equals(bM.Get(),bO.checked)?bM.Set(bO.checked):null;}return p.Concat([I.DynamicProp("checked",bM.get_View()),I.Handler("change",function(bO){return function(bP){return bN(bO,bP);};})]);};I.IntValue=function(bM){return I.CustomVar(bM,function(bN,bO){var bP;bP=bO.get_Input();return bN.value!==bP?void(bN.value=bP):null;},function(bN){var bO,bP,bQ;bO=bN.value;return{$:1,$0:bu.isBlank(bO)?(bN.checkValidity?bN.checkValidity():true)?new V({$:2,$0:bO}):new V({$:1,$0:bO}):(bP=(bQ=0,[W.TryParseInt32(bO,{get:function(){return bQ;},set:function(bR){bQ=bR;}}),bQ]),bP[0]?new V({$:0,$0:bP[1],$1:bO}):new V({$:1,$0:bO}))};});};I.IntValueUnchecked=function(bM){return I.CustomValue(bM,a.String,function(bN){var bO;return bu.isBlank(bN)?{$:1,$0:0}:(bO=+bN,bO!==bO>>0?null:{$:1,$0:bO});});};I.FloatValue=function(bM){return I.CustomVar(bM,function(bN,bO){var bP;bP=bO.get_Input();return bN.value!==bP?void(bN.value=bP):null;},function(bN){var bO,bP;bO=bN.value;return{$:1,$0:bu.isBlank(bO)?(bN.checkValidity?bN.checkValidity():true)?new V({$:2,$0:bO}):new V({$:1,$0:bO}):(bP=+bO,a.isNaN(bP)?new V({$:1,$0:bO}):new V({$:0,$0:bP,$1:bO}))};});};I.FloatValueUnchecked=function(bM){return I.CustomValue(bM,a.String,function(bN){var bO;return bu.isBlank(bN)?{$:1,$0:0}:(bO=+bN,a.isNaN(bO)?null:{$:1,$0:bO});});};I.Dynamic=function(bM,bN){return T.Dynamic(bN,function(bO){return function(bP){return R.SetAttr(bO,bM,bP);};});};I.CustomValue=function(bM,bN,bO){return I.CustomVar(bM,function(bP,bQ){bP.value=bN(bQ);},function(bP){return bO(bP.value);});};I.DynamicProp=function(bM,bN){return T.Dynamic(bN,function(bO){return function(bP){bO[bM]=bP;};});};I.CustomVar=function(bM,bN,bO){function bP(bR,bS){return bM.UpdateMaybe(function(bT){var bU,bV;bU=bO(bR);return bU!=null&&bU.$==1&&(!E.Equals(bU.$0,bT)&&(bV=[bU,bU.$0],true))?bV[0]:null;});}function bQ(bR,bS){var bT,bU;bT=bO(bR);return bT!=null&&bT.$==1&&(E.Equals(bT.$0,bS)&&(bU=bT.$0,true))?null:bN(bR,bS);}return p.Concat([I.Handler("change",function(bR){return function(bS){return bP(bR,bS);};}),I.Handler("input",function(bR){return function(bS){return bP(bR,bS);};}),I.Handler("keypress",function(bR){return function(bS){return bP(bR,bS);};}),I.DynamicCustom(function(bR){return function(bS){return bQ(bR,bS);};},bM.get_View())]);};I.DynamicCustom=function(bM,bN){return T.Dynamic(bN,bM);};J=B.Dictionary=bH.Class({set_Item:function(bM,bN){this.set(bM,bN);},set:function(bM,bN){var bO,bP,bQ,bR;bO=this;bP=this.hash(bM);bQ=this.data[bP];bQ==null?(this.count=this.count+1,this.data[bP]=new a.Array({K:bM,V:bN})):(bR=n.tryFindIndex(function(bS){return bO.equals.apply(null,[(f.KeyValue(bS))[0],bM]);},bQ),bR==null?(this.count=this.count+1,bQ.push({K:bM,V:bN})):bQ[bR.$0]={K:bM,V:bN});},ContainsKey:function(bM){var bN,bO;bN=this;bO=this.data[this.hash(bM)];return bO==null?false:n.exists(function(bP){return bN.equals.apply(null,[(f.KeyValue(bP))[0],bM]);},bO);},TryGetValue:function(bM,bN){var bO,bP,bQ;bO=this;bP=this.data[this.hash(bM)];return bP==null?false:(bQ=n.tryPick(function(bR){var bS;bS=f.KeyValue(bR);return bO.equals.apply(null,[bS[0],bM])?{$:1,$0:bS[1]}:null;},bP),bQ!=null&&bQ.$==1&&(bN.set(bQ.$0),true));},Remove:function(bM){return this.remove(bM);},get_Keys:function(){return new _7.New(this);},remove:function(bM){var bN,bO,bP,bQ;bN=this;bO=this.hash(bM);bP=this.data[bO];return bP==null?false:(bQ=n.filter(function(bR){return!bN.equals.apply(null,[(f.KeyValue(bR))[0],bM]);},bP),n.length(bQ)<bP.length&&(this.count=this.count-1,this.data[bO]=bQ,true));},get_Item:function(bM){return this.get(bM);},get:function(bM){var bN,bO;bN=this;bO=this.data[this.hash(bM)];return bO==null?X.notPresent():n.pick(function(bP){var bQ;bQ=f.KeyValue(bP);return bN.equals.apply(null,[bQ[0],bM])?{$:1,$0:bQ[1]}:null;},bO);},GetEnumerator:function(){return Y.Get0(this);},GetEnumerator0:function(){return Y.Get0(n.concat(t.GetFieldValues(this.data)));}},i,J);J.New$5=bH.Ctor(function(){J.New$6.call(this,[],E.Equals,E.Hash);},J);J.New$6=bH.Ctor(function(bM,bN,bO){var bP,bQ;this.equals=bN;this.hash=bO;this.count=0;this.data=[];bP=Y.Get(bM);try{while(bP.MoveNext()){bQ=bP.Current();this.set(bQ.K,bQ.V);}}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}},J);K=B.HashSet=bH.Class({Add:function(bM){return this.add(bM);},Contains:function(bM){var bN;bN=this.data[this.hash(bM)];return bN==null?false:this.arrContains(bM,bN);},add:function(bM){var bN,bO;bN=this.hash(bM);bO=this.data[bN];return bO==null?(this.data[bN]=[bM],this.count=this.count+1,true):this.arrContains(bM,bO)?false:(bO.push(bM),this.count=this.count+1,true);},arrContains:function(bM,bN){var bO,bP,bQ,bR;bO=true;bP=0;bR=bN.length;while(bO&&bP<bR)if(this.equals.apply(null,[bN[bP],bM]))bO=false;else bP=bP+1;return!bO;},ExceptWith:function(bM){var bN;bN=Y.Get(bM);try{while(bN.MoveNext())this.Remove(bN.Current());}finally{if(typeof bN=="object"&&"Dispose"in bN)bN.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bM){var bN,bO,bP,bQ;bN=0;bO=bb.concat(this.data);for(bP=0,bQ=bO.length-1;bP<=bQ;bP++)n.set(bM,bP,bO[bP]);},IntersectWith:function(bM){var bN,bO,bP,bQ,bR;bN=new K.New$4(bM,this.equals,this.hash);bO=bb.concat(this.data);for(bP=0,bQ=bO.length-1;bP<=bQ;bP++){bR=bO[bP];!bN.Contains(bR)?this.Remove(bR):void 0;}},Remove:function(bM){var bN;bN=this.data[this.hash(bM)];return bN==null?false:this.arrRemove(bM,bN)&&(this.count=this.count-1,true);},arrRemove:function(bM,bN){var bO,bP,bQ,bR;bO=true;bP=0;bR=bN.length;while(bO&&bP<bR)if(this.equals.apply(null,[bN[bP],bM])){bN.splice.apply(bN,[bP,1]);bO=false;}else bP=bP+1;return!bO;},GetEnumerator:function(){return Y.Get(bb.concat(this.data));},GetEnumerator0:function(){return Y.Get(bb.concat(this.data));}},i,K);K.New$3=bH.Ctor(function(){K.New$4.call(this,[],E.Equals,E.Hash);},K);K.New$4=bH.Ctor(function(bM,bN,bO){var bP;this.equals=bN;this.hash=bO;this.data=[];this.count=0;bP=Y.Get(bM);try{while(bP.MoveNext())this.add(bP.Current());}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}},K);K.New$2=bH.Ctor(function(bM){K.New$4.call(this,bM,E.Equals,E.Hash);},K);L.Box=a.id;M.append=function(bM,bN){return{GetEnumerator:function(){var bO,bP;bO=Y.Get(bM);bP=[true];return new Z.New(bO,null,function(bQ){var bR;return bQ.s.MoveNext()?(bQ.c=bQ.s.Current(),true):(bR=bQ.s,!E.Equals(bR,null)?bR.Dispose():void 0,bQ.s=null,bP[0]&&(bP[0]=false,bQ.s=Y.Get(bN),bQ.s.MoveNext()?(bQ.c=bQ.s.Current(),true):(bQ.s.Dispose(),bQ.s=null,false)));},function(bQ){var bR;bR=bQ.s;!E.Equals(bR,null)?bR.Dispose():void 0;});}};};M.head=function(bM){var bN;bN=Y.Get(bM);try{return bN.MoveNext()?bN.Current():M.insufficient();}finally{if(typeof bN=="object"&&"Dispose"in bN)bN.Dispose();}};M.fold=function(bM,bN,bO){var bP,bQ;bP=bN;bQ=Y.Get(bO);try{while(bQ.MoveNext())bP=bM(bP,bQ.Current());return bP;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};M.iter=function(bM,bN){var bO;bO=Y.Get(bN);try{while(bO.MoveNext())bM(bO.Current());}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};M.map=function(bM,bN){return{GetEnumerator:function(){var bO;bO=Y.Get(bN);return new Z.New(null,null,function(bP){return bO.MoveNext()&&(bP.c=bM(bO.Current()),true);},function(){bO.Dispose();});}};};M.max=function(bM){var bN,bO,bP;bN=Y.Get(bM);try{if(!bN.MoveNext())M.seqEmpty();bO=bN.Current();while(bN.MoveNext()){bP=bN.Current();E.Compare(bP,bO)===1?bO=bP:void 0;}return bO;}finally{if(typeof bN=="object"&&"Dispose"in bN)bN.Dispose();}};M.seqEmpty=function(){return f.FailWith("The input sequence was empty.");};M.forall=function(bM,bN){return!M.exists(function(bO){return!bM(bO);},bN);};M.exists=function(bM,bN){var bO,bP;bO=Y.Get(bN);try{bP=false;while(!bP&&bO.MoveNext())bP=bM(bO.Current());return bP;}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};n.choose=function(bM,bN){var bO,bP,bQ,bR;bO=[];for(bP=0,bQ=bN.length-1;bP<=bQ;bP++){bR=bM(bN[bP]);bR==null?void 0:bO.push(bR.$0);}return bO;};n.ofList=function(bM){var bN,bO;bO=[];bN=bM;while(!(bN.$==0)){bO.push(q.head(bN));bN=q.tail(bN);}return bO;};n.tryFindIndex=function(bM,bN){var bO,bP;bO=null;bP=0;while(bP<bN.length&&bO==null){bM(bN[bP])?bO={$:1,$0:bP}:void 0;bP=bP+1;}return bO;};n.exists=function(bM,bN){var bO,bP,bQ,bR;bO=false;bP=0;bR=n.length(bN);while(!bO&&bP<bR)if(bM(bN[bP]))bO=true;else bP=bP+1;return bO;};n.tryPick=function(bM,bN){var bO,bP,bQ;bO=null;bP=0;while(bP<bN.length&&bO==null){bQ=bM(bN[bP]);bQ!=null&&bQ.$==1?bO=bQ:void 0;bP=bP+1;}return bO;};n.concat=function(bM){return a.Array.prototype.concat.apply([],n.ofSeq(bM));};n.filter=function(bM,bN){var bO,bP,bQ;bO=[];for(bP=0,bQ=bN.length-1;bP<=bQ;bP++)if(bM(bN[bP]))bO.push(bN[bP]);return bO;};n.map=function(bM,bN){var bO,bP,bQ;bO=new a.Array(bN.length);for(bP=0,bQ=bN.length-1;bP<=bQ;bP++)bO[bP]=bM(bN[bP]);return bO;};n.iter=function(bM,bN){var bO,bP;for(bO=0,bP=bN.length-1;bO<=bP;bO++)bM(bN[bO]);};n.foldBack=function(bM,bN,bO){var bP,bQ,bR,bS,bT;bP=bO;bR=bN.length;for(bS=1,bT=bR;bS<=bT;bS++)bP=bM(bN[bR-bS],bP);return bP;};n.ofSeq=function(bM){var bN,bO;if(bM instanceof a.Array)return bM.slice();else if(bM instanceof H)return n.ofList(bM);else{bN=[];bO=Y.Get(bM);try{while(bO.MoveNext())bN.push(bO.Current());return bN;}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}}};n.pick=function(bM,bN){var bO;bO=n.tryPick(bM,bN);return bO==null?f.FailWith("KeyNotFoundException"):bO.$0;};n.create=function(bM,bN){var bO,bP,bQ;bO=new a.Array(bM);for(bP=0,bQ=bM-1;bP<=bQ;bP++)bO[bP]=bN;return bO;};n.forall=function(bM,bN){var bO,bP,bQ,bR;bO=true;bP=0;bR=n.length(bN);while(bO&&bP<bR)if(bM(bN[bP]))bP=bP+1;else bO=false;return bO;};n.init=function(bM,bN){var bO,bP,bQ;bM<0?f.FailWith("Negative size given."):null;bO=new a.Array(bM);for(bP=0,bQ=bM-1;bP<=bQ;bP++)bO[bP]=bN(bP);return bO;};O.Int=function(){O.set_counter(O.counter()+1);return O.counter();};O.set_counter=function(bM){_4.$cctor();_4.counter=bM;};O.counter=function(){_4.$cctor();return _4.counter;};R.Doc=function(){_1.$cctor();return _1.Doc;};R.ChildrenArray=function(bM){var bN,bO,bP;bN=[];for(bO=0,bP=bM.childNodes.length-1;bO<=bP;bO++)bN.push(bM.childNodes[bO]);return bN;};R.IterSelector=function(bM,bN,bO){var bP,bQ,bR;bP=bM.querySelectorAll(bN);for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++)bO(bP[bQ]);};R.InsertAt=function(bM,bN,bO){var bP;if(!(bO.parentNode===bM&&bN===(bP=bO.nextSibling,E.Equals(bP,null)?null:bP)))bM.insertBefore(bO,bN);};R.CreateText=function(bM){return R.Doc().createTextNode(bM);};R.SetAttr=function(bM,bN,bO){bM.setAttribute(bN,bO);};R.RemoveNode=function(bM,bN){if(bN.parentNode===bM)bM.removeChild(bN);};T.AppendTree=function(bM,bN){var bO;return bM===null?bN:bN===null?bM:(bO=new p({$:2,$0:bM,$1:bN}),(T.SetFlags(bO,T.Flags(bM)|T.Flags(bN)),bO));};T.EmptyAttr=function(){_3.$cctor();return _3.EmptyAttr;};T.Static=function(bM){return new p({$:3,$0:bM});};T.SetFlags=function(bM,bN){bM.flags=bN;};T.Flags=function(bM){return bM!==null&&bM.hasOwnProperty("flags")?bM.flags:0;};T.Insert=function(bM,bN){var bO,bP,bQ;function bR(bS){if(!(bS===null))if(bS!=null&&bS.$==1)bO.push(bS.$0);else if(bS!=null&&bS.$==2){bR(bS.$0);bR(bS.$1);}else if(bS!=null&&bS.$==3)bS.$0(bM);else if(bS!=null&&bS.$==4)bP.push(bS.$0);}bO=[];bP=[];bR(bN);bQ=bO.slice(0);return be.New(bM,T.Flags(bN),bQ,bP.length===0?null:{$:1,$0:function(bS){M.iter(function(bT){bT(bS);},bP);}});};T.HasExitAnim=function(bM){var bN;bN=2;return(bM.DynFlags&bN)===bN;};T.GetExitAnim=function(bM){return T.GetAnim(bM,function(bN,bO){return bN.NGetExitAnim(bO);});};T.HasEnterAnim=function(bM){var bN;bN=1;return(bM.DynFlags&bN)===bN;};T.GetEnterAnim=function(bM){return T.GetAnim(bM,function(bN,bO){return bN.NGetEnterAnim(bO);});};T.HasChangeAnim=function(bM){var bN;bN=4;return(bM.DynFlags&bN)===bN;};T.GetChangeAnim=function(bM){return T.GetAnim(bM,function(bN,bO){return bN.NGetChangeAnim(bO);});};T.Updates=function(bM){return D.MapTreeReduce(function(bN){return bN.NChanged();},U.Const(),U.Map2Unit,bM.DynNodes);};T.Empty=function(bM){return be.New(bM,0,[],null);};T.GetAnim=function(bM,bN){return _.Concat(n.map(function(bO){return bN(bO,bM.DynElem);},bM.DynNodes));};T.Sync=function(bM,bN){n.iter(function(bO){bO.NSync(bM);},bN.DynNodes);};T.Dynamic=function(bM,bN){return new p({$:1,$0:new bz.New(bM,bN)});};U=g.View=bH.Class({},null,U);V=g.CheckedInput=bH.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,V);W.TryParseInt32=function(bM,bN){return W.TryParse(bM,-2147483648,2147483647,bN);};X.notPresent=function(){return f.FailWith("The given key was not present in the dictionary.");};Y.Get=function(bM){return bM instanceof a.Array?Y.ArrayEnumerator(bM):E.Equals(typeof bM,"string")?Y.StringEnumerator(bM):bM.GetEnumerator();};Y.ArrayEnumerator=function(bM){return new Z.New(0,null,function(bN){var bO;bO=bN.s;return bO<n.length(bM)&&(bN.c=n.get(bM,bO),bN.s=bO+1,true);},void 0);};Y.StringEnumerator=function(bM){return new Z.New(0,null,function(bN){var bO;bO=bN.s;return bO<bM.length&&(bN.c=bM[bO],bN.s=bO+1,true);},void 0);};Y.Get0=function(bM){return bM instanceof a.Array?Y.ArrayEnumerator(bM):E.Equals(typeof bM,"string")?Y.StringEnumerator(bM):"GetEnumerator0"in bM?bM.GetEnumerator0():bM.GetEnumerator();};Z=Y.T=bH.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},i,Z);Z.New=bH.Ctor(function(bM,bN,bO,bP){this.s=bM;this.c=bN;this.n=bO;this.d=bP;},Z);w.Obsolete=function(bM){var bN,bO,bP,bQ,bR;bO=bM.s;if(bO==null||(bO!=null&&bO.$==2?(bN=bO.$1,false):bO!=null&&bO.$==3?(bN=bO.$1,false):true))void 0;else{bM.s=null;for(bP=0,bQ=n.length(bN)-1;bP<=bQ;bP++){bR=n.get(bN,bP);typeof bR=="object"?function(bS){w.Obsolete(bS);}(bR):bR();}}};w.New=function(bM){return{s:bM};};_0.$cctor=function(){_0.$cctor=a.ignore;_0.LoadedTemplates=new J.New$5();_0.LocalTemplatesLoaded=false;_0.TextHoleRE="\\${([^}]+)}";};_1.$cctor=function(){_1.$cctor=a.ignore;_1.Doc=a.document;};_2.LinkElement=function(bM,bN){_2.InsertDoc(bM,bN,null);};_2.InsertDoc=function(bM,bN,bO){var bP;return bN!=null&&bN.$==1?_2.InsertNode(bM,bN.$0.El,bO):bN!=null&&bN.$==2?(bP=bN.$0,(bP.Dirty=false,_2.InsertDoc(bM,bP.Current,bO))):bN==null?bO:bN!=null&&bN.$==4?_2.InsertNode(bM,bN.$0.Text,bO):bN!=null&&bN.$==5?_2.InsertNode(bM,bN.$0,bO):bN!=null&&bN.$==6?n.foldBack(function(bQ,bR){return bQ==null||bQ.constructor===S?_2.InsertDoc(bM,bQ,bR):_2.InsertNode(bM,bQ,bR);},bN.$0.Els,bO):_2.InsertDoc(bM,bN.$0,_2.InsertDoc(bM,bN.$1,bO));};_2.CreateRunState=function(bM,bN){return bg.New(bh.get_Empty(),_2.CreateElemNode(bM,T.EmptyAttr(),bN));};_2.PerformAnimatedUpdate=function(bM,bN,bO){var bP;return _.get_UseAnimations()?(bP=null,bm.Delay(function(){var bQ,bR,bS;bQ=bh.FindAll(bO);bR=_2.ComputeChangeAnim(bN,bQ);bS=_2.ComputeEnterAnim(bN,bQ);return bm.Bind(_.Play(_.Append(bR,_2.ComputeExitAnim(bN,bQ))),function(){return bm.Bind(_2.SyncElemNodesNextFrame(bM,bN),function(){return bm.Bind(_.Play(bS),function(){bN.PreviousNodes=bQ;return bm.Return(null);});});});})):_2.SyncElemNodesNextFrame(bM,bN);};_2.PerformSyncUpdate=function(bM,bN,bO){var bP;bP=bh.FindAll(bO);_2.SyncElemNode(bM,bN.Top);bN.PreviousNodes=bP;};_2.InsertNode=function(bM,bN,bO){R.InsertAt(bM,bO,bN);return bN;};_2.CreateElemNode=function(bM,bN,bO){var bP;_2.LinkElement(bM,bO);bP=T.Insert(bM,bN);return _8.New(bP,bO,null,bM,O.Int(),bH.GetOptional(bP.OnAfterRender));};_2.SyncElemNodesNextFrame=function(bM,bN){function bO(bP){a.requestAnimationFrame(function(){_2.SyncElemNode(bM,bN.Top);bP();});}return $.BatchUpdatesEnabled()?bm.FromContinuations(function(bP,bQ,bR){return bO.apply(null,[bP,bQ,bR]);}):(_2.SyncElemNode(bM,bN.Top),bm.Return(null));};_2.ComputeExitAnim=function(bM,bN){return _.Concat(n.map(function(bO){return T.GetExitAnim(bO.Attr);},bh.ToArray(bh.Except(bN,bh.Filter(function(bO){return T.HasExitAnim(bO.Attr);},bM.PreviousNodes)))));};_2.ComputeEnterAnim=function(bM,bN){return _.Concat(n.map(function(bO){return T.GetEnterAnim(bO.Attr);},bh.ToArray(bh.Except(bM.PreviousNodes,bh.Filter(function(bO){return T.HasEnterAnim(bO.Attr);},bN)))));};_2.ComputeChangeAnim=function(bM,bN){var bO;function bP(bQ){return T.HasChangeAnim(bQ.Attr);}bO=function(bQ){return bh.Filter(bP,bQ);};return _.Concat(n.map(function(bQ){return T.GetChangeAnim(bQ.Attr);},bh.ToArray(bh.Intersect(bO(bM.PreviousNodes),bO(bN)))));};_2.SyncElemNode=function(bM,bN){!bM?_2.SyncElement(bN):void 0;_2.Sync(bN.Children);_2.AfterRender(bN);};_2.SyncElement=function(bM){function bN(bO){function bP(bQ){var bR,bS;return bQ!=null&&bQ.$==0?bP(bQ.$0)||bP(bQ.$1):bQ!=null&&bQ.$==2?(bR=bQ.$0,bR.Dirty||bP(bR.Current)):bQ!=null&&bQ.$==6&&(bS=bQ.$0,bS.Dirty||n.exists(bN,bS.Holes));}return bP(bO.Children);}T.Sync(bM.El,bM.Attr);bN(bM)?_2.DoSyncElement(bM):void 0;};_2.Sync=function(bM){var bN,bO;if(bM!=null&&bM.$==1)_2.SyncElemNode(false,bM.$0);else if(bM!=null&&bM.$==2)_2.Sync(bM.$0.Current);else if(bM==null);else if(bM!=null&&bM.$==5);else if(bM!=null&&bM.$==4){bN=bM.$0;bN.Dirty?(bN.Text.nodeValue=bN.Value,bN.Dirty=false):void 0;}else if(bM!=null&&bM.$==6){bO=bM.$0;n.iter(function(bP){_2.SyncElemNode(false,bP);},bO.Holes);n.iter(function(bP){T.Sync(bP[0],bP[1]);},bO.Attrs);_2.AfterRender(bO);}else{_2.Sync(bM.$0);_2.Sync(bM.$1);}};_2.AfterRender=function(bM){var bN;bN=bH.GetOptional(bM.Render);bN!=null&&bN.$==1?(bN.$0(bM.El),bH.SetOptional(bM,"Render",null)):void 0;};_2.InsertBeforeDelim=function(bM,bN){var bO,bP;bO=bM.parentNode;bP=a.document.createTextNode("");bO.insertBefore(bP,bM);_2.LinkPrevElement(bM,bN);return bP;};_2.DoSyncElement=function(bM){var bN,bO,bP;function bQ(bR,bS){var bT,bU;return bR!=null&&bR.$==1?bR.$0.El:bR!=null&&bR.$==2?(bT=bR.$0,bT.Dirty?(bT.Dirty=false,_2.InsertDoc(bN,bT.Current,bS)):bQ(bT.Current,bS)):bR==null?bS:bR!=null&&bR.$==4?bR.$0.Text:bR!=null&&bR.$==5?bR.$0:bR!=null&&bR.$==6?(bU=bR.$0,(bU.Dirty?bU.Dirty=false:void 0,n.foldBack(function(bV,bW){return bV==null||bV.constructor===S?bQ(bV,bW):bV;},bU.Els,bS))):bQ(bR.$0,bQ(bR.$1,bS));}bN=bM.El;bx.Iter((bO=bM.El,function(bR){R.RemoveNode(bO,bR);}),bx.Except(bx.DocChildren(bM),bx.Children(bM.El,bH.GetOptional(bM.Delimiters))));bQ(bM.Children,(bP=bH.GetOptional(bM.Delimiters),bP!=null&&bP.$==1?bP.$0[1]:null));};_2.CreateTextNode=function(){return{Text:R.CreateText(""),Dirty:false,Value:""};};_2.UpdateTextNode=function(bM,bN){bM.Value=bN;bM.Dirty=true;};_2.LinkPrevElement=function(bM,bN){_2.InsertDoc(bM.parentNode,bN,bM);};_3.$cctor=function(){_3.$cctor=a.ignore;_3.EmptyAttr=null;};_4.$cctor=function(){_4.$cctor=a.ignore;_4.counter=0;};_5.convertTextNode=function(bM){var bN,bO,bP,bQ,bR,bS;bN=null;bO=0;bQ=bM.textContent;bR=new a.RegExp(y.TextHoleRE(),"g");while(bN=bR.exec(bQ),bN!==null){bM.parentNode.insertBefore(a.document.createTextNode(_6.string(bQ,{$:1,$0:bO},{$:1,$0:bR.lastIndex-n.get(bN,0).length-1})),bM);bO=bR.lastIndex;bS=a.document.createElement("span");bS.setAttribute("ws-replace",n.get(bN,1).toLowerCase());bM.parentNode.insertBefore(bS,bM);}bR.lastIndex=0;bM.textContent=_6.string(bQ,{$:1,$0:bO},null);};_5.failNotLoaded=function(bM){bJ.warn("Instantiating non-loaded template",bM);};_5.fillTextHole=function(bM,bN,bO){var bP;bP=bM.querySelector("[ws-replace]");return E.Equals(bP,null)?(bJ.warn("Filling non-existent text hole",bO),null):(bP.parentNode.replaceChild(new a.Text(bN),bP),{$:1,$0:bP.getAttribute("ws-replace")});};_5.removeHolesExcept=function(bM,bN){function bO(bP){R.IterSelector(bM,"["+bP+"]",function(bQ){if(!bN.Contains(bQ.getAttribute(bP)))bQ.removeAttribute(bP);});}bO("ws-attr");bO("ws-onafterrender");bO("ws-var");R.IterSelector(bM,"[ws-hole]",function(bP){if(!bN.Contains(bP.getAttribute("ws-hole"))){bP.removeAttribute("ws-hole");while(bP.hasChildNodes())bP.removeChild(bP.lastChild);}});R.IterSelector(bM,"[ws-replace]",function(bP){if(!bN.Contains(bP.getAttribute("ws-replace")))bP.parentNode.removeChild(bP);});R.IterSelector(bM,"[ws-on]",function(bP){bP.setAttribute("ws-on",bc.concat(" ",n.filter(function(bQ){return bN.Contains(n.get(bc.SplitChars(bQ,[":"],1),1));},bc.SplitChars(bP.getAttribute("ws-on"),[" "],1))));});R.IterSelector(bM,"[ws-attr-holes]",function(bP){var bQ,bR,bS,bT,bU;bQ=bc.SplitChars(bP.getAttribute("ws-attr-holes"),[" "],1);for(bR=0,bS=bQ.length-1;bR<=bS;bR++){bT=n.get(bQ,bR);bP.setAttribute(bT,(bU=new a.RegExp(y.TextHoleRE(),"g"),bP.getAttribute(bT).replace(bU,function(bV,bW){return bN.Contains(bW)?bV:"";})));}});};_5.fillInstanceAttrs=function(bM,bN){var bO,bP,bQ,bR,bS;_5.convertAttrs(bN);bO=bN.nodeName.toLowerCase();bP=bM.querySelector("[ws-attr="+bO+"]");if(E.Equals(bP,null))bJ.warn("Filling non-existent attr hole",bO);else{bP.removeAttribute("ws-attr");for(bQ=0,bR=bN.attributes.length-1;bQ<=bR;bQ++){bS=bN.attributes.item(bQ);bS.name==="class"&&bP.hasAttribute("class")?bP.setAttribute("class",bP.getAttribute("class")+" "+bS.nodeValue):bP.setAttribute(bS.name,bS.nodeValue);}}};_5.mapHoles=function(bM,bN){function bO(bP){R.IterSelector(bM,"["+bP+"]",function(bQ){var bR,bS;bR=(bS=null,[bN.TryGetValue(bQ.getAttribute(bP).toLowerCase(),{get:function(){return bS;},set:function(bT){bS=bT;}}),bS]);bR[0]?bQ.setAttribute(bP,bR[1]):void 0;});}bO("ws-hole");bO("ws-replace");bO("ws-attr");bO("ws-onafterrender");bO("ws-var");R.IterSelector(bM,"[ws-on]",function(bP){bP.setAttribute("ws-on",bc.concat(" ",n.map(function(bQ){var bR,bS,bT;bR=bc.SplitChars(bQ,[":"],1);bS=(bT=null,[bN.TryGetValue(n.get(bR,1),{get:function(){return bT;},set:function(bU){bT=bU;}}),bT]);return bS[0]?n.get(bR,0)+":"+bS[1]:bQ;},bc.SplitChars(bP.getAttribute("ws-on"),[" "],1))));});R.IterSelector(bM,"[ws-attr-holes]",function(bP){var bQ,bR,bS;bQ=bc.SplitChars(bP.getAttribute("ws-attr-holes"),[" "],1);for(bR=0,bS=bQ.length-1;bR<=bS;bR++)(function(){var bT;function bU(bV,bW){var bX;bX=f.KeyValue(bW);return bV.replace(new a.RegExp("\\${"+bX[0]+"}","ig"),"${"+bX[1]+"}");}bT=n.get(bQ,bR);return bP.setAttribute(bT,(((bH.Curried3(M.fold))(bU))(bP.getAttribute(bT)))(bN));}());});};_5.fill=function(bM,bN,bO){while(true)if(bM.hasChildNodes())bO=bN.insertBefore(bM.lastChild,bO);else return null;};_5.convertAttrs=function(bM){var bO,bP,bQ,bR,bS,bT,bU,bV;function bN(bW){var bX;bX=bM.getAttribute(bW);bX===null?void 0:bM.setAttribute(bW,bX.toLowerCase());}bO=bM.attributes;bP=[];bQ=[];bR=[];for(bS=0,bT=bO.length-1;bS<=bT;bS++){bU=bO.item(bS);bc.StartsWith(bU.nodeName,"ws-on")&&bU.nodeName!=="ws-onafterrender"&&bU.nodeName!=="ws-on"?(bP.push(bU.nodeName),bQ.push(_6.string(bU.nodeName,{$:1,$0:"ws-on".length},null)+":"+bU.nodeValue.toLowerCase())):!bc.StartsWith(bU.nodeName,"ws-")&&(new a.RegExp(y.TextHoleRE())).test(bU.nodeValue)?(bU.nodeValue=(bV=new a.RegExp(y.TextHoleRE(),"g"),bU.nodeValue.replace(bV,function(bW,bX){return"${"+bX.toLowerCase()+"}";})),bR.push(bU.nodeName)):void 0;}!(bQ.length==0)?bM.setAttribute("ws-on",bc.concat(" ",bQ)):void 0;!(bR.length==0)?bM.setAttribute("ws-attr-holes",bc.concat(" ",bR)):void 0;bN("ws-hole");bN("ws-replace");bN("ws-attr");bN("ws-onafterrender");bN("ws-var");n.iter(function(bW){bM.removeAttribute(bW);},bP);};_6.string=function(bM,bN,bO){return bN==null?bO!=null&&bO.$==1?bM.slice(0,bO.$0+1):"":bO==null?bM.slice(bN.$0):bM.slice(bN.$0,bO.$0+1);};M.insufficient=function(){return f.FailWith("The input sequence has an insufficient number of elements.");};_7=B.KeyCollection=bH.Class({GetEnumerator$1:function(){return Y.Get(M.map(function(bM){return bM.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},i,_7);_7.New=bH.Ctor(function(bM){this.d=bM;},_7);_8=g.DocElemNode=bH.Class({Equals:function(bM){return this.ElKey===bM.ElKey;},GetHashCode:function(){return this.ElKey;}},null,_8);_8.New=function(bM,bN,bO,bP,bQ,bR){var bS;return new _8((bS={Attr:bM,Children:bN,El:bP,ElKey:bQ},(bH.SetOptional(bS,"Delimiters",bO),bH.SetOptional(bS,"Render",bR),bS)));};U.Sink=function(bM,bN){function bO(){w.WhenRun(bN(),bM,function(){bm.scheduler().Fork(bO);});}bm.scheduler().Fork(bO);};U.Const=function(bM){var bN;bN=w.New({$:0,$0:bM});return function(){return bN;};};U.Map=function(bM,bN){return U.CreateLazy(function(){return w.Map(bM,bN());});};U.Map3=function(bM,bN,bO,bP){return U.CreateLazy(function(){return w.Map3(bM,bN(),bO(),bP());});};U.Sequence=function(bM){return U.CreateLazy(function(){return w.Sequence(M.map(function(bN){return bN();},bM));});};U.Map2=function(bM,bN,bO){return U.CreateLazy(function(){return w.Map2(bM,bN(),bO());});};U.Map2Unit=function(bM,bN){return U.CreateLazy(function(){return w.Map2Unit(bM(),bN());});};U.CreateLazy=function(bM){var bN;bN={c:null,o:bM};return function(){var bO,bP;bO=bN.c;return bO===null?(bO=bN.o(),bN.c=bO,(bP=bO.s,bP!=null&&bP.$==0)?bN.o=null:w.WhenObsoleteRun(bO,function(){bN.c=null;}),bO):bO;};};_.get_UseAnimations=function(){return bi.UseAnimations();};_.Play=function(bM){var bN;bN=null;return bm.Delay(function(){return bm.Bind(_.Run(a.ignore,bi.Actions(bM)),function(){bi.Finalize(bM);return bm.Return(null);});});};_.Append=function(bM,bN){return{$:0,$0:bn.Append(bM.$0,bN.$0)};};_.Run=function(bM,bN){var bO;function bP(bQ){function bR(bS,bT){var bU;bU=bT-bS;bN.Compute(bU);bM();return bU<=bO?void a.requestAnimationFrame(function(bV){bR(bS,bV);}):bQ();}a.requestAnimationFrame(function(bS){bR(bS,bS);});}bO=bN.Duration;return bO===0?bm.Zero():bm.FromContinuations(function(bQ,bR,bS){return bP.apply(null,[bQ,bR,bS]);});};_.Concat=function(bM){return{$:0,$0:bn.Concat(M.map(bi.List,bM))};};_.get_Empty=function(){return{$:0,$0:bn.Empty()};};$.BatchUpdatesEnabled=function(){bj.$cctor();return bj.BatchUpdatesEnabled;};ba.StartProcessor=function(bM){var bN;function bO(){var bP;bP=null;return bm.Delay(function(){return bm.Bind(bM,function(){var bQ;bQ=bN[0];return bQ===1?(bN[0]=0,bm.Zero()):bQ===2?(bN[0]=1,bO()):bm.Zero();});});}bN=[0];return function(){var bP;bP=bN[0];bP===0?(bN[0]=1,bm.Start(bO(),null)):bP===1?bN[0]=2:void 0;};};bb.concat=function(bM){var bN,bO;bN=[];for(var bP in bM)bN.push.apply(bN,bM[bP]);return bN;};bc.concat=function(bM,bN){return n.ofSeq(bN).join(bM);};bc.SplitChars=function(bM,bN,bO){return bc.Split(bM,new a.RegExp("["+bc.RegexEscape(bN.join(""))+"]"),bO);};bc.StartsWith=function(bM,bN){return bM.substring(0,bN.length)==bN;};bc.Split=function(bM,bN,bO){return bO===1?n.filter(function(bP){return bP!=="";},bc.SplitWith(bM,bN)):bc.SplitWith(bM,bN);};bc.RegexEscape=function(bM){return bM.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bc.SplitWith=function(bM,bN){return bM.split(bN);};bc.forall=function(bM,bN){return M.forall(bM,bc.protect(bN));};bc.protect=function(bM){return bM===null?"":bM;};be.New=function(bM,bN,bO,bP){var bQ;bQ={DynElem:bM,DynFlags:bN,DynNodes:bO};bH.SetOptional(bQ,"OnAfterRender",bP);return bQ;};bg.New=function(bM,bN){return{PreviousNodes:bM,Top:bN};};bh.get_Empty=function(){return{$:0,$0:new K.New$3()};};bh.FindAll=function(bM){var bN;function bO(bQ){if(bQ!=null&&bQ.$==0){bO(bQ.$0);bO(bQ.$1);}else if(bQ!=null&&bQ.$==1)bP(bQ.$0);else if(bQ!=null&&bQ.$==2)bO(bQ.$0.Current);else if(bQ!=null&&bQ.$==6)n.iter(bP,bQ.$0.Holes);}function bP(bQ){bN.push(bQ);bO(bQ.Children);}bN=[];bO(bM);return{$:0,$0:new K.New$2(bN)};};bh.Filter=function(bM,bN){return{$:0,$0:bt.Filter(bM,bN.$0)};};bh.Except=function(bM,bN){return{$:0,$0:bt.Except(bM.$0,bN.$0)};};bh.ToArray=function(bM){return bt.ToArray(bM.$0);};bh.Intersect=function(bM,bN){return{$:0,$0:bt.Intersect(bM.$0,bN.$0)};};bi.UseAnimations=function(){bl.$cctor();return bl.UseAnimations;};bi.Actions=function(bM){return bi.ConcatActions(n.choose(function(bN){return bN.$==1?{$:1,$0:bN.$0}:null;},bn.ToArray(bM.$0)));};bi.Finalize=function(bM){n.iter(function(bN){if(bN.$==0)bN.$0();},bn.ToArray(bM.$0));};bi.ConcatActions=function(bM){var bN,bO,bP,bQ;bN=D.ofSeqNonCopying(bM);bO=n.length(bN);return bO===0?bi.Const():bO===1?n.get(bN,0):(bP=M.max(M.map(function(bR){return bR.Duration;},bN)),(bQ=n.map(function(bR){return bi.Prolong(bP,bR);},bN),bi.Def(bP,function(bR){n.iter(function(bS){bS.Compute(bR);},bQ);})));};bi.List=function(bM){return bM.$0;};bi.Const=function(bM){return bi.Def(0,function(){return bM;});};bi.Def=function(bM,bN){return{Compute:bN,Duration:bM};};bi.Prolong=function(bM,bN){var bO,bP,bQ;bO=bN.Compute;bP=bN.Duration;bQ=bB.Create(function(){return bN.Compute(bN.Duration);});return{Compute:function(bR){return bR>=bP?bQ.f():bO(bR);},Duration:bM};};bj.$cctor=function(){bj.$cctor=a.ignore;bj.BatchUpdatesEnabled=true;};bk=g.Elt=bH.Class({},z,bk);bk.TreeNode=function(bM,bN){var bO,bP;function bQ(bR){return bR[1];}bO=bo.Create(bN);return new bk.New$1({$:6,$0:bM},U.Map2Unit((bP=n.map(function(bR){return T.Updates(bQ(bR));},bM.Attrs),D.TreeReduce(U.Const(),U.Map2Unit,bP)),bO.v),n.get(bM.Els,0),bO);};bk.New$1=bH.Ctor(function(bM,bN,bO,bP){z.New.call(this,bM,bN);this.docNode$1=bM;this.updates$1=bN;this.elt=bO;this.rvUpdates=bP;},bk);bl.$cctor=function(){bl.$cctor=a.ignore;bl.CubicInOut=bp.Custom(function(bM){var bN;bN=bM*bM;return 3*bN-2*(bN*bM);});bl.UseAnimations=true;};bm.Delay=function(bM){return function(bN){try{(bM(null))(bN);}catch(bO){bN.k({$:1,$0:bO});}};};bm.Bind=function(bM,bN){return bm.checkCancel(function(bO){bM(bq.New(function(bP){var bQ;if(bP.$==0){bQ=bP.$0;bm.scheduler().Fork(function(){try{(bN(bQ))(bO);}catch(bR){bO.k({$:1,$0:bR});}});}else bm.scheduler().Fork(function(){bO.k(bP);});},bO.ct));});};bm.Zero=function(){br.$cctor();return br.Zero;};bm.Start=function(bM,bN){var bO,bP;bO=(bP=(bm.defCTS())[0],bN==null?bP:bN.$0);bm.scheduler().Fork(function(){if(!bO.c)bM(bq.New(function(bQ){if(bQ.$==1)bm.UncaughtAsyncError(bQ.$0);},bO));});};bm.Return=function(bM){return function(bN){bN.k({$:0,$0:bM});};};bm.checkCancel=function(bM){return function(bN){if(bN.ct.c)bm.cancel(bN);else bM(bN);};};bm.defCTS=function(){br.$cctor();return br.defCTS;};bm.UncaughtAsyncError=function(bM){bJ.log("WebSharper: Uncaught asynchronous exception",bM);};bm.FromContinuations=function(bM){return function(bN){var bO;function bP(bQ){if(bO[0])f.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bO[0]=true;bm.scheduler().Fork(bQ);}}bO=[false];bM(function(bQ){bP(function(){bN.k({$:0,$0:bQ});});},function(bQ){bP(function(){bN.k({$:1,$0:bQ});});},function(bQ){bP(function(){bN.k({$:2,$0:bQ});});});};};bm.cancel=function(bM){bM.k({$:2,$0:new bA.New(bM.ct)});};bm.scheduler=function(){br.$cctor();return br.scheduler;};bn.Append=function(bM,bN){return bM.$==0?bN:bN.$==0?bM:{$:2,$0:bM,$1:bN};};bn.ToArray=function(bM){var bN;function bO(bP){if(bP.$==1)bN.push(bP.$0);else if(bP.$==2){bO(bP.$0);bO(bP.$1);}else if(bP.$==3)n.iter(function(bQ){bN.push(bQ);},bP.$0);}bN=[];bO(bM);return bN.slice(0);};bn.Concat=function(bM){var bN;bN=D.ofSeqNonCopying(bM);return D.TreeReduce(bn.Empty(),bn.Append,bN);};bn.Empty=function(){bC.$cctor();return bC.Empty;};bo=g.Updates=bH.Class({},null,bo);bo.Create=function(bM){var bN;bN=null;bN=bo.New(bM,null,function(){var bO;bO=bN.s;return bO===null?(bO=w.Copy(bN.c()),bN.s=bO,w.WhenObsoleteRun(bO,function(){bN.s=null;}),bO):bO;});return bN;};bo.New=function(bM,bN,bO){return new bo({c:bM,s:bN,v:bO});};bp=g.Easing=bH.Class({},i,bp);bp.Custom=function(bM){return new bp.New(bM);};bp.New=bH.Ctor(function(bM){this.transformTime=bM;},bp);bq.New=function(bM,bN){return{k:bM,ct:bN};};br.$cctor=function(){br.$cctor=a.ignore;br.noneCT=bs.New(false,[]);br.scheduler=new bv.New();br.defCTS=[new bw.New()];br.Zero=bm.Return();br.GetCT=function(bM){bM.k({$:0,$0:bM.ct});};};bs.New=function(bM,bN){return{c:bM,r:bN};};bt.Filter=function(bM,bN){return new K.New$2(n.filter(bM,bt.ToArray(bN)));};bt.Except=function(bM,bN){var bO;bO=new K.New$2(bt.ToArray(bN));bO.ExceptWith(bt.ToArray(bM));return bO;};bt.ToArray=function(bM){var bN;bN=n.create(bM.get_Count(),void 0);bM.CopyTo(bN);return bN;};bt.Intersect=function(bM,bN){var bO;bO=new K.New$2(bt.ToArray(bM));bO.IntersectWith(bt.ToArray(bN));return bO;};bu.isBlank=function(bM){return bc.forall(by.IsWhiteSpace,bM);};bv=bm.Scheduler=bH.Class({Fork:function(bM){var bN;bN=this;this.robin.push(bM);this.idle?(this.idle=false,a.setTimeout(function(){bN.tick();},0)):void 0;},tick:function(){var bM,bN,bO;bN=this;bO=bL.now();bM=true;while(bM)if(this.robin.length===0){this.idle=true;bM=false;}else{(this.robin.shift())();bL.now()-bO>40?(a.setTimeout(function(){bN.tick();},0),bM=false):void 0;}}},i,bv);bv.New=bH.Ctor(function(){this.idle=true;this.robin=[];},bv);bw=e.CancellationTokenSource=bH.Class({},i,bw);bw.New=bH.Ctor(function(){this.c=false;this.pending=null;this.r=[];this.init=1;},bw);bx.Children=function(bM,bN){var bO,bP,bQ;if(bN!=null&&bN.$==1){bQ=[];bO=bN.$0[0].nextSibling;while(bO!==bN.$0[1]){bQ.push(bO);bO=bO.nextSibling;}return{$:0,$0:bQ};}else return{$:0,$0:n.init(bM.childNodes.length,(bP=bM.childNodes,function(bR){return bP[bR];}))};};bx.Except=function(bM,bN){var bO;bO=bM.$0;return{$:0,$0:n.filter(function(bP){return n.forall(function(bQ){return!(bP===bQ);},bO);},bN.$0)};};bx.Iter=function(bM,bN){n.iter(bM,bN.$0);};bx.DocChildren=function(bM){var bN;function bO(bP){if(bP!=null&&bP.$==2)bO(bP.$0.Current);else if(bP!=null&&bP.$==1)bN.push(bP.$0.El);else if(bP==null);else if(bP!=null&&bP.$==5)bN.push(bP.$0);else if(bP!=null&&bP.$==4)bN.push(bP.$0.Text);else if(bP!=null&&bP.$==6)n.iter(function(bQ){if(bQ==null||bQ.constructor===S)bO(bQ);else bN.push(bQ);},bP.$0.Els);else{bO(bP.$0);bO(bP.$1);}}bN=[];bO(bM.Children);return{$:0,$0:D.ofSeqNonCopying(bN)};};by.IsWhiteSpace=function(bM){return bM.match(new a.RegExp("\\s"))!==null;};W.TryParse=function(bM,bN,bO,bP){var bQ,bR;bQ=+bM;bR=bQ===bQ-bQ%1&&bQ>=bN&&bQ<=bO;bR?bP.set(bQ):void 0;return bR;};bz=g.DynamicAttrNode=bH.Class({NGetExitAnim:function(bM){return _.get_Empty();},NGetEnterAnim:function(bM){return _.get_Empty();},NGetChangeAnim:function(bM){return _.get_Empty();},NChanged:function(){return this.updates;},NSync:function(bM){if(this.dirty){(this.push(bM))(this.value);this.dirty=false;}}},i,bz);bz.New=bH.Ctor(function(bM,bN){var bO;bO=this;this.push=bN;this.value=void 0;this.dirty=false;this.updates=U.Map(function(bP){bO.value=bP;bO.dirty=true;},bM);},bz);bA=e.OperationCanceledException=bH.Class({},null,bA);bA.New=bH.Ctor(function(bM){bA.New$1.call(this,"The operation was canceled.",null,bM);},bA);bA.New$1=bH.Ctor(function(bM,bN,bO){this.message=bM;this.inner=bN;this.ct=bO;},bA);bB.Create=function(bM){return bE.New(false,bM,bB.forceLazy);};bB.forceLazy=function(){var bM;bM=this.v();this.c=true;this.v=bM;this.f=bB.cachedLazy;return bM;};bB.cachedLazy=function(){return this.v;};bC.$cctor=function(){bC.$cctor=a.ignore;bC.Empty={$:0};};bE.New=function(bM,bN,bO){return{c:bM,v:bN,f:bO};};bF.Clear=function(bM){bM.splice(0,n.length(bM));};bH.OnLoad(function(){c.Main();});}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
